const _0x50ae=['json','abc','md5','模型:','00:00:00:00:00:00','没有这个预设哦','post','是英文','fanyi','masterpiece,\x20best\x20quality,','访问失败了,QAQ,TvT','k_euler_ancestral','application/json','\x20\x20\x20\x20\x20\x20\x20\x20|seed:','#删除预设','msg','address','end','好的，已关闭了','^#土块画图模型(.*)|^#查看所有模型','规模不在合理范围内，3-12为合理范围','包含中文','writeFileSync','已关闭参数显示','#新增屏蔽词','toString','步数已设置为','30秒还未发图，以图生草已取消','\x0a规模：','Mozilla/5.0\x20(Windows\x20NT\x206.1;\x20WOW64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/86.0.4240.198\x20Safari/537.36','getTime','已设置冷却时间为','\x20\x20\x20|规模:','isGroup','#土块画图撤回关闭','image','url','szmx','test','{\x22error\x22:\x22unknown\x20error\x22}','lowres,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry','user_id','log','plms','我没画成功，再来一次吧。','已开启参数显示','get','crypto','^#开启代理|^#关闭代理|^#开启参数显示|^#关闭参数显示|^#开启词条回复|^#关闭词条回复','catch','没有访问成功哦','你是主人，没有cd，欸嘿','nai-diffusion','then','#土块画图冷却关闭','family','#开启默认屏蔽词','utf-8','已经取消','模型已设置为ddim','update','message_id','模型已设置为plms','stringify','#查看魔法','masterpiece,\x20best\x20quality,\x20','#土块画图涩涩开启','#开启参数显示','img','qvht','#土块画图预设','#关闭词条回复','#仅我可画','当前降噪','isMaster','round','#以图生草降噪','text','没有访问成功,尝试换接口','#以图生草','#土块画图撤回','None','删除预设成功','huatu2','http','15秒还未发图，查看魔法已取消','splice','你不是主人，不能用预设哦','请添加预设关键词','data','ysgn','\x20\x0a步数:','^#新增屏蔽词(.*)$|#查看屏蔽词$|#删除屏蔽词$|#开启默认屏蔽词$','/plugins/earth-k-plugin/resources/pz/pz.txt','#以图生草相似度','秒可画','123','tags','error','huatu3','[\x5cu4E00-\x5cu9FFF]+','./5.png','预设包含中文','#查看预设','正在查看魔法，请稍后啊，0v0','pbc','readFile','好的，权限已经关闭，只有你能画了','好吧，那就一起来吧！','已设置撤回时间为','\x0a步数：','https://api.sdgou.cc/api/fanyi/?msg=','/3.jpg','hex','https://xiaobapi.top/api/xb/api/upload_image_tags.php?url=','当前相似度','魔法是：','readFileSync','\x0a降噪：','模型已设置为k_euler','name','includes','模型已设置为k_euler_ancestral','我在cd中，还有','reply','\x0a相似度：','步数不在合理范围内，28以下为合理范围','split','暂未激活该功能哦','#查看画图设置','https://api.66mz8.com/api/translation.php?info=','127.0.0.1','shuju','base64','./resources/th.txt','https://api.novelai.net/ai/generate-image\x20','好的，我开始画图了，请稍等哦','length','./plugins/earth-k-plugin/resources/aiht/ml.html','concat','message','^#以图生草(.*)$|(.*)','你还不能使用此功能哦，暂未激活。','trim','szbs','replace','Bearer','^#查看所有预设$|#新增预设(.*)|(.*)','gjc','random','recallMsg','好的，我开始以图生草了'];const _0x3a65=function(_0x50ae99,_0x3a65ab){_0x50ae99=_0x50ae99-0x0;let _0xc5e31=_0x50ae[_0x50ae99];return _0xc5e31;};import{segment}from'oicq';import _0x35756f from'node-fetch';import _0xac3d6d,{chownSync}from'fs';import _0x36d0c1 from'../../../lib/config/config.js';import _0x26b568 from'../../../lib/puppeteer/puppeteer.js';let data1={};import{createRequire}from'module';const require=createRequire(import.meta[_0x3a65('0x24')]);let ysct;let mf;let mfkg=0x0;let ml=process['cwd']();var http=require(_0x3a65('0x54'));import _0x211f8f from'lodash';let yushekg=0x0;let kg=0x0;let guimo=5.5;let kg2=0x0;let mfid='';let res4;let htm='';let htm2='';let res5;let res;let zr=0x0;let changdu=0x200;let kuandu=0x200;let msg2;let timeout=0x7530;let isch=0x1;let cd=0x0;let t;let startTimeMS;let iscd=0x0;let my;let dz;let sj1;let sj2;let shuju;let zt=0x0;let gjc2;let sc=0x0;let bushu=0x1c;let id='';let xsd=0.4;let nr;let ycqx;let jz=0.2;let ss=_0x3a65('0x34');let Path;let ys=[];let moxing='k_euler';let isdl=0x0;let iscanshu=0x1;let ishuifu=!![];let HttpsProxyAgent='';let pc='lowres,nude,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry,\x20owres,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry';export class aiht extends plugin{constructor(){super({'name':'土块AI画图','dsc':'土块AI画图','event':'message','priority':0x479,'rule':[{'reg':'^#绘个图(.*)$|#土块画图预设(.*)$','fnc':_0x3a65('0x53')},{'reg':'^#取消画图$|^#所有人可画$|^#仅我可画$|^#土块画图撤回(.*)$|^#土块画图冷却(.*)$|^#土块画图涩涩开启|^#土块画图涩涩关闭','fnc':'qvht'},{'reg':_0x3a65('0x5c'),'fnc':_0x3a65('0x69')},{'reg':_0x3a65('0x8d'),'fnc':'huatu3','log':![]},{'reg':_0x3a65('0x93'),'fnc':_0x3a65('0x5a'),'log':![]},{'reg':'^#土块画图规模(.*)','fnc':'szgm'},{'reg':_0x3a65('0x13'),'fnc':_0x3a65('0x25')},{'reg':'^#土块画图步数(.*)|^#查看画图设置','fnc':_0x3a65('0x90')},{'reg':_0x3a65('0x30'),'fnc':'kqdl'}]});}async['kqdl'](_0x5e3862){if(_0x5e3862['msg']=='#开启代理'&_0x5e3862[_0x3a65('0x4a')]){isdl=0x1;_0x5e3862[_0x3a65('0x7c')]('开启代理成功');}if(_0x5e3862[_0x3a65('0xf')]=='#关闭代理'&_0x5e3862['isMaster']){isdl=0x0;_0x5e3862['reply']('已关闭代理');}if(_0x5e3862['msg']==_0x3a65('0x43')&_0x5e3862[_0x3a65('0x4a')]){iscanshu=0x1;_0x5e3862[_0x3a65('0x7c')](_0x3a65('0x2d'));}if(_0x5e3862[_0x3a65('0xf')]=='#关闭参数显示'&_0x5e3862['isMaster']){iscanshu=0x0;_0x5e3862['reply'](_0x3a65('0x17'));}if(_0x5e3862['msg']=='#开启词条回复'&_0x5e3862[_0x3a65('0x4a')]){ishuifu=!![];_0x5e3862['reply']('已开启词条回复');}if(_0x5e3862[_0x3a65('0xf')]==_0x3a65('0x47')&_0x5e3862[_0x3a65('0x4a')]){ishuifu=![];_0x5e3862['reply']('已关闭词条回复');}}async['szbs'](_0x5a49d6){if(_0x5a49d6['msg']==_0x3a65('0x81')){console[_0x3a65('0x2a')](0x8701a90);return;console[_0x3a65('0x2a')](guimo);let _0x14197d=['模型：',moxing,_0x3a65('0x1c'),guimo['toString'](),_0x3a65('0x6e'),bushu[_0x3a65('0x19')](),_0x3a65('0x7d'),xsd['toString'](),_0x3a65('0x76'),jz['toString']()];_0x5a49d6['reply'](_0x14197d);return;}bushu=_0x5a49d6['msg']['replace'](/#土块画图步数/g,'')['trim']();bushu=Number(bushu);if(bushu<0x0|bushu>0x1c){bushu=0x1c;_0x5a49d6['reply'](_0x3a65('0x7e'));return;}else{_0x5a49d6[_0x3a65('0x7c')](_0x3a65('0x1a')+String(bushu));}}async['szmx'](_0x487c63){if(_0x487c63['msg']=='#查看所有模型'){let _0x44f0c7=['1：k_euler_ancestral,\x0a2：k_euler,\x0a3：k_lms,\x0a4：plms,\x0a5：ddim'];_0x487c63[_0x3a65('0x7c')](_0x44f0c7);return;}moxing=_0x487c63[_0x3a65('0xf')][_0x3a65('0x91')](/#土块画图模型/g,'')['trim']();moxing=Number(moxing);if(moxing<0x0|moxing>0x5){_0x487c63['reply']('模型不在合理范围内，1-5为合理范围');moxing=0x2;return;}if(moxing==0x1){moxing=_0x3a65('0xb');_0x487c63['reply'](_0x3a65('0x7a'));}if(moxing==0x2){moxing='k_euler';_0x487c63['reply'](_0x3a65('0x77'));}if(moxing==0x3){moxing='k_lms';_0x487c63[_0x3a65('0x7c')]('模型已设置为k_lms');}if(moxing==0x4){moxing=_0x3a65('0x2b');_0x487c63[_0x3a65('0x7c')](_0x3a65('0x3e'));}if(moxing==0x5){moxing='ddim';_0x487c63[_0x3a65('0x7c')](_0x3a65('0x3b'));}}async['szgm'](_0x2e0c4c){guimo=_0x2e0c4c['msg']['replace'](/#土块画图规模/g,'')[_0x3a65('0x8f')]();guimo=Number(guimo);if(guimo<0x3|guimo>0xc){_0x2e0c4c[_0x3a65('0x7c')](_0x3a65('0x14'));guimo=5.5;return;}else{_0x2e0c4c['reply']('规模已设置为'+String(guimo));}}async['ysgn'](_0x5b87ad){if(_0x5b87ad['img']!=undefined){return![];}if(yushekg==0x0&_0x5b87ad['msg'][_0x3a65('0x79')]('#查看预设')==![]&_0x5b87ad['msg']['includes']('#新增预设')==![]&_0x5b87ad[_0x3a65('0xf')]['includes'](_0x3a65('0xe'))==![]&_0x5b87ad[_0x3a65('0xf')]['includes']('#查看预设词条')==![]){return![];}let _0x29c00c=ml+'/plugins/earth-k-plugin/resources/htys/ys.json';let _0x280ccc='';await _0xac3d6d[_0x3a65('0x6a')](_0x29c00c,(_0x120d63,_0x2d3c7b)=>{if(_0x120d63)throw _0x120d63;var _0x59195d=_0x2d3c7b[_0x3a65('0x19')]()!=''?JSON['parse'](_0x2d3c7b['toString']()):[];ysct='';_0x280ccc='';shuju=_0x59195d;for(let _0x528a52=0x0;_0x528a52<shuju['shuju'][_0x3a65('0x89')];_0x528a52++){_0x280ccc=_0x280ccc+shuju['shuju'][_0x528a52]['name']+',';ysct=ysct+shuju['shuju'][_0x528a52][_0x3a65('0x94')]+'++';}});await sleep(0x1f4);if(_0x5b87ad[_0x3a65('0xf')][_0x3a65('0x79')]('#查看预设词条')&_0x5b87ad['isMaster']){let _0x191f4d=_0x5b87ad[_0x3a65('0xf')][_0x3a65('0x91')](/#查看预设词条/g,'')[_0x3a65('0x8f')]();_0x191f4d=Number(_0x191f4d);ysct=ysct[_0x3a65('0x7f')]('++');_0x280ccc=_0x280ccc[_0x3a65('0x7f')](',');if(_0x191f4d>ysct[_0x3a65('0x89')]|_0x191f4d<0x0){_0x5b87ad[_0x3a65('0x7c')]('数字超过了预设个数');return;}_0x5b87ad[_0x3a65('0x7c')]([_0x280ccc[_0x191f4d-0x1],':',ysct[_0x191f4d-0x1]]);ysct='';_0x280ccc='';}if(_0x5b87ad[_0x3a65('0xf')]==_0x3a65('0x67')&_0x5b87ad['isMaster']){_0x280ccc=_0x280ccc['split'](',');data1={'tplFile':_0x3a65('0x8a'),'dz':ml,'lb':_0x280ccc,'qsid':0x0};let _0x4656a4=await _0x26b568['screenshot'](_0x3a65('0x60'),{...data1});_0x5b87ad[_0x3a65('0x7c')](_0x4656a4);return;_0x5b87ad[_0x3a65('0x7c')]('当前预设有：\x0a'+_0x280ccc);}if(_0x5b87ad[_0x3a65('0xf')][_0x3a65('0x79')]('#删除预设')&_0x5b87ad[_0x3a65('0x4a')]){let _0x4abcb3=_0x5b87ad['msg']['replace'](/#删除预设/g,'')['trim']();_0x4abcb3=Number(_0x4abcb3);if(_0x4abcb3<shuju[_0x3a65('0x84')]['length']+0x1){shuju['shuju'][_0x3a65('0x56')](_0x4abcb3-0x1,0x1);var _0x470728=JSON[_0x3a65('0x3f')](shuju);}_0xac3d6d['writeFile'](_0x29c00c,_0x470728,function(_0x536455){if(_0x536455){console[_0x3a65('0x62')](_0x536455);}_0x5b87ad['reply'](_0x3a65('0x52'));});}if(_0x5b87ad['msg'][_0x3a65('0x79')]('#新增预设')&_0x5b87ad[_0x3a65('0x4a')]&yushekg==0x0){yushekg=0x1;ys[0x0]=_0x5b87ad['msg']['replace'](/#新增预设/g,'')[_0x3a65('0x8f')]();_0x5b87ad['reply'](_0x3a65('0x58'));return;}if(yushekg==0x1&_0x5b87ad['isMaster']){yushekg=0x0;ys[0x1]=_0x5b87ad['msg'];let _0x252398={'name':ys[0x0],'gjc':ys[0x1]};shuju[_0x3a65('0x84')]['push'](_0x252398);console['log'](shuju);var _0x470728=JSON['stringify'](shuju);_0xac3d6d['writeFile'](_0x29c00c,_0x470728,_0x3d82c2=>{if(_0x3d82c2)throw _0x3d82c2;console['log']('文件写入成功！');_0x5b87ad[_0x3a65('0x7c')]('新增预设成功');});return;}}async['pbc'](_0x59ab0b){if(_0x59ab0b[_0x3a65('0xf')]['includes'](_0x3a65('0x18'))&_0x59ab0b['isMaster']){_0x59ab0b[_0x3a65('0x7c')]('新增屏蔽词成功');pc=_0x59ab0b['msg'][_0x3a65('0x91')](/#新增屏蔽词/g,'')[_0x3a65('0x8f')]();}if(_0x59ab0b[_0x3a65('0xf')]=='#查看屏蔽词'&_0x59ab0b['isMaster']){_0x59ab0b[_0x3a65('0x7c')](['当前屏蔽词有：',pc]);}if(_0x59ab0b['msg'][_0x3a65('0x79')]('#删除屏蔽词')&_0x59ab0b[_0x3a65('0x4a')]){_0x59ab0b['reply']('删除屏蔽词成功'+'我知道你要干嘛！注意身体！');pc='';}if(_0x59ab0b['msg'][_0x3a65('0x79')](_0x3a65('0x38'))&_0x59ab0b['isMaster']){_0x59ab0b['reply']('已经开启默认屏蔽词');pc='lowres,nude,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry,\x20owres,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry';}}async[_0x3a65('0x45')](_0x39dacc){if(_0x39dacc['msg']==_0x3a65('0x42')&_0x39dacc['isMaster']){_0x39dacc['reply']('好的，已开启，请注意身体哦');ss=_0x3a65('0x34');}if(_0x39dacc['msg']=='#土块画图涩涩关闭'&_0x39dacc['isMaster']){_0x39dacc['reply'](_0x3a65('0x12'));ss='safe-diffusion';}await dqpz();if(_0x39dacc['msg']['includes'](_0x3a65('0x36'))&_0x39dacc[_0x3a65('0x4a')]){nr[0x3]=0x0;nr[0x0]=0x0;_0xac3d6d['writeFileSync'](Path,nr[_0x3a65('0x19')](),'utf-8');cd=0x0;kg2=0x0;kg=0x0;sc=0x0;iscd=0x0;_0x39dacc['reply']('已关闭画图冷却');return;}if(_0x39dacc['msg']['includes']('#土块画图冷却开启')&_0x39dacc['isMaster']){nr[0x0]=0x7530;nr[0x3]=0x1;_0xac3d6d[_0x3a65('0x16')](Path,nr[_0x3a65('0x19')](),'utf-8');cd=0x7530;_0x39dacc['reply']('已开启画图冷却，冷却时间为30秒');return;}if(_0x39dacc['msg']['includes']('#土块画图冷却')&_0x39dacc['isMaster']){let _0x5a914e=_0x39dacc[_0x3a65('0xf')]['replace'](/#土块画图冷却/g,'')['trim']();cd=Number(_0x5a914e)*0x3e8;nr[0x0]=cd;nr[0x3]=0x1;_0xac3d6d[_0x3a65('0x16')](Path,nr['toString'](),_0x3a65('0x39'));_0x39dacc['reply'](_0x3a65('0x1f')+_0x5a914e+'秒');}if(_0x39dacc[_0x3a65('0xf')]['includes'](_0x3a65('0x22'))&_0x39dacc['isMaster']){nr[0x2]=0x0;_0xac3d6d[_0x3a65('0x16')](Path,nr[_0x3a65('0x19')](),'utf-8');isch=0x0;_0x39dacc[_0x3a65('0x7c')]('已关闭画图撤回');return;}if(_0x39dacc[_0x3a65('0xf')]['includes']('#土块画图撤回开启')&_0x39dacc['isMaster']){isch=0x1;nr[0x1]=0x7530;nr[0x2]=0x1;_0xac3d6d[_0x3a65('0x16')](Path,nr[_0x3a65('0x19')](),_0x3a65('0x39'));timeout=0x7530;_0x39dacc[_0x3a65('0x7c')]('已开启画图撤回，撤回时间为30秒');return;}if(_0x39dacc[_0x3a65('0xf')][_0x3a65('0x79')](_0x3a65('0x50'))&_0x39dacc['isMaster']){isch=0x1;let _0x182687=_0x39dacc[_0x3a65('0xf')][_0x3a65('0x91')](/#土块画图撤回/g,'')['trim']();timeout=Number(_0x182687)*0x3e8;nr[0x1]=timeout;nr[0x2]=0x1;_0xac3d6d[_0x3a65('0x16')](Path,nr['toString'](),_0x3a65('0x39'));_0x39dacc['reply'](_0x3a65('0x6d')+_0x182687+'秒');}if(_0x39dacc[_0x3a65('0xf')]=='#取消画图'){kg=0x0;sc=0x0;zt=0x0;id='';console['log'](_0x3a65('0x3a'));kg2=0x0;_0x39dacc['reply']('已取消当前画图');}if(_0x39dacc[_0x3a65('0xf')]=='#所有人可画'&_0x39dacc[_0x3a65('0x4a')]){_0x39dacc[_0x3a65('0x7c')](_0x3a65('0x6c'));zr=0x0;}if(_0x39dacc['msg']==_0x3a65('0x48')&_0x39dacc['isMaster']){_0x39dacc[_0x3a65('0x7c')](_0x3a65('0x6b'));zr=0x1;}}async[_0x3a65('0x63')](_0x365e6c){if(_0x365e6c['img']!=undefined&zt==0x0&mfkg==0x0){return![];}if(_0x365e6c[_0x3a65('0x44')]==undefined&_0x365e6c[_0x3a65('0xf')]!=undefined){if(_0x365e6c[_0x3a65('0xf')]['includes'](_0x3a65('0x4f'))==![]&_0x365e6c['img']==undefined&zt==0x0&_0x365e6c[_0x3a65('0xf')]['includes']('#查看魔法')==![]&mfkg==0x0){return![];}}if(mfkg==0x0&_0x365e6c[_0x3a65('0xf')]==_0x3a65('0x40')){mfkg=0x1;mfid=_0x365e6c['user_id'];_0x365e6c['reply']('请发送要查看魔法的图片,0.0');mf=setTimeout(()=>{if(mfkg==0x1){mfkg=0x0;_0x365e6c['reply'](_0x3a65('0x55'));return;}},0x3a98);}if(_0x365e6c[_0x3a65('0x44')]!=undefined&mfkg==0x1&mfid==_0x365e6c[_0x3a65('0x29')]){clearTimeout(mf);_0x365e6c[_0x3a65('0x7c')](_0x3a65('0x68'));mfkg=0x0;mfid='';let _0x43a70a=_0x3a65('0x72');console['log'](_0x365e6c['img']);_0x43a70a=_0x43a70a+_0x365e6c[_0x3a65('0x44')][0x0];res=await _0x35756f(_0x43a70a,{'method':_0x3a65('0x2e'),'headers':{'Content-Type':'application/json','User-Agent':_0x3a65('0x1d')}});let _0xbf1e5=await res[_0x3a65('0x0')]();console['log'](_0x3a65('0x74')+_0xbf1e5);console[_0x3a65('0x2a')](_0xbf1e5);if(_0xbf1e5!=undefined){_0x365e6c[_0x3a65('0x7c')](_0xbf1e5[_0x3a65('0x61')],!![]);if(_0xbf1e5['code']==-0x1){_0x365e6c['reply'](_0x3a65('0xa'));mfkg=0x0;mfid='';}}else{}}if(_0x365e6c['img']==undefined&zt==0x1){return![];}if(_0x365e6c[_0x3a65('0x44')]==undefined&_0x365e6c[_0x3a65('0xf')]!=undefined){dqpz();if(_0x365e6c['msg']['includes'](_0x3a65('0x5e'))&_0x365e6c['isMaster']){xsd=Number(_0x365e6c['msg'][_0x3a65('0x91')](/#以图生草相似度/g,'')['trim']())/0x64;_0x365e6c['reply'](_0x3a65('0x73')+String(xsd));console[_0x3a65('0x2a')](xsd);return;}if(_0x365e6c['msg']['includes'](_0x3a65('0x4c'))&_0x365e6c['isMaster']){jz=Number(_0x365e6c['msg'][_0x3a65('0x91')](/#以图生草降噪/g,'')[_0x3a65('0x8f')]())/0x64;_0x365e6c[_0x3a65('0x7c')](_0x3a65('0x49')+String(jz));console[_0x3a65('0x2a')](jz);return;}if(zt==0x0&&sc==0x0&&_0x365e6c[_0x3a65('0xf')][_0x3a65('0x79')](_0x3a65('0x4f'))){if(_0x365e6c['isPrivate']){_0x365e6c[_0x3a65('0x7c')]('以图生草暂不支持私聊');return;}dqpz();var _0x4c2cde=require('os');var _0x5341c2='';var _0x1a9deb=_0x4c2cde['networkInterfaces']();for(var _0x22d4b1 in _0x1a9deb){for(var _0x380170 in _0x1a9deb[_0x22d4b1]){if(_0x1a9deb[_0x22d4b1][_0x380170][_0x3a65('0x37')]==='IPv4'&&_0x1a9deb[_0x22d4b1][_0x380170]['mac']!==_0x3a65('0x4')&&_0x1a9deb[_0x22d4b1][_0x380170][_0x3a65('0x10')]!==_0x3a65('0x83')){_0x5341c2=_0x1a9deb[_0x22d4b1][_0x380170]['mac'];}}}var _0x23de1d=require(_0x3a65('0x2f'));function _0x3429fa(_0x54c910){var _0xc64e31=_0x23de1d['createHash'](_0x3a65('0x2'));return _0xc64e31[_0x3a65('0x3c')](_0x54c910)['digest']('hex');}var _0x16ea86=_0x5341c2;var _0xd18c7d=_0x3429fa(_0x16ea86);let _0x454ba9=_0x365e6c[_0x3a65('0xf')][_0x3a65('0x91')](/#填写激活码/g,'')[_0x3a65('0x8f')]();htm=_0xd18c7d;try{htm2=_0xac3d6d[_0x3a65('0x75')](_0x3a65('0x86'));}catch{_0x365e6c[_0x3a65('0x7c')](_0x3a65('0x80'));return;}if(htm2==htm){htm2='';}htm2=htm2['toString']();htm2=htm2[_0x3a65('0x91')](/]Q/g,'a')[_0x3a65('0x8f')]();htm2=htm2[_0x3a65('0x91')](/\{F/g,'b')[_0x3a65('0x8f')]();htm2=htm2['replace'](/\[W/g,'c')['trim']();htm2=htm2['replace'](/\}G/g,'d')['trim']();htm2=htm2['replace'](/\*T/g,'e')['trim']();htm2=htm2[_0x3a65('0x91')](/\=K/g,'f')['trim']();htm2=htm2[_0x3a65('0x91')](/\-R/g,'g')['trim']();htm2=htm2[_0x3a65('0x91')](/\*Z/g,'1')['trim']();htm2=htm2[_0x3a65('0x91')](/\+X/g,'2')['trim']();htm2=htm2[_0x3a65('0x91')](/\-C/g,'3')['trim']();htm2=htm2[_0x3a65('0x91')](/\)V/g,'4')['trim']();htm2=htm2['replace'](/\&Z/g,'9')['trim']();htm2=htm2[_0x3a65('0x91')](/\^X/g,'8')['trim']();htm2=htm2[_0x3a65('0x91')](/\%C/g,'7')[_0x3a65('0x8f')]();htm2=htm2[_0x3a65('0x91')](/\$V/g,'6')[_0x3a65('0x8f')]();if(htm!=htm2){_0x365e6c[_0x3a65('0x7c')]('你还不能使用此功能哦，暂未激活。');return;}console[_0x3a65('0x2a')]('以图生草');id=_0x365e6c[_0x3a65('0x29')];gjc2=_0x365e6c['msg']['replace'](/#以图生草/g,'')[_0x3a65('0x8f')]();var _0x5d2465=new RegExp(_0x3a65('0x64'),'g');if(_0x5d2465['test'](gjc2)){console[_0x3a65('0x2a')]('包含中文');let _0x37d652=_0x3a65('0x6f')+gjc2;let _0x3578c4=await _0x35756f(_0x37d652);let _0x88b18e=await _0x3578c4['text']();_0x88b18e=_0x88b18e['replace'](/有道翻译查询结果/g,'')[_0x3a65('0x8f')]();_0x88b18e=_0x88b18e[_0x3a65('0x91')](/翻译后/g,'')['trim']();_0x88b18e=_0x88b18e['replace'](/翻译前/g,'')[_0x3a65('0x8f')]();_0x88b18e=_0x88b18e['replace'](/：/g,'')[_0x3a65('0x8f')]();_0x88b18e=_0x88b18e['replace'](new RegExp(gjc2,'g'),'');gjc2=_0x88b18e;console['log'](gjc2);}else{console[_0x3a65('0x2a')](_0x3a65('0x7'));}zt=0x1;ycqx=setTimeout(()=>{if(zt==0x1){zt=0x0;_0x365e6c['reply'](_0x3a65('0x1b'));return;}},0x7530);_0x365e6c['reply']([segment['at'](id),'请发送图片']);return;}}if(sc==0x0&_0x365e6c[_0x3a65('0x21')]&zt==0x1&_0x365e6c[_0x3a65('0x44')]!=undefined){clearTimeout(ycqx);if(_0x365e6c['user_id']==id&zt==0x1){sc=0x1;let _0xeef5bd=await imgUrlToBase64(_0x365e6c[_0x3a65('0x44')][0x0][_0x3a65('0x91')](/https/g,_0x3a65('0x54'))['trim']());let _0x5a33e5=_0xeef5bd['base64Img'];let _0x99ceb2=Math['floor'](Math[_0x3a65('0x95')]()*0xb6cff090);var _0x410910={'prompt':_0x3a65('0x9')+gjc2,'width':0x180,'height':0x200,'scale':guimo,'sampler':moxing,'steps':0x32,'seed':_0x99ceb2,'n_samples':0x1,'strength':0x1-xsd,'noise':jz,'ucPreset':0x0,'image':_0x5a33e5,'uc':pc};_0x365e6c['reply'](_0x3a65('0x97'));zt=0x0;try{res=await _0x35756f('http://119.29.118.238:6690/generate-stream\x20',{'method':'post','body':JSON['stringify'](_0x410910),'headers':{'Content-Type':_0x3a65('0xc'),'User-Agent':'Mozilla/5.0\x20(Windows\x20NT\x206.1;\x20WOW64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/86.0.4240.198\x20Safari/537.36'}});}catch(_0x4ca04e){console[_0x3a65('0x2a')](_0x4ca04e);console[_0x3a65('0x2a')]('没有访问成功');kg=0x0;return;}let _0x24fa52=await res[_0x3a65('0x4d')]();_0x24fa52=_0x24fa52['replace'](/id: 1/g,'')[_0x3a65('0x8f')]();_0x24fa52=_0x24fa52['replace'](/event: newImage/g,'')['trim']();_0x24fa52=_0x24fa52[_0x3a65('0x91')](/data:/g,'')['trim']();if(res==''){_0x365e6c['reply']('我没画成功，再来一次吧。');return;}_0x365e6c[_0x3a65('0x7c')]('成功了！');await _0xac3d6d['writeFile']('./3.jpg',_0x24fa52[_0x3a65('0x19')](),'base64',_0x106959=>{if(_0x106959){console[_0x3a65('0x2a')]('写入文件错误');}else{console[_0x3a65('0x2a')]('写入文件成功');}});msg2=[segment['at'](_0x365e6c['user_id']),segment[_0x3a65('0x23')](ml+_0x3a65('0x70'))];await sleep(0x1f4);let _0x99640=await _0x365e6c['reply'](msg2);iscd=0x1;console['log'](_0x99640['message_id'],isch);if(_0x99640&&_0x99640[_0x3a65('0x3d')]&&isch==0x1&&_0x365e6c['isGroup']){let _0x382d6=_0x365e6c['group'];setTimeout(()=>{_0x382d6['recallMsg'](_0x99640[_0x3a65('0x3d')]);},timeout);}startTimeMS=new Date()[_0x3a65('0x1e')]();t=setTimeout(()=>{iscd=0x0;sc=0x0;id='';},cd);}}else if(_0x365e6c[_0x3a65('0x44')]==undefined&_0x365e6c[_0x3a65('0xf')]!=undefined){if(_0x365e6c['msg'][_0x3a65('0x79')]('#以图生草')){if(iscd==0x1){console['log'](iscd);let _0x1c9253=cd-(new Date()['getTime']()-startTimeMS);_0x1c9253=Math[_0x3a65('0x4b')](_0x1c9253/0x3e8);if(_0x1c9253<0x0){sc=0x0;id='';return;}_0x365e6c[_0x3a65('0x7c')](_0x3a65('0x7b')+String(_0x1c9253)+'秒可画');}else{_0x365e6c[_0x3a65('0x7c')]('正在生草中，我知道你很急，先别急');}}}}async[_0x3a65('0x53')](_0x11ad31){dqpz();var _0x14fea4=require('os');var _0x4fd4ec='';var _0x3f8b33=_0x14fea4['networkInterfaces']();for(var _0x308b03 in _0x3f8b33){for(var _0x28fe20 in _0x3f8b33[_0x308b03]){if(_0x3f8b33[_0x308b03][_0x28fe20]['family']==='IPv4'&&_0x3f8b33[_0x308b03][_0x28fe20]['mac']!==_0x3a65('0x4')&&_0x3f8b33[_0x308b03][_0x28fe20]['address']!=='127.0.0.1'){_0x4fd4ec=_0x3f8b33[_0x308b03][_0x28fe20]['mac'];}}}var _0x268ed3=require(_0x3a65('0x2f'));function _0x2fb398(_0x1580e1){var _0x586a14=_0x268ed3['createHash'](_0x3a65('0x2'));return _0x586a14[_0x3a65('0x3c')](_0x1580e1)['digest'](_0x3a65('0x71'));}var _0x34d219=_0x4fd4ec;var _0x43ae30=_0x2fb398(_0x34d219);let _0x1d8175=_0x11ad31['msg']['replace'](/#填写激活码/g,'')['trim']();htm=_0x43ae30;try{htm2=_0xac3d6d['readFileSync'](_0x3a65('0x86'));}catch{_0x11ad31[_0x3a65('0x7c')]('暂未激活该功能哦');return;}if(htm2==htm){htm2='';}htm2=htm2[_0x3a65('0x19')]();htm2=htm2[_0x3a65('0x91')](/]Q/g,'a')[_0x3a65('0x8f')]();htm2=htm2['replace'](/\{F/g,'b')['trim']();htm2=htm2['replace'](/\[W/g,'c')['trim']();htm2=htm2['replace'](/\}G/g,'d')['trim']();htm2=htm2[_0x3a65('0x91')](/\*T/g,'e')[_0x3a65('0x8f')]();htm2=htm2[_0x3a65('0x91')](/\=K/g,'f')[_0x3a65('0x8f')]();htm2=htm2[_0x3a65('0x91')](/\-R/g,'g')['trim']();htm2=htm2['replace'](/\*Z/g,'1')[_0x3a65('0x8f')]();htm2=htm2['replace'](/\+X/g,'2')[_0x3a65('0x8f')]();htm2=htm2['replace'](/\-C/g,'3')['trim']();htm2=htm2[_0x3a65('0x91')](/\)V/g,'4')[_0x3a65('0x8f')]();htm2=htm2['replace'](/\&Z/g,'9')['trim']();htm2=htm2[_0x3a65('0x91')](/\^X/g,'8')['trim']();htm2=htm2['replace'](/\%C/g,'7')['trim']();htm2=htm2[_0x3a65('0x91')](/\$V/g,'6')['trim']();if(htm!=htm2){_0x11ad31['reply'](_0x3a65('0x8e'));return;}await sleep(0x1f4);if(_0x11ad31[_0x3a65('0xf')][_0x3a65('0x79')]('#土块画图预设')&!_0x11ad31['isMaster']){_0x11ad31['reply'](_0x3a65('0x57'));return;}let _0x15b73c;let _0x1c20cc;let _0x1152d9;if(_0x11ad31[_0x3a65('0xf')]['includes']('#土块画图预设')==![]){_0x1152d9=_0x11ad31['msg'][_0x3a65('0x91')](/#绘个图/g,'')[_0x3a65('0x8f')]();}if(kg2==0x0&_0x11ad31[_0x3a65('0x21')]|_0x11ad31[_0x3a65('0x4a')]){if(kg2==0x1){_0x11ad31[_0x3a65('0x7c')](_0x3a65('0x33'));}if(zr==0x1&!_0x11ad31['isMaster']){_0x11ad31[_0x3a65('0x7c')]('对不起，你不可画哦');return;}kg2=0x1;let _0x1a91f0=_0x1152d9;var _0x8126d5=new RegExp('[\x5cu4E00-\x5cu9FFF]+','g');if(_0x8126d5['test'](_0x1a91f0)){console[_0x3a65('0x2a')](_0x3a65('0x15'));let _0x16dd5e=_0x3a65('0x6f')+_0x1a91f0;let _0x4d1272=await _0x35756f(_0x16dd5e);let _0x58c4fb=await _0x4d1272[_0x3a65('0x4d')]();_0x58c4fb=_0x58c4fb['replace'](/有道翻译查询结果/g,'')[_0x3a65('0x8f')]();_0x58c4fb=_0x58c4fb[_0x3a65('0x91')](/翻译后/g,'')[_0x3a65('0x8f')]();_0x58c4fb=_0x58c4fb['replace'](/翻译前/g,'')[_0x3a65('0x8f')]();_0x58c4fb=_0x58c4fb['replace'](/：/g,'')['trim']();_0x58c4fb=_0x58c4fb['replace'](new RegExp(_0x1a91f0,'g'),'');res4=_0x58c4fb;if(res4==''){let _0x2cbf53='\x20http://www.iinside.cn:7001/api_req?reqmode=nmt_mt5_jez&password=3652&text='+_0x1152d9+'&order=zh2en';res4=await _0x35756f(_0x2cbf53);res4=await res4['json']();res4=res4[_0x3a65('0x59')];}if(res4==''){let _0x144b6d=_0x3a65('0x82')+_0x1152d9;res4=await _0x35756f(_0x144b6d);res4=await res4[_0x3a65('0x0')]();res4=res4[_0x3a65('0x8')];}console['log'](res4);}else{console['log']('是英文');res4=_0x1a91f0;}let _0x49b33b;let _0xabf143;if(_0x11ad31['msg']['includes'](_0x3a65('0x46'))&_0x11ad31[_0x3a65('0x4a')]){_0x1c20cc=_0x11ad31[_0x3a65('0xf')]['replace'](/#土块画图预设/g,'')[_0x3a65('0x8f')]();let _0x5c41e2=ml+'/plugins/earth-k-plugin/resources/htys/ys.json';await _0xac3d6d[_0x3a65('0x6a')](_0x5c41e2,(_0x54e193,_0xe397fe)=>{_0x15b73c=JSON['parse'](_0xe397fe['toString']());_0xabf143=_0x15b73c['shuju'];var _0x3f3cbf=new RegExp('[\x5cu4E00-\x5cu9FFF]+','g');if(_0x3f3cbf[_0x3a65('0x26')](_0x1c20cc)){console['log'](_0x3a65('0x66'));_0x49b33b=_0xabf143['findIndex'](_0x147d96=>_0x147d96[_0x3a65('0x78')]==_0x1c20cc);}else{_0x49b33b=Number(_0x1c20cc)-0x1;if(_0x49b33b>_0xabf143['length']){_0x49b33b=-0x1;return;}}});await sleep(0x1f4);console[_0x3a65('0x2a')](_0x49b33b);if(_0x49b33b!=-0x1){res4=_0xabf143[_0x49b33b][_0x3a65('0x94')];}else{_0x11ad31[_0x3a65('0x7c')](_0x3a65('0x5'));return;}}await sleep(0x1f4);_0x11ad31[_0x3a65('0x7c')](_0x3a65('0x88'));let _0xa85ae4=Math['floor'](Math['random']()*0x2);if(_0xa85ae4==0x0){changdu=0x200;kuandu=0x300;}if(_0xa85ae4==0x1){changdu=0x300;kuandu=0x200;}console['log'](_0xa85ae4);console['log'](res4);var _0x4793ce=_0x3a65('0x1');var _0xe4b7f4=[res4,pc,'None','None',0x14,'Euler\x20a',![],![],0x1,0x1,0x7,-0x1,-0x1,0x0,0x0,0x0,![],changdu,kuandu,![],![],0.7,_0x3a65('0x51'),![],![],null,'','Seed','','Steps','',!![],![],null,'',''];var _0x7a624=[res4,pc,_0x3a65('0x51'),'None',0x1c,'Euler\x20a',![],![],0x1,0x1,0xb,-0x1,-0x1,0x0,0x0,0x0,![],0x200,0x200,![],![],0.7,'None',![],![],null,'','Seed','','Steps','',!![],![],null,'',''];let _0x5537ad=_0x3a65('0x87');let _0x3aee12=Math['floor'](Math[_0x3a65('0x95')]()*0xb6cff090);let _0x365231=_0x3a65('0x3')+moxing+_0x3a65('0x20')+guimo['toString']()+_0x3a65('0x5b')+bushu[_0x3a65('0x19')]()+_0x3a65('0xd')+_0x3aee12['toString']();try{res=await _0x35756f(_0x5537ad,{'method':_0x3a65('0x6'),'agent':isdl?await getAgent():'','headers':{'Content-Type':'application/json','authorization':'Bearer\x20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImlRWFFJd1N1TVhsNGp6ZHVQN0J4OCIsIm5jIjoiSm1Ba0wtcWFidkF0YzRpTXZRQUROIiwiaWF0IjoxNjY4MzI1MzkzLCJleHAiOjE2NzA5MTczOTN9.00JllxQBqnzVbMhbx9LTWGD2tPyDeop8gXVJsiuj1qU'},'body':JSON['stringify']({'input':_0x3a65('0x41')+res4,'model':ss,'parameters':{'width':kuandu,'height':changdu,'scale':guimo,'sampler':moxing,'steps':bushu,'seed':_0x3aee12,'n_samples':0x1,'ucPreset':0x0,'uc':pc}})});console[_0x3a65('0x2a')]('访问成功了');}catch(_0x4248d3){console[_0x3a65('0x2a')](_0x4248d3);console['log']('没有访问成功,尝试换接口');_0x5537ad='http://119.29.118.238:6690/generate-stream';try{res=await _0x35756f(_0x5537ad,{'method':_0x3a65('0x6'),'headers':{'Content-Type':'application/json','authorization':'Bearer'},'body':JSON['stringify']({'prompt':_0x3a65('0x9')+res4,'width':kuandu,'height':changdu,'scale':guimo,'sampler':moxing,'steps':0x14,'seed':_0x3aee12,'n_samples':0x1,'ucPreset':0x0,'uc':_0x3a65('0x28')})});}catch(_0x21e325){console[_0x3a65('0x2a')](_0x21e325);_0x11ad31[_0x3a65('0x7c')]('没有访问成功哦');kg2=0x0;return;}}res=await res['text']();if(res==_0x3a65('0x27')){console[_0x3a65('0x2a')](_0x3a65('0x4e'));_0x5537ad='http://119.29.118.238:6690/generate-stream';try{res=await _0x35756f(_0x5537ad,{'method':_0x3a65('0x6'),'headers':{'Content-Type':_0x3a65('0xc'),'authorization':_0x3a65('0x92')},'body':JSON[_0x3a65('0x3f')]({'prompt':_0x3a65('0x9')+res4,'width':kuandu,'height':changdu,'scale':guimo,'sampler':_0x3a65('0xb'),'steps':0x14,'seed':_0x3aee12,'n_samples':0x1,'ucPreset':0x0,'uc':_0x3a65('0x28')})});}catch(_0x590351){console[_0x3a65('0x2a')](_0x590351);_0x11ad31[_0x3a65('0x7c')](_0x3a65('0x32'));kg2=0x0;return;}return;}if(!res[_0x3a65('0x79')]('event:\x20newImage')){_0x11ad31['reply']('我没画成功，再来一次吧。');kg2=0x0;return;}res=res[_0x3a65('0x91')](/id: 1/g,'')['trim']();res=res[_0x3a65('0x91')](/event: newImage/g,'')[_0x3a65('0x8f')]();res=res['replace'](/data:/g,'')['trim']();if(res==''){_0x11ad31['reply'](_0x3a65('0x2c'));kg2=0x0;return;}await _0xac3d6d['writeFile'](_0x3a65('0x65'),res[_0x3a65('0x19')](),_0x3a65('0x85'),_0x1a63ba=>{if(_0x1a63ba){console[_0x3a65('0x2a')]('写入文件错误');}else{console['log']('写入文件成功');}});if(iscanshu==0x0){_0x365231='';}await sleep(0x1f4);msg2=[segment['image'](ml+'/5.png'),_0x365231];let _0x3b30bc=await _0x11ad31['reply'](msg2,ishuifu);iscd=0x1;console[_0x3a65('0x2a')](_0x3b30bc[_0x3a65('0x3d')],isch);if(_0x3b30bc&&_0x3b30bc[_0x3a65('0x3d')]&&isch==0x1&&_0x11ad31[_0x3a65('0x21')]){let _0x135fa8=_0x11ad31['group'];setTimeout(()=>{_0x135fa8[_0x3a65('0x96')](_0x3b30bc['message_id']);},timeout);}startTimeMS=new Date()[_0x3a65('0x1e')]();t=setTimeout(()=>{kg2=0x0;iscd=0x0;},cd);}else if(iscd==0x1){let _0x25c239=cd-(new Date()[_0x3a65('0x1e')]()-startTimeMS);_0x25c239=Math[_0x3a65('0x4b')](_0x25c239/0x3e8);if(_0x25c239<0x0){kg2=0x0;return;}_0x11ad31[_0x3a65('0x7c')](_0x3a65('0x7b')+String(_0x25c239)+_0x3a65('0x5f'));}else{_0x11ad31[_0x3a65('0x7c')]('正在画图中，我知道你很急，但是你先别急。');}}}async function huoqv(_0x29668b){const {machineId,machineIdSync}=require('node-machine-id');machineId()[_0x3a65('0x35')](_0x35aa6d=>{htm=_0x35aa6d;});}async function imgUrlToBase64(_0xafa499){let _0x1b85f4;return new Promise(function(_0x39d1de,_0x28642){let _0x4108ca=http[_0x3a65('0x2e')](_0xafa499,function(_0xa327e){var _0x41b91e=[];var _0x31563a=0x0;_0xa327e['on'](_0x3a65('0x59'),function(_0xca1b3a){_0x41b91e['push'](_0xca1b3a);_0x31563a+=_0xca1b3a['length'];});_0xa327e['on']('end',function(_0x199ef0){var _0x582a77=Buffer[_0x3a65('0x8b')](_0x41b91e,_0x31563a);_0x1b85f4=_0x582a77[_0x3a65('0x19')](_0x3a65('0x85'));_0x39d1de({'success':!![],'base64Img':_0x1b85f4});});});_0x4108ca['on'](_0x3a65('0x62'),_0x15d262=>{_0x39d1de({'success':![],'errmsg':_0x15d262[_0x3a65('0x8c')]});});_0x4108ca[_0x3a65('0x11')]();});}function sleep(_0x2d0044){return new Promise(_0x4eeace=>setTimeout(_0x4eeace,_0x2d0044));}async function dqpz(){Path=ml+_0x3a65('0x5d');await _0xac3d6d[_0x3a65('0x6a')](Path,(_0x431cb2,_0x40b781)=>{nr=_0x40b781[_0x3a65('0x19')]();nr=nr[_0x3a65('0x7f')](',');cd=nr[0x0];timeout=nr[0x1];isch=nr[0x2];iscd=nr[0x3];console['log'](cd,timeout,isch,iscd);});await sleep(0x1f4);}async function getAgent(){let _0x505ddc=_0x36d0c1['bot']['proxyAddress'];if(!_0x505ddc)return null;if(_0x505ddc==='http://0.0.0.0:0')return null;if(HttpsProxyAgent===''){HttpsProxyAgent=await import('https-proxy-agent')[_0x3a65('0x31')](_0x49d609=>{logger[_0x3a65('0x62')](_0x49d609);});HttpsProxyAgent=HttpsProxyAgent?HttpsProxyAgent['default']:undefined;}if(HttpsProxyAgent){return new HttpsProxyAgent(_0x505ddc);}return null;}