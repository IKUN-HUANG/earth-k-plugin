const _0x49d826=_0xb6be;(function(_0x308570,_0x3d0f5c){const _0xb3fba5={_0x20593c:0x1f0,_0x46eefd:0x22a,_0x226f28:0x234,_0xc9f48b:0x1d5},_0x5cf1b4=_0xb6be,_0x46b083=_0x308570();while(!![]){try{const _0x144b6e=parseInt(_0x5cf1b4(_0xb3fba5._0x20593c))/0x1+parseInt(_0x5cf1b4(_0xb3fba5._0x46eefd))/0x2+-parseInt(_0x5cf1b4(0x16f))/0x3*(parseInt(_0x5cf1b4(0x173))/0x4)+parseInt(_0x5cf1b4(0x203))/0x5*(-parseInt(_0x5cf1b4(0x20c))/0x6)+-parseInt(_0x5cf1b4(0x1e7))/0x7+parseInt(_0x5cf1b4(_0xb3fba5._0x226f28))/0x8+parseInt(_0x5cf1b4(_0xb3fba5._0xc9f48b))/0x9;if(_0x144b6e===_0x3d0f5c)break;else _0x46b083['push'](_0x46b083['shift']());}catch(_0x15a7fd){_0x46b083['push'](_0x46b083['shift']());}}}(_0x32ef,0x4b447));import{segment}from'oicq';import _0x51789b from'node-fetch';import _0x257312,{chownSync}from'fs';import _0x29d775 from'../../../lib/config/config.js';function _0x32ef(){const _0x5d4d42=['kqdl','#土块画图撤回关闭','k_euler_ancestral','floor','642418XcwJhE','好的，权限已经关闭，只有你能画了','魔法是：','shuju','#删除屏蔽词','#土块画图涩涩开启','\x20\x20\x20\x20\x20\x20\x20\x20|seed:','很抱歉，你的密钥错误，不能生草','#查看屏蔽词','当前屏蔽词有：','2108608mgXlwp','已取消当前画图','&model=','#开启参数显示','没有访问成功','写入文件错误','toString','replace','proxyAddress','text','reply','模型已设置为k_euler','url','ddim','code','当前降噪','^#取消画图$|^#所有人可画$|^#仅我可画$|^#土块画图撤回(.*)$|^#土块画图冷却(.*)$|^#土块画图涩涩开启|^#土块画图涩涩关闭','开启代理成功','模型不在合理范围内，1-5为合理范围','./3.jpg','已关闭词条回复','505803XOyCYL','是英文','#新增屏蔽词','getTime','8IEmjjL','utf-8','fanyi','nai-diffusion','szmx','已关闭参数显示','^#土块画图模型(.*)|^#查看所有模型','isMaster','\x20http://www.iinside.cn:7001/api_req?reqmode=nmt_mt5_jez&password=3652&text=','对不起，你不可画哦','base64Img','好的，已开启，请注意身体哦','#开启默认屏蔽词','#开启词条回复','utf8','&tk=','正在查看魔法，请稍后啊，0v0','已激活该密钥','ysgn','default','plms','./config/config/other.yaml','http://119.29.118.238/dq.php?gjc=','正在生草中，我知道你很急，先别急','huatu2','masterQQ','readFileSync','#新增预设','message_id','isPrivate','data','\x20\x0a步数:','我在cd中，还有','数字超过了预设个数','post','Seed','写入文件成功','\x0a规模：','30秒还未发图，以图生草已取消','includes','#以图生草降噪','你好号主','已开启画图冷却，冷却时间为30秒','^#填写密钥(.*)','#土块画图冷却','#关闭代理','concat','已激活密钥，号主为','k_lms','test','Euler\x20a','新增屏蔽词成功','szgm','https-proxy-agent','以图生草','http','已开启参数显示','parse','get','你是主人，没有cd，欸嘿','#关闭参数显示','#仅我可画','我没画成功，再来一次吧。','gjc','/plugins/earth-k-plugin/resources/htys/ys.json','#土块画图预设','\x20\x20\x20|规模:','#土块画图涩涩关闭','msg','/3.jpg','&width=','findIndex','包含中文','#土块画图撤回开启','你不是主人，不能用预设哦','#删除预设','message','push','stringify','已关闭代理','秒可画','15秒还未发图，查看魔法已取消','qvht','\x0a降噪：','请发送要查看魔法的图片,0.0','&order=zh2en','预设包含中文','#查看画图设置','round','writeFile','已开启画图撤回，撤回时间为30秒','请发送图片','{\x22error\x22:\x22unknown\x20error\x22}','length','访问失败了,QAQ,TvT','#土块画图冷却关闭','abc','json','7216542vOIuMb','#查看魔法','#开启代理','密钥不存在','pbc','&scale=','#查看所有模型','./resources/ht.png','^#以图生草(.*)$|(.*)','writeFileSync','#关闭词条回复','http://119.29.118.238/qx.php?tk=','split','删除预设成功','/plugins/earth-k-plugin/resources/pz/pz.txt','base64','没有这个预设哦','isGroup','3592743zEBxQP','步数不在合理范围内，28以下为合理范围','Mozilla/5.0\x20(Windows\x20NT\x206.1;\x20WOW64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/86.0.4240.198\x20Safari/537.36','&qq=','Steps','k_euler','None','https://api.66mz8.com/api/translation.php?info=','1：k_euler_ancestral,\x0a2：k_euler,\x0a3：k_lms,\x0a4：plms,\x0a5：ddim','205904AWtmED','不能访问','cwd','当前相似度','image','请添加预设关键词','https://api.sdgou.cc/api/fanyi/?msg=','文件写入成功！','https://api.novelai.net/ai/generate-image\x20','^#新增屏蔽词(.*)$|#查看屏蔽词$|#删除屏蔽词$|#开启默认屏蔽词$','lowres,nude,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry,\x20owres,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry','./resources/th2.txt','已经开启默认屏蔽词','random','https://xiaobapi.top/api/xb/api/upload_image_tags.php?url=','#以图生草相似度','name','tianxie','readFile','5BQJqJs','^#绘个图(.*)$|#土块画图预设(.*)$','log','成功了！','#取消画图','#土块画图撤回','event:\x20newImage','application/json','我知道你要干嘛！注意身体！','2602686lzOJGz','img','好的，我开始画图了，请稍等哦','#查看预设词条','[\x5cu4E00-\x5cu9FFF]+','tags','正在画图中，我知道你很急，但是你先别急。','#查看预设','密钥错误，或者遇上问题了','土块AI画图','error','访问成功了','user_id','http://119.29.118.238/ytsc.php','\x0a步数：','#以图生草','trim','密钥不存在！不能乱输入哦','可以访问','Bearer\x20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImlRWFFJd1N1TVhsNGp6ZHVQN0J4OCIsIm5jIjoiSm1Ba0wtcWFidkF0YzRpTXZRQUROIiwiaWF0IjoxNjY4MzkxODQ0LCJleHAiOjE2NzA5ODM4NDR9.hlnDHc0oN6kUXcPX37RSydvuduQME7rifex2nuzbqbM','模型:','你好号主，成功再次激活','^#开启代理|^#关闭代理|^#开启参数显示|^#关闭参数显示|^#开启词条回复|^#关闭词条回复','已开启词条回复','recallMsg','szbs'];_0x32ef=function(){return _0x5d4d42;};return _0x32ef();}import _0x1432b1 from'../../../lib/puppeteer/puppeteer.js';function _0xb6be(_0x643e9,_0x401311){const _0x32ef54=_0x32ef();return _0xb6be=function(_0xb6be31,_0x434209){_0xb6be31=_0xb6be31-0x161;let _0x3f1ffe=_0x32ef54[_0xb6be31];return _0x3f1ffe;},_0xb6be(_0x643e9,_0x401311);}let data1={};import{createRequire}from'module';import _0x7e2fec from'yaml';const require=createRequire(import.meta[_0x49d826(0x166)]);let ysct,mf,mfkg=0x0,ml=process[_0x49d826(0x1f2)]();var http=require(_0x49d826(0x1aa));import _0x2a655e from'lodash';let yushekg=0x0,kg=0x0,guimo=5.5,kg2=0x0,mfid='',res4,htm='',htm2='',res5,res,zr=0x0,changdu=0x200,kuandu=0x200,msg2,timeout=0x7530,isch=0x1,cd=0x0,t,startTimeMS,iscd=0x0,my,dz,sj1,sj2,shuju,zt=0x0,gjc2,sc=0x0,bushu=0x1c,id='',xsd=0.4,nr,ycqx,jz=0.2,ss=_0x49d826(0x176),Path,ys=[],moxing=_0x49d826(0x1ec),isdl=0x0,iscanshu=0x1,ishuifu=!![],HttpsProxyAgent='',pc=_0x49d826(0x1fa);export class aiht extends plugin{constructor(){const _0xf24ead={_0x4626f6:0x215,_0x199e93:0x204,_0x56dec0:0x16a,_0x421642:0x1a7,_0x331d6f:0x177,_0xd35232:0x19e,_0x9ff77e:0x201},_0xff4d1a=_0x49d826;super({'name':'土块AI画图','dsc':_0xff4d1a(_0xf24ead._0x4626f6),'event':'message','priority':0x479,'rule':[{'reg':_0xff4d1a(_0xf24ead._0x199e93),'fnc':_0xff4d1a(0x18b)},{'reg':_0xff4d1a(_0xf24ead._0x56dec0),'fnc':_0xff4d1a(0x1c5)},{'reg':_0xff4d1a(0x1f9),'fnc':'pbc'},{'reg':_0xff4d1a(0x1dd),'fnc':'huatu3','log':![]},{'reg':'^#查看所有预设$|#新增预设(.*)|(.*)','fnc':'ysgn','log':![]},{'reg':'^#土块画图规模(.*)','fnc':_0xff4d1a(_0xf24ead._0x421642)},{'reg':_0xff4d1a(0x179),'fnc':_0xff4d1a(_0xf24ead._0x331d6f)},{'reg':'^#土块画图步数(.*)|^#查看画图设置','fnc':_0xff4d1a(0x225)},{'reg':_0xff4d1a(0x222),'fnc':_0xff4d1a(0x226)},{'reg':_0xff4d1a(_0xf24ead._0xd35232),'fnc':_0xff4d1a(_0xf24ead._0x9ff77e)}]});}async['tianxie'](_0x1ea0cb){const _0x35b209={_0x5058ff:0x17a,_0xae680b:0x18d,_0x22ceec:0x205,_0x437d05:0x21c,_0x57655a:0x1ea,_0x1192ce:0x218,_0x516239:0x19a,_0x3cf736:0x164,_0x4618b1:0x221,_0x2de932:0x1cc,_0xd359f8:0x1fb,_0x457757:0x23a,_0x574943:0x19a,_0x20a334:0x184,_0x3ce0b7:0x1fb,_0x2b1c2a:0x174},_0x19ae47=_0x49d826;if(_0x1ea0cb[_0x19ae47(_0x35b209._0x5058ff)]){let _0x56518d=_0x7e2fec[_0x19ae47(0x1ac)](_0x257312[_0x19ae47(_0x35b209._0xae680b)]('./config/config/other.yaml',_0x19ae47(0x181)));_0x56518d=_0x56518d[_0x19ae47(0x18c)][0x0],console[_0x19ae47(_0x35b209._0x22ceec)](_0x56518d);let _0x39dc95=_0x1ea0cb['msg'][_0x19ae47(0x161)](/#填写密钥/g,'')[_0x19ae47(_0x35b209._0x437d05)](),_0x49c0c5='http://119.29.118.238/diqiu.php?tk='+_0x39dc95+_0x19ae47(_0x35b209._0x57655a)+String(_0x1ea0cb[_0x19ae47(_0x35b209._0x1192ce)]),_0x417b4d=await _0x51789b(_0x49c0c5),_0x13b931=await _0x417b4d['text']();if(_0x13b931[_0x19ae47(_0x35b209._0x516239)](_0x19ae47(0x1d8))){_0x1ea0cb[_0x19ae47(_0x35b209._0x3cf736)](_0x19ae47(0x21d));return;}if(_0x13b931['includes'](_0x19ae47(0x19c))){_0x1ea0cb['reply'](_0x19ae47(_0x35b209._0x4618b1)),await _0x257312[_0x19ae47(_0x35b209._0x2de932)](_0x19ae47(_0x35b209._0xd359f8),_0x39dc95[_0x19ae47(_0x35b209._0x457757)](),_0x19ae47(0x174),_0x3dd1b5=>{const _0x423a2=_0x19ae47;_0x3dd1b5?console['log']('写入文件错误'):console['log'](_0x423a2(0x197));});return;}_0x13b931[_0x19ae47(_0x35b209._0x574943)](_0x19ae47(_0x35b209._0x20a334))&&(_0x1ea0cb[_0x19ae47(0x164)](_0x19ae47(0x1a2)+String(_0x1ea0cb['user_id'])),await _0x257312[_0x19ae47(0x1cc)](_0x19ae47(_0x35b209._0x3ce0b7),_0x39dc95[_0x19ae47(0x23a)](),_0x19ae47(_0x35b209._0x2b1c2a),_0x5c8490=>{const _0x54605d=_0x19ae47;_0x5c8490?console[_0x54605d(0x205)]('写入文件错误'):console[_0x54605d(0x205)](_0x54605d(0x197));})),_0x13b931[_0x19ae47(_0x35b209._0x516239)]('该密钥已被激活')&&_0x1ea0cb[_0x19ae47(0x164)]('这个密钥已经被激活了，你想干嘛！');}}async[_0x49d826(0x226)](_0x17010f){const _0x174b30={_0x11fa31:0x1b7,_0x18972d:0x17a,_0x48fdae:0x1a0,_0x17e998:0x164,_0x24c8c8:0x1c2,_0x17deb8:0x237,_0x895508:0x1ab,_0x16b94e:0x164,_0x58b92a:0x16e},_0x1f9bd0=_0x49d826;_0x17010f[_0x1f9bd0(_0x174b30._0x11fa31)]==_0x1f9bd0(0x1d7)&_0x17010f[_0x1f9bd0(_0x174b30._0x18972d)]&&(isdl=0x1,_0x17010f[_0x1f9bd0(0x164)](_0x1f9bd0(0x16b))),_0x17010f[_0x1f9bd0(0x1b7)]==_0x1f9bd0(_0x174b30._0x48fdae)&_0x17010f[_0x1f9bd0(0x17a)]&&(isdl=0x0,_0x17010f[_0x1f9bd0(_0x174b30._0x17e998)](_0x1f9bd0(_0x174b30._0x24c8c8))),_0x17010f[_0x1f9bd0(_0x174b30._0x11fa31)]==_0x1f9bd0(_0x174b30._0x17deb8)&_0x17010f['isMaster']&&(iscanshu=0x1,_0x17010f['reply'](_0x1f9bd0(_0x174b30._0x895508))),_0x17010f[_0x1f9bd0(0x1b7)]==_0x1f9bd0(0x1af)&_0x17010f[_0x1f9bd0(0x17a)]&&(iscanshu=0x0,_0x17010f[_0x1f9bd0(_0x174b30._0x17e998)](_0x1f9bd0(0x178))),_0x17010f[_0x1f9bd0(_0x174b30._0x11fa31)]==_0x1f9bd0(0x180)&_0x17010f['isMaster']&&(ishuifu=!![],_0x17010f[_0x1f9bd0(_0x174b30._0x16b94e)](_0x1f9bd0(0x223))),_0x17010f[_0x1f9bd0(_0x174b30._0x11fa31)]==_0x1f9bd0(0x1df)&_0x17010f[_0x1f9bd0(_0x174b30._0x18972d)]&&(ishuifu=![],_0x17010f[_0x1f9bd0(0x164)](_0x1f9bd0(_0x174b30._0x58b92a)));}async[_0x49d826(0x225)](_0x1fba94){const _0x4ebacb={_0x472b7c:0x1b7,_0x448766:0x1ca,_0x3ed69f:0x205,_0x593448:0x21a,_0xb6e7f6:0x1c6,_0x39a4aa:0x164},_0x5ce608=_0x49d826;if(_0x1fba94[_0x5ce608(_0x4ebacb._0x472b7c)]==_0x5ce608(_0x4ebacb._0x448766)){console[_0x5ce608(_0x4ebacb._0x3ed69f)](guimo);let _0x53a4c3=['模型：',moxing,_0x5ce608(0x198),guimo['toString'](),_0x5ce608(_0x4ebacb._0x593448),bushu[_0x5ce608(0x23a)](),'\x0a相似度：',xsd[_0x5ce608(0x23a)](),_0x5ce608(_0x4ebacb._0xb6e7f6),jz[_0x5ce608(0x23a)]()];_0x1fba94['reply'](_0x53a4c3);return;}bushu=_0x1fba94['msg'][_0x5ce608(0x161)](/#土块画图步数/g,'')[_0x5ce608(0x21c)](),bushu=Number(bushu);if(bushu<0x0|bushu>0x1c){bushu=0x1c,_0x1fba94[_0x5ce608(0x164)](_0x5ce608(0x1e8));return;}else _0x1fba94[_0x5ce608(_0x4ebacb._0x39a4aa)]('步数已设置为'+String(bushu));}async[_0x49d826(0x177)](_0x34937d){const _0x195e69={_0x62030a:0x1db,_0x37330f:0x1b7,_0x5b7a2f:0x161,_0x21972a:0x164,_0x346a7c:0x165,_0x50aa36:0x187,_0x3932c1:0x167},_0x25eea1=_0x49d826;if(_0x34937d['msg']==_0x25eea1(_0x195e69._0x62030a)){let _0x437d8e=[_0x25eea1(0x1ef)];_0x34937d[_0x25eea1(0x164)](_0x437d8e);return;}moxing=_0x34937d[_0x25eea1(_0x195e69._0x37330f)][_0x25eea1(_0x195e69._0x5b7a2f)](/#土块画图模型/g,'')['trim'](),moxing=Number(moxing);if(moxing<0x0|moxing>0x5){_0x34937d[_0x25eea1(0x164)](_0x25eea1(0x16c)),moxing=0x2;return;}moxing==0x1&&(moxing=_0x25eea1(0x228),_0x34937d['reply']('模型已设置为k_euler_ancestral')),moxing==0x2&&(moxing=_0x25eea1(0x1ec),_0x34937d[_0x25eea1(_0x195e69._0x21972a)](_0x25eea1(_0x195e69._0x346a7c))),moxing==0x3&&(moxing=_0x25eea1(0x1a3),_0x34937d[_0x25eea1(0x164)]('模型已设置为k_lms')),moxing==0x4&&(moxing=_0x25eea1(_0x195e69._0x50aa36),_0x34937d['reply']('模型已设置为plms')),moxing==0x5&&(moxing=_0x25eea1(_0x195e69._0x3932c1),_0x34937d['reply']('模型已设置为ddim'));}async[_0x49d826(0x1a7)](_0x187f78){const _0xad6f44={_0x2bef7c:0x1b7,_0x394182:0x161,_0x344152:0x21c,_0x38601c:0x164},_0x3addcc=_0x49d826;guimo=_0x187f78[_0x3addcc(_0xad6f44._0x2bef7c)][_0x3addcc(_0xad6f44._0x394182)](/#土块画图规模/g,'')[_0x3addcc(_0xad6f44._0x344152)](),guimo=Number(guimo);if(guimo<0x3|guimo>0xc){_0x187f78[_0x3addcc(_0xad6f44._0x38601c)]('规模不在合理范围内，3-12为合理范围'),guimo=5.5;return;}else _0x187f78['reply']('规模已设置为'+String(guimo));}async[_0x49d826(0x185)](_0x1a9373){const _0x13f028={_0x488af5:0x1b7,_0x2ef7d6:0x19a,_0x3d2f26:0x1b7,_0x59945c:0x19a,_0x357985:0x1b7,_0x279782:0x1b3,_0x21a4f5:0x1b7,_0x2624ae:0x19a,_0x13095d:0x1b7,_0x6bbba7:0x161,_0x13df61:0x1d0,_0x1f5493:0x164,_0x19dabf:0x194,_0x27afe2:0x213,_0x4de1a0:0x17a,_0x4a32f9:0x1e1,_0x520a5c:0x1b7,_0x358dae:0x19a,_0x5e4d4c:0x1be,_0x5455d2:0x1b7,_0x5c1984:0x21c,_0x1edde8:0x22d,_0x237493:0x21c,_0x1c0969:0x164,_0x514338:0x1f5},_0x7a81c7={_0x32a1ba:0x205,_0x1fe8de:0x1f7},_0x314584={_0xf4d750:0x22d,_0x4e7730:0x200,_0x18aa9b:0x22d,_0x972684:0x1b2},_0x4fd89a=_0x49d826;if(_0x1a9373[_0x4fd89a(0x20d)]!=undefined)return![];if(yushekg==0x0&_0x1a9373[_0x4fd89a(_0x13f028._0x488af5)][_0x4fd89a(_0x13f028._0x2ef7d6)](_0x4fd89a(0x213))==![]&_0x1a9373[_0x4fd89a(_0x13f028._0x3d2f26)][_0x4fd89a(_0x13f028._0x2ef7d6)]('#新增预设')==![]&_0x1a9373[_0x4fd89a(0x1b7)][_0x4fd89a(_0x13f028._0x59945c)](_0x4fd89a(0x1be))==![]&_0x1a9373[_0x4fd89a(_0x13f028._0x357985)][_0x4fd89a(0x19a)](_0x4fd89a(0x20f))==![])return![];let _0x5ec9b2=ml+_0x4fd89a(_0x13f028._0x279782),_0x8be11c='';await _0x257312['readFile'](_0x5ec9b2,(_0x416a9c,_0x7a6e8a)=>{const _0x44e979=_0x4fd89a;if(_0x416a9c)throw _0x416a9c;var _0x243617=_0x7a6e8a[_0x44e979(0x23a)]()!=''?JSON[_0x44e979(0x1ac)](_0x7a6e8a[_0x44e979(0x23a)]()):[];ysct='',_0x8be11c='',shuju=_0x243617;for(let _0x4c035f=0x0;_0x4c035f<shuju[_0x44e979(_0x314584._0xf4d750)]['length'];_0x4c035f++){_0x8be11c=_0x8be11c+shuju['shuju'][_0x4c035f][_0x44e979(_0x314584._0x4e7730)]+',',ysct=ysct+shuju[_0x44e979(_0x314584._0x18aa9b)][_0x4c035f][_0x44e979(_0x314584._0x972684)]+'++';}}),await sleep(0x1f4);if(_0x1a9373[_0x4fd89a(_0x13f028._0x21a4f5)][_0x4fd89a(_0x13f028._0x2624ae)]('#查看预设词条')&_0x1a9373['isMaster']){let _0x17fa1c=_0x1a9373[_0x4fd89a(_0x13f028._0x13095d)][_0x4fd89a(_0x13f028._0x6bbba7)](/#查看预设词条/g,'')['trim']();_0x17fa1c=Number(_0x17fa1c),ysct=ysct[_0x4fd89a(0x1e1)]('++'),_0x8be11c=_0x8be11c[_0x4fd89a(0x1e1)](',');if(_0x17fa1c>ysct[_0x4fd89a(_0x13f028._0x13df61)]|_0x17fa1c<0x0){_0x1a9373[_0x4fd89a(_0x13f028._0x1f5493)](_0x4fd89a(_0x13f028._0x19dabf));return;}_0x1a9373[_0x4fd89a(0x164)]([_0x8be11c[_0x17fa1c-0x1],':',ysct[_0x17fa1c-0x1]]),ysct='',_0x8be11c='';}if(_0x1a9373[_0x4fd89a(0x1b7)]==_0x4fd89a(_0x13f028._0x27afe2)&_0x1a9373[_0x4fd89a(_0x13f028._0x4de1a0)]){_0x8be11c=_0x8be11c[_0x4fd89a(_0x13f028._0x4a32f9)](','),data1={'tplFile':'./plugins/earth-k-plugin/resources/aiht/ml.html','dz':ml,'lb':_0x8be11c,'qsid':0x0};let _0x303a9f=await _0x1432b1['screenshot']('123',{...data1});_0x1a9373[_0x4fd89a(0x164)](_0x303a9f);return;_0x1a9373['reply']('当前预设有：\x0a'+_0x8be11c);}if(_0x1a9373[_0x4fd89a(_0x13f028._0x520a5c)][_0x4fd89a(_0x13f028._0x358dae)](_0x4fd89a(_0x13f028._0x5e4d4c))&_0x1a9373[_0x4fd89a(_0x13f028._0x4de1a0)]){let _0x40d0ea=_0x1a9373[_0x4fd89a(_0x13f028._0x5455d2)]['replace'](/#删除预设/g,'')[_0x4fd89a(_0x13f028._0x5c1984)]();_0x40d0ea=Number(_0x40d0ea);if(_0x40d0ea<shuju[_0x4fd89a(_0x13f028._0x1edde8)][_0x4fd89a(0x1d0)]+0x1){shuju[_0x4fd89a(0x22d)]['splice'](_0x40d0ea-0x1,0x1);var _0x5e71e8=JSON['stringify'](shuju);}_0x257312[_0x4fd89a(0x1cc)](_0x5ec9b2,_0x5e71e8,function(_0x3eb5c4){const _0x4dbd51=_0x4fd89a;_0x3eb5c4&&console['error'](_0x3eb5c4),_0x1a9373[_0x4dbd51(0x164)](_0x4dbd51(0x1e2));});}if(_0x1a9373[_0x4fd89a(_0x13f028._0x3d2f26)][_0x4fd89a(_0x13f028._0x358dae)](_0x4fd89a(0x18e))&_0x1a9373['isMaster']&yushekg==0x0){yushekg=0x1,ys[0x0]=_0x1a9373[_0x4fd89a(0x1b7)][_0x4fd89a(0x161)](/#新增预设/g,'')[_0x4fd89a(_0x13f028._0x237493)](),_0x1a9373[_0x4fd89a(_0x13f028._0x1c0969)](_0x4fd89a(_0x13f028._0x514338));return;}if(yushekg==0x1&_0x1a9373['isMaster']){yushekg=0x0,ys[0x1]=_0x1a9373[_0x4fd89a(0x1b7)];let _0x46bb5={'name':ys[0x0],'gjc':ys[0x1]};shuju[_0x4fd89a(0x22d)][_0x4fd89a(0x1c0)](_0x46bb5),console['log'](shuju);var _0x5e71e8=JSON[_0x4fd89a(0x1c1)](shuju);_0x257312['writeFile'](_0x5ec9b2,_0x5e71e8,_0x1cd752=>{const _0x7c06b5=_0x4fd89a;if(_0x1cd752)throw _0x1cd752;console[_0x7c06b5(_0x7a81c7._0x32a1ba)](_0x7c06b5(_0x7a81c7._0x1fe8de)),_0x1a9373[_0x7c06b5(0x164)]('新增预设成功');});return;}}async[_0x49d826(0x1d9)](_0x3c1433){const _0x13c6c3={_0x1770ed:0x1b7,_0x2a0155:0x17a,_0x24a93e:0x164,_0x2ef6bf:0x1a6,_0x2f69ef:0x161,_0x40d366:0x21c,_0xd84853:0x232,_0x6cb1bc:0x233,_0x409486:0x22e,_0x9d7ad4:0x1b7,_0x479e73:0x17f,_0x567b5b:0x1fc},_0x4a871c=_0x49d826;_0x3c1433[_0x4a871c(_0x13c6c3._0x1770ed)]['includes'](_0x4a871c(0x171))&_0x3c1433[_0x4a871c(_0x13c6c3._0x2a0155)]&&(_0x3c1433[_0x4a871c(_0x13c6c3._0x24a93e)](_0x4a871c(_0x13c6c3._0x2ef6bf)),pc=_0x3c1433[_0x4a871c(0x1b7)][_0x4a871c(_0x13c6c3._0x2f69ef)](/#新增屏蔽词/g,'')[_0x4a871c(_0x13c6c3._0x40d366)]()),_0x3c1433[_0x4a871c(_0x13c6c3._0x1770ed)]==_0x4a871c(_0x13c6c3._0xd84853)&_0x3c1433['isMaster']&&_0x3c1433[_0x4a871c(_0x13c6c3._0x24a93e)]([_0x4a871c(_0x13c6c3._0x6cb1bc),pc]),_0x3c1433[_0x4a871c(_0x13c6c3._0x1770ed)][_0x4a871c(0x19a)](_0x4a871c(_0x13c6c3._0x409486))&_0x3c1433[_0x4a871c(0x17a)]&&(_0x3c1433[_0x4a871c(0x164)]('删除屏蔽词成功'+_0x4a871c(0x20b)),pc=''),_0x3c1433[_0x4a871c(_0x13c6c3._0x9d7ad4)][_0x4a871c(0x19a)](_0x4a871c(_0x13c6c3._0x479e73))&_0x3c1433['isMaster']&&(_0x3c1433[_0x4a871c(0x164)](_0x4a871c(_0x13c6c3._0x567b5b)),pc=_0x4a871c(0x1fa));}async['qvht'](_0x348e62){const _0x4ed89c={_0xf616eb:0x22f,_0x4901a8:0x17a,_0x34401b:0x164,_0x40c724:0x1b7,_0x49429c:0x1b7,_0x5e6aa5:0x1d2,_0x30f5dc:0x1de,_0x262b58:0x23a,_0x217e1e:0x1b7,_0x589182:0x19a,_0x4df509:0x174,_0x2083eb:0x19a,_0x1c0da1:0x19f,_0x34c703:0x161,_0xd4ede3:0x174,_0xb0c513:0x227,_0x44cc57:0x17a,_0x4595be:0x17a,_0x3172fb:0x19a,_0x36c901:0x208,_0x2147f1:0x1b7,_0x1bcb07:0x1de,_0x40befa:0x23a,_0x2c1017:0x205,_0x318813:0x164,_0x3744d5:0x235,_0x279d01:0x1b7,_0xee7c0a:0x1b0},_0x1cd1ec=_0x49d826;_0x348e62[_0x1cd1ec(0x1b7)]==_0x1cd1ec(_0x4ed89c._0xf616eb)&_0x348e62[_0x1cd1ec(_0x4ed89c._0x4901a8)]&&(_0x348e62[_0x1cd1ec(_0x4ed89c._0x34401b)](_0x1cd1ec(0x17e)),ss=_0x1cd1ec(0x176));_0x348e62[_0x1cd1ec(_0x4ed89c._0x40c724)]==_0x1cd1ec(0x1b6)&_0x348e62[_0x1cd1ec(0x17a)]&&(_0x348e62[_0x1cd1ec(0x164)]('好的，已关闭了'),ss='safe-diffusion');await dqpz();if(_0x348e62[_0x1cd1ec(_0x4ed89c._0x49429c)][_0x1cd1ec(0x19a)](_0x1cd1ec(_0x4ed89c._0x5e6aa5))&_0x348e62['isMaster']){nr[0x3]=0x0,nr[0x0]=0x0,_0x257312[_0x1cd1ec(_0x4ed89c._0x30f5dc)](Path,nr[_0x1cd1ec(_0x4ed89c._0x262b58)](),_0x1cd1ec(0x174)),cd=0x0,kg2=0x0,kg=0x0,sc=0x0,iscd=0x0,_0x348e62[_0x1cd1ec(0x164)]('已关闭画图冷却');return;}if(_0x348e62[_0x1cd1ec(_0x4ed89c._0x217e1e)][_0x1cd1ec(_0x4ed89c._0x589182)]('#土块画图冷却开启')&_0x348e62['isMaster']){nr[0x0]=0x7530,nr[0x3]=0x1,_0x257312['writeFileSync'](Path,nr[_0x1cd1ec(_0x4ed89c._0x262b58)](),_0x1cd1ec(_0x4ed89c._0x4df509)),cd=0x7530,_0x348e62['reply'](_0x1cd1ec(0x19d));return;}if(_0x348e62[_0x1cd1ec(0x1b7)][_0x1cd1ec(_0x4ed89c._0x2083eb)](_0x1cd1ec(_0x4ed89c._0x1c0da1))&_0x348e62[_0x1cd1ec(0x17a)]){let _0xa668fb=_0x348e62[_0x1cd1ec(0x1b7)][_0x1cd1ec(_0x4ed89c._0x34c703)](/#土块画图冷却/g,'')['trim']();cd=Number(_0xa668fb)*0x3e8,nr[0x0]=cd,nr[0x3]=0x1,_0x257312[_0x1cd1ec(_0x4ed89c._0x30f5dc)](Path,nr[_0x1cd1ec(_0x4ed89c._0x262b58)](),_0x1cd1ec(_0x4ed89c._0xd4ede3)),_0x348e62[_0x1cd1ec(0x164)]('已设置冷却时间为'+_0xa668fb+'秒');}if(_0x348e62[_0x1cd1ec(0x1b7)][_0x1cd1ec(_0x4ed89c._0x589182)](_0x1cd1ec(_0x4ed89c._0xb0c513))&_0x348e62[_0x1cd1ec(_0x4ed89c._0x44cc57)]){nr[0x2]=0x0,_0x257312['writeFileSync'](Path,nr['toString'](),_0x1cd1ec(0x174)),isch=0x0,_0x348e62['reply']('已关闭画图撤回');return;}if(_0x348e62[_0x1cd1ec(_0x4ed89c._0x49429c)][_0x1cd1ec(0x19a)](_0x1cd1ec(0x1bc))&_0x348e62[_0x1cd1ec(_0x4ed89c._0x4595be)]){isch=0x1,nr[0x1]=0x7530,nr[0x2]=0x1,_0x257312[_0x1cd1ec(_0x4ed89c._0x30f5dc)](Path,nr[_0x1cd1ec(_0x4ed89c._0x262b58)](),_0x1cd1ec(_0x4ed89c._0xd4ede3)),timeout=0x7530,_0x348e62['reply'](_0x1cd1ec(0x1cd));return;}if(_0x348e62['msg'][_0x1cd1ec(_0x4ed89c._0x3172fb)](_0x1cd1ec(_0x4ed89c._0x36c901))&_0x348e62[_0x1cd1ec(0x17a)]){isch=0x1;let _0x4caa74=_0x348e62[_0x1cd1ec(_0x4ed89c._0x2147f1)][_0x1cd1ec(0x161)](/#土块画图撤回/g,'')[_0x1cd1ec(0x21c)]();timeout=Number(_0x4caa74)*0x3e8,nr[0x1]=timeout,nr[0x2]=0x1,_0x257312[_0x1cd1ec(_0x4ed89c._0x1bcb07)](Path,nr[_0x1cd1ec(_0x4ed89c._0x40befa)](),_0x1cd1ec(0x174)),_0x348e62[_0x1cd1ec(_0x4ed89c._0x34401b)]('已设置撤回时间为'+_0x4caa74+'秒');}_0x348e62['msg']==_0x1cd1ec(0x207)&&(kg=0x0,sc=0x0,zt=0x0,id='',console[_0x1cd1ec(_0x4ed89c._0x2c1017)]('已经取消'),kg2=0x0,_0x348e62[_0x1cd1ec(_0x4ed89c._0x318813)](_0x1cd1ec(_0x4ed89c._0x3744d5))),_0x348e62['msg']=='#所有人可画'&_0x348e62[_0x1cd1ec(0x17a)]&&(_0x348e62[_0x1cd1ec(0x164)]('好吧，那就一起来吧！'),zr=0x0),_0x348e62[_0x1cd1ec(_0x4ed89c._0x279d01)]==_0x1cd1ec(_0x4ed89c._0xee7c0a)&_0x348e62['isMaster']&&(_0x348e62['reply'](_0x1cd1ec(0x22b)),zr=0x1);}async['huatu3'](_0x26dcca){const _0x169b3a={_0x209824:0x1b7,_0x2f1da6:0x19a,_0x3f4616:0x1d6,_0x2b2f44:0x218,_0x1abdfc:0x1fe,_0x34b65d:0x20d,_0xeca73e:0x22c,_0x492e2f:0x205,_0x15d5a2:0x164,_0x597c9d:0x211,_0x232a35:0x168,_0xe677de:0x1b7,_0x32bdc9:0x1ff,_0x27bd52:0x17a,_0x51119d:0x1b7,_0xa84a95:0x21c,_0x40dd83:0x161,_0x2e29e0:0x169,_0x17f19d:0x205,_0x35d75b:0x164,_0x593800:0x23a,_0x36959f:0x188,_0x48c9ba:0x181,_0xa05851:0x1e0,_0x3e1797:0x238,_0x25d354:0x164,_0x5a1023:0x231,_0x4a72f3:0x218,_0x22b156:0x161,_0x3ec81d:0x1a4,_0x1706a5:0x205,_0x3eb03c:0x163,_0xfc4fb0:0x21c,_0x29b221:0x161,_0x56a45d:0x170,_0x3252d6:0x20d,_0x191111:0x218,_0x3d3af5:0x161,_0x56d18c:0x1aa,_0x2eaa23:0x1fd,_0x21ffd3:0x219,_0x2005b8:0x1e9,_0x223df2:0x205,_0x20f147:0x205,_0x4d0443:0x163,_0x4e33c9:0x21c,_0x3dd24b:0x161,_0x4e1e64:0x1b1,_0x171bdf:0x1cc,_0x48d947:0x16d,_0x10115a:0x172,_0x43c2a7:0x20d,_0x4329a8:0x1cb,_0x18db89:0x193,_0x142417:0x18a},_0xa1c67e={_0x5ea7c5:0x18f},_0x18381d={_0x27191b:0x205,_0x5a930b:0x197},_0x64091={_0x4a51c5:0x199},_0x1ab483={_0x5adba1:0x164},_0x50908a=_0x49d826;if(_0x26dcca['img']!=undefined&zt==0x0&mfkg==0x0)return![];if(_0x26dcca[_0x50908a(0x20d)]==undefined&_0x26dcca[_0x50908a(_0x169b3a._0x209824)]!=undefined){if(_0x26dcca[_0x50908a(0x1b7)]['includes'](_0x50908a(0x21b))==![]&_0x26dcca[_0x50908a(0x20d)]==undefined&zt==0x0&_0x26dcca[_0x50908a(0x1b7)][_0x50908a(_0x169b3a._0x2f1da6)](_0x50908a(0x1d6))==![]&mfkg==0x0)return![];}mfkg==0x0&_0x26dcca[_0x50908a(_0x169b3a._0x209824)]==_0x50908a(_0x169b3a._0x3f4616)&&(mfkg=0x1,mfid=_0x26dcca[_0x50908a(_0x169b3a._0x2b2f44)],_0x26dcca[_0x50908a(0x164)](_0x50908a(0x1c7)),mf=setTimeout(()=>{const _0x16b928=_0x50908a;if(mfkg==0x1){mfkg=0x0,_0x26dcca[_0x16b928(_0x1ab483._0x5adba1)](_0x16b928(0x1c4));return;}},0x3a98));if(_0x26dcca['img']!=undefined&mfkg==0x1&mfid==_0x26dcca['user_id']){clearTimeout(mf),_0x26dcca[_0x50908a(0x164)](_0x50908a(0x183)),mfkg=0x0,mfid='';let _0xcc2d57=_0x50908a(_0x169b3a._0x1abdfc);console[_0x50908a(0x205)](_0x26dcca['img']),_0xcc2d57=_0xcc2d57+_0x26dcca[_0x50908a(_0x169b3a._0x34b65d)][0x0],res=await _0x51789b(_0xcc2d57,{'method':_0x50908a(0x1ad),'headers':{'Content-Type':_0x50908a(0x20a),'User-Agent':'Mozilla/5.0\x20(Windows\x20NT\x206.1;\x20WOW64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/86.0.4240.198\x20Safari/537.36'}});let _0x27c217=await res[_0x50908a(0x1d4)]();console['log'](_0x50908a(_0x169b3a._0xeca73e)+_0x27c217),console[_0x50908a(_0x169b3a._0x492e2f)](_0x27c217);if(_0x27c217!=undefined)_0x26dcca[_0x50908a(_0x169b3a._0x15d5a2)](_0x27c217[_0x50908a(_0x169b3a._0x597c9d)],!![]),_0x27c217[_0x50908a(_0x169b3a._0x232a35)]==-0x1&&(_0x26dcca[_0x50908a(0x164)](_0x50908a(0x1d1)),mfkg=0x0,mfid='');else{}}if(_0x26dcca[_0x50908a(0x20d)]==undefined&zt==0x1)return![];if(_0x26dcca['img']==undefined&_0x26dcca['msg']!=undefined){dqpz();if(_0x26dcca[_0x50908a(_0x169b3a._0xe677de)][_0x50908a(_0x169b3a._0x2f1da6)](_0x50908a(_0x169b3a._0x32bdc9))&_0x26dcca[_0x50908a(_0x169b3a._0x27bd52)]){xsd=Number(_0x26dcca[_0x50908a(_0x169b3a._0x51119d)][_0x50908a(0x161)](/#以图生草相似度/g,'')[_0x50908a(_0x169b3a._0xa84a95)]())/0x64,_0x26dcca['reply'](_0x50908a(0x1f3)+String(xsd)),console['log'](xsd);return;}if(_0x26dcca[_0x50908a(_0x169b3a._0x209824)]['includes'](_0x50908a(0x19b))&_0x26dcca[_0x50908a(_0x169b3a._0x27bd52)]){jz=Number(_0x26dcca[_0x50908a(_0x169b3a._0x51119d)][_0x50908a(_0x169b3a._0x40dd83)](/#以图生草降噪/g,'')[_0x50908a(0x21c)]())/0x64,_0x26dcca['reply'](_0x50908a(_0x169b3a._0x2e29e0)+String(jz)),console[_0x50908a(_0x169b3a._0x17f19d)](jz);return;}if(zt==0x0&&sc==0x0&&_0x26dcca[_0x50908a(0x1b7)][_0x50908a(0x19a)](_0x50908a(0x21b))){if(_0x26dcca[_0x50908a(0x190)]){_0x26dcca[_0x50908a(0x164)]('以图生草暂不支持私聊');return;}dqpz();let _0x44680b='';try{_0x44680b=_0x257312[_0x50908a(0x18d)](_0x50908a(0x1fb));}catch{_0x26dcca[_0x50908a(_0x169b3a._0x35d75b)]('你还没有填写密钥哦。');return;}_0x44680b=_0x44680b[_0x50908a(_0x169b3a._0x593800)]();let _0x239d39=_0x7e2fec[_0x50908a(0x1ac)](_0x257312[_0x50908a(0x18d)](_0x50908a(_0x169b3a._0x36959f),_0x50908a(_0x169b3a._0x48c9ba)));_0x239d39=_0x239d39['masterQQ'][0x0];try{let _0x48efcd=_0x50908a(_0x169b3a._0xa05851)+_0x44680b+_0x50908a(0x1ea)+String(_0x239d39);res=await _0x51789b(_0x48efcd),console['log']('访问成功了');}catch(_0x4927a1){console['log'](_0x4927a1),console[_0x50908a(0x205)](_0x50908a(_0x169b3a._0x3e1797));}res=await res['text']();if(res[_0x50908a(0x19a)](_0x50908a(0x21e))==![]){_0x26dcca[_0x50908a(_0x169b3a._0x25d354)](_0x50908a(_0x169b3a._0x5a1023)),console[_0x50908a(0x205)](res);return;}console[_0x50908a(_0x169b3a._0x17f19d)](_0x50908a(0x1a9)),id=_0x26dcca[_0x50908a(_0x169b3a._0x4a72f3)],gjc2=_0x26dcca[_0x50908a(0x1b7)][_0x50908a(_0x169b3a._0x22b156)](/#以图生草/g,'')['trim']();var _0x59e98d=new RegExp(_0x50908a(0x210),'g');if(_0x59e98d[_0x50908a(_0x169b3a._0x3ec81d)](gjc2)){console[_0x50908a(_0x169b3a._0x1706a5)]('包含中文');let _0x336ce6=_0x50908a(0x1f6)+gjc2,_0x1505d5=await _0x51789b(_0x336ce6),_0x2ad98f=await _0x1505d5[_0x50908a(_0x169b3a._0x3eb03c)]();_0x2ad98f=_0x2ad98f[_0x50908a(0x161)](/有道翻译查询结果/g,'')[_0x50908a(_0x169b3a._0xfc4fb0)](),_0x2ad98f=_0x2ad98f[_0x50908a(0x161)](/翻译后/g,'')[_0x50908a(0x21c)](),_0x2ad98f=_0x2ad98f[_0x50908a(_0x169b3a._0x29b221)](/翻译前/g,'')[_0x50908a(0x21c)](),_0x2ad98f=_0x2ad98f['replace'](/：/g,'')[_0x50908a(0x21c)](),_0x2ad98f=_0x2ad98f[_0x50908a(0x161)](new RegExp(gjc2,'g'),''),gjc2=_0x2ad98f,console[_0x50908a(_0x169b3a._0x492e2f)](gjc2);}else console[_0x50908a(0x205)](_0x50908a(_0x169b3a._0x56a45d));zt=0x1,ycqx=setTimeout(()=>{const _0x1bb827=_0x50908a;if(zt==0x1){zt=0x0,_0x26dcca[_0x1bb827(0x164)](_0x1bb827(_0x64091._0x4a51c5));return;}},0x7530),_0x26dcca['reply']([segment['at'](id),_0x50908a(0x1ce)]);return;}}if(sc==0x0&_0x26dcca[_0x50908a(0x1e6)]&zt==0x1&_0x26dcca[_0x50908a(_0x169b3a._0x3252d6)]!=undefined){clearTimeout(ycqx);if(_0x26dcca[_0x50908a(_0x169b3a._0x191111)]==id&zt==0x1){sc=0x1;let _0x388d72=await imgUrlToBase64(_0x26dcca[_0x50908a(_0x169b3a._0x3252d6)][0x0][_0x50908a(_0x169b3a._0x3d3af5)](/https/g,_0x50908a(_0x169b3a._0x56d18c))[_0x50908a(0x21c)]()),_0x1033fd=_0x388d72[_0x50908a(0x17d)],_0xb4ffa4=Math[_0x50908a(0x229)](Math[_0x50908a(_0x169b3a._0x2eaa23)]()*0xb6cff090);var _0x138550={'prompt':'masterpiece,\x20best\x20quality,'+gjc2,'width':0x180,'height':0x200,'scale':guimo,'sampler':moxing,'steps':0x32,'seed':_0xb4ffa4,'n_samples':0x1,'strength':0x1-xsd,'noise':jz,'ucPreset':0x0,'image':_0x1033fd,'uc':pc};_0x26dcca[_0x50908a(0x164)]('好的，我开始以图生草了'),zt=0x0;try{res=await _0x51789b(_0x50908a(_0x169b3a._0x21ffd3),{'method':_0x50908a(0x195),'body':JSON[_0x50908a(0x1c1)](_0x138550),'headers':{'Content-Type':'application/json','User-Agent':_0x50908a(_0x169b3a._0x2005b8)}});}catch(_0x2cc374){console[_0x50908a(_0x169b3a._0x223df2)](_0x2cc374),console[_0x50908a(_0x169b3a._0x20f147)](_0x50908a(0x238)),kg=0x0;return;}let _0x4cf4e1=await res[_0x50908a(_0x169b3a._0x4d0443)]();_0x4cf4e1=_0x4cf4e1[_0x50908a(_0x169b3a._0x22b156)](/id: 1/g,'')[_0x50908a(_0x169b3a._0x4e33c9)](),_0x4cf4e1=_0x4cf4e1[_0x50908a(_0x169b3a._0x3dd24b)](/event: newImage/g,'')[_0x50908a(0x21c)](),_0x4cf4e1=_0x4cf4e1[_0x50908a(_0x169b3a._0x22b156)](/data:/g,'')['trim']();if(res==''){_0x26dcca[_0x50908a(0x164)](_0x50908a(_0x169b3a._0x4e1e64));return;}_0x26dcca[_0x50908a(0x164)](_0x50908a(0x206)),await _0x257312[_0x50908a(_0x169b3a._0x171bdf)](_0x50908a(_0x169b3a._0x48d947),_0x4cf4e1[_0x50908a(_0x169b3a._0x593800)](),'base64',_0xc38675=>{const _0x522810=_0x50908a;_0xc38675?console['log']('写入文件错误'):console[_0x522810(_0x18381d._0x27191b)](_0x522810(_0x18381d._0x5a930b));}),msg2=[segment['at'](_0x26dcca[_0x50908a(_0x169b3a._0x2b2f44)]),segment['image'](ml+_0x50908a(0x1b8))],await sleep(0x1f4);let _0x22542b=await _0x26dcca[_0x50908a(_0x169b3a._0x35d75b)](msg2);iscd=0x1,console[_0x50908a(_0x169b3a._0x20f147)](_0x22542b[_0x50908a(0x18f)],isch);if(_0x22542b&&_0x22542b[_0x50908a(0x18f)]&&isch==0x1&&_0x26dcca[_0x50908a(0x1e6)]){let _0x2e3a80=_0x26dcca['group'];setTimeout(()=>{const _0x50fe28=_0x50908a;_0x2e3a80['recallMsg'](_0x22542b[_0x50fe28(_0xa1c67e._0x5ea7c5)]);},timeout);}startTimeMS=new Date()[_0x50908a(_0x169b3a._0x10115a)](),t=setTimeout(()=>{iscd=0x0,sc=0x0,id='';},cd);}}else{if(_0x26dcca[_0x50908a(_0x169b3a._0x43c2a7)]==undefined&_0x26dcca[_0x50908a(0x1b7)]!=undefined){if(_0x26dcca[_0x50908a(_0x169b3a._0xe677de)][_0x50908a(_0x169b3a._0x2f1da6)](_0x50908a(0x21b))){if(iscd==0x1){console[_0x50908a(0x205)](iscd);let _0xd5f369=cd-(new Date()[_0x50908a(0x172)]()-startTimeMS);_0xd5f369=Math[_0x50908a(_0x169b3a._0x4329a8)](_0xd5f369/0x3e8);if(_0xd5f369<0x0){sc=0x0,id='';return;}_0x26dcca[_0x50908a(0x164)](_0x50908a(_0x169b3a._0x18db89)+String(_0xd5f369)+_0x50908a(0x1c3));}else _0x26dcca['reply'](_0x50908a(_0x169b3a._0x142417));}}}}async[_0x49d826(0x18b)](_0x2e6548){const _0x54392f={_0x2b8486:0x19a,_0x43cfb1:0x1b4,_0x4b4601:0x1e6,_0x29cdb6:0x1ae,_0x52be88:0x17a,_0x3c9fa9:0x164,_0x945439:0x205,_0x4f6775:0x1bb,_0x3a4a87:0x161,_0x379fad:0x1c8,_0x168dcb:0x191,_0x4a1697:0x1b7,_0x548287:0x21c,_0x4a3c49:0x1b3,_0x2fb234:0x20e,_0x3a8251:0x229,_0x569f93:0x1d3,_0x5a9e1f:0x1a5,_0x2f8090:0x196,_0x1703ef:0x1a5,_0x4dd676:0x1eb,_0x1c5a75:0x1fd,_0xfa6279:0x1b5,_0x40d8f2:0x192,_0x2ca7ae:0x230,_0x4fb714:0x18d,_0x1f36a1:0x1fb,_0x543031:0x23a,_0x32bce5:0x1ac,_0x5f19ac:0x188,_0x4218f6:0x236,_0x28e6ca:0x1da,_0x18e89a:0x217,_0x467ce9:0x1cf,_0x4cdc08:0x1f8,_0x3d00f3:0x1c1,_0x5e326c:0x205,_0x30fd68:0x163,_0x1fcd0f:0x209,_0x5df096:0x1b1,_0x2e650d:0x1e4,_0x471b6a:0x1e6,_0x503a6e:0x212},_0x3c52c6={_0x199c03:0x224},_0x291037={_0x2de7e5:0x205,_0x3cf869:0x197},_0x4ea4bb={_0x54845e:0x1ac,_0x3c4261:0x205,_0x15079e:0x1c9,_0x1a7ae4:0x1ba},_0x4dfec6=_0x49d826;dqpz();if(_0x2e6548[_0x4dfec6(0x1b7)][_0x4dfec6(0x19a)]('#土块画图预设')&!_0x2e6548[_0x4dfec6(0x17a)]){_0x2e6548[_0x4dfec6(0x164)](_0x4dfec6(0x1bd));return;}let _0x5587b4,_0x330768,_0x214ee3;_0x2e6548[_0x4dfec6(0x1b7)][_0x4dfec6(_0x54392f._0x2b8486)](_0x4dfec6(_0x54392f._0x43cfb1))==![]&&(_0x214ee3=_0x2e6548[_0x4dfec6(0x1b7)]['replace'](/#绘个图/g,'')['trim']());if(kg2==0x0&_0x2e6548[_0x4dfec6(_0x54392f._0x4b4601)]|_0x2e6548['isMaster']){kg2==0x1&&_0x2e6548[_0x4dfec6(0x164)](_0x4dfec6(_0x54392f._0x29cdb6));if(zr==0x1&!_0x2e6548[_0x4dfec6(_0x54392f._0x52be88)]){_0x2e6548[_0x4dfec6(_0x54392f._0x3c9fa9)](_0x4dfec6(0x17c));return;}kg2=0x1;let _0x41d2b6=_0x214ee3;var _0x31adbc=new RegExp('[\x5cu4E00-\x5cu9FFF]+','g');if(_0x31adbc[_0x4dfec6(0x1a4)](_0x41d2b6)){console[_0x4dfec6(_0x54392f._0x945439)](_0x4dfec6(_0x54392f._0x4f6775));let _0x4d1d3e=_0x4dfec6(0x1f6)+_0x41d2b6,_0x2c5a93=await _0x51789b(_0x4d1d3e),_0x353736=await _0x2c5a93[_0x4dfec6(0x163)]();_0x353736=_0x353736[_0x4dfec6(0x161)](/有道翻译查询结果/g,'')[_0x4dfec6(0x21c)](),_0x353736=_0x353736['replace'](/翻译后/g,'')[_0x4dfec6(0x21c)](),_0x353736=_0x353736[_0x4dfec6(_0x54392f._0x3a4a87)](/翻译前/g,'')[_0x4dfec6(0x21c)](),_0x353736=_0x353736['replace'](/：/g,'')[_0x4dfec6(0x21c)](),_0x353736=_0x353736['replace'](new RegExp(_0x41d2b6,'g'),''),res4=_0x353736;if(res4==''){let _0x28fd2d=_0x4dfec6(0x17b)+_0x214ee3+_0x4dfec6(_0x54392f._0x379fad);res4=await _0x51789b(_0x28fd2d),res4=await res4[_0x4dfec6(0x1d4)](),res4=res4[_0x4dfec6(_0x54392f._0x168dcb)];}if(res4==''){let _0x4bb937=_0x4dfec6(0x1ee)+_0x214ee3;res4=await _0x51789b(_0x4bb937),res4=await res4[_0x4dfec6(0x1d4)](),res4=res4[_0x4dfec6(0x175)];}console['log'](res4);}else console[_0x4dfec6(_0x54392f._0x945439)](_0x4dfec6(0x170)),res4=_0x41d2b6;let _0x158718,_0xac85ac;if(_0x2e6548[_0x4dfec6(_0x54392f._0x4a1697)][_0x4dfec6(0x19a)](_0x4dfec6(0x1b4))&_0x2e6548[_0x4dfec6(_0x54392f._0x52be88)]){_0x330768=_0x2e6548[_0x4dfec6(0x1b7)][_0x4dfec6(_0x54392f._0x3a4a87)](/#土块画图预设/g,'')[_0x4dfec6(_0x54392f._0x548287)]();let _0x23dee1=ml+_0x4dfec6(_0x54392f._0x4a3c49);await _0x257312[_0x4dfec6(0x202)](_0x23dee1,(_0x434652,_0x4f4d10)=>{const _0x2121cd=_0x4dfec6;_0x5587b4=JSON[_0x2121cd(_0x4ea4bb._0x54845e)](_0x4f4d10[_0x2121cd(0x23a)]()),_0xac85ac=_0x5587b4['shuju'];var _0x57db25=new RegExp(_0x2121cd(0x210),'g');if(_0x57db25[_0x2121cd(0x1a4)](_0x330768))console[_0x2121cd(_0x4ea4bb._0x3c4261)](_0x2121cd(_0x4ea4bb._0x15079e)),_0x158718=_0xac85ac[_0x2121cd(_0x4ea4bb._0x1a7ae4)](_0xa0ae83=>_0xa0ae83[_0x2121cd(0x200)]==_0x330768);else{_0x158718=Number(_0x330768)-0x1;if(_0x158718>_0xac85ac[_0x2121cd(0x1d0)]){_0x158718=-0x1;return;}}}),await sleep(0x1f4),console[_0x4dfec6(0x205)](_0x158718);if(_0x158718!=-0x1)res4=_0xac85ac[_0x158718]['gjc'];else{_0x2e6548['reply'](_0x4dfec6(0x1e5));return;}}await sleep(0x1f4),_0x2e6548[_0x4dfec6(0x164)](_0x4dfec6(_0x54392f._0x2fb234));let _0x554e19=Math[_0x4dfec6(_0x54392f._0x3a8251)](Math['random']()*0x2);_0x554e19==0x0&&(changdu=0x200,kuandu=0x300);_0x554e19==0x1&&(changdu=0x300,kuandu=0x200);console[_0x4dfec6(_0x54392f._0x945439)](_0x554e19),console[_0x4dfec6(_0x54392f._0x945439)](res4);var _0x32ce1c=_0x4dfec6(_0x54392f._0x569f93),_0x55628a=[res4,pc,_0x4dfec6(0x1ed),_0x4dfec6(0x1ed),0x14,_0x4dfec6(_0x54392f._0x5a9e1f),![],![],0x1,0x1,0x7,-0x1,-0x1,0x0,0x0,0x0,![],changdu,kuandu,![],![],0.7,_0x4dfec6(0x1ed),![],![],null,'',_0x4dfec6(_0x54392f._0x2f8090),'','Steps','',!![],![],null,'',''],_0x14a9cc=[res4,pc,_0x4dfec6(0x1ed),_0x4dfec6(0x1ed),0x1c,_0x4dfec6(_0x54392f._0x1703ef),![],![],0x1,0x1,0xb,-0x1,-0x1,0x0,0x0,0x0,![],0x200,0x200,![],![],0.7,'None',![],![],null,'','Seed','',_0x4dfec6(_0x54392f._0x4dd676),'',!![],![],null,'',''];let _0x1c3711='https://api.novelai.net/ai/generate-image\x20',_0x510072=Math['floor'](Math[_0x4dfec6(_0x54392f._0x1c5a75)]()*0xb6cff090),_0x3720ff=_0x4dfec6(0x220)+moxing+_0x4dfec6(_0x54392f._0xfa6279)+guimo[_0x4dfec6(0x23a)]()+_0x4dfec6(_0x54392f._0x40d8f2)+bushu[_0x4dfec6(0x23a)]()+_0x4dfec6(_0x54392f._0x2ca7ae)+_0x510072[_0x4dfec6(0x23a)](),_0x1bf27e='';try{_0x1bf27e=_0x257312[_0x4dfec6(_0x54392f._0x4fb714)](_0x4dfec6(_0x54392f._0x1f36a1));}catch{_0x2e6548[_0x4dfec6(0x164)]('你还没有填写密钥哦。');return;}_0x1bf27e=_0x1bf27e[_0x4dfec6(_0x54392f._0x543031)]();let _0x330fa8=_0x7e2fec[_0x4dfec6(_0x54392f._0x32bce5)](_0x257312[_0x4dfec6(0x18d)](_0x4dfec6(_0x54392f._0x5f19ac),'utf8'));_0x330fa8=_0x330fa8[_0x4dfec6(0x18c)][0x0];try{_0x1c3711=_0x4dfec6(0x189)+res4+_0x4dfec6(0x182)+_0x1bf27e+_0x4dfec6(0x1ea)+String(_0x330fa8)+_0x4dfec6(_0x54392f._0x4218f6)+ss+_0x4dfec6(0x1b9)+kuandu+'&height='+changdu+_0x4dfec6(_0x54392f._0x28e6ca)+guimo+'&moxing='+moxing+'&steps='+bushu+'&uc='+pc,res=await _0x51789b(_0x1c3711),console['log'](_0x4dfec6(_0x54392f._0x18e89a));}catch(_0x47b97c){console[_0x4dfec6(0x205)](_0x47b97c),console[_0x4dfec6(0x205)](_0x4dfec6(0x238));}res=await res['text']();if(res==_0x4dfec6(_0x54392f._0x467ce9)){console[_0x4dfec6(_0x54392f._0x945439)](_0x4dfec6(0x238)),_0x1c3711=dz2;return;}if(res['includes'](_0x4dfec6(0x1f1))){_0x2e6548[_0x4dfec6(0x164)](_0x4dfec6(0x214)),kg2=0x0;return;}if(!res[_0x4dfec6(0x19a)](_0x4dfec6(0x209))){let _0x166979=_0x4dfec6(_0x54392f._0x4cdc08);try{res=await _0x51789b(_0x166979,{'method':'post','agent':isdl?await getAgent():'','headers':{'Content-Type':_0x4dfec6(0x20a),'authorization':_0x4dfec6(0x21f)},'body':JSON[_0x4dfec6(_0x54392f._0x3d00f3)]({'input':'masterpiece,\x20best\x20quality,\x20'+res4,'model':ss,'parameters':{'width':kuandu,'height':changdu,'scale':guimo,'sampler':moxing,'steps':bushu,'seed':_0x510072,'n_samples':0x1,'ucPreset':0x0,'uc':pc}})}),console['log'](_0x4dfec6(0x217));}catch(_0x597fb6){console[_0x4dfec6(_0x54392f._0x5e326c)](_0x597fb6),_0x2e6548[_0x4dfec6(0x164)]('服务器压力大，等等吧'),kg2=0x0;return;}res=await res[_0x4dfec6(_0x54392f._0x30fd68)]();if(!res[_0x4dfec6(_0x54392f._0x2b8486)](_0x4dfec6(_0x54392f._0x1fcd0f))){_0x2e6548['reply'](_0x4dfec6(_0x54392f._0x5df096)),kg2=0x0;return;}}res=res['replace'](/id: 1/g,'')[_0x4dfec6(0x21c)](),res=res[_0x4dfec6(_0x54392f._0x3a4a87)](/event: newImage/g,'')['trim'](),res=res[_0x4dfec6(0x161)](/data:/g,'')['trim'](),await _0x257312['writeFile']('./resources/ht.png',res['toString'](),_0x4dfec6(_0x54392f._0x2e650d),_0x3fd8e5=>{const _0x5f4836=_0x4dfec6;_0x3fd8e5?console['log'](_0x5f4836(0x239)):console[_0x5f4836(_0x291037._0x2de7e5)](_0x5f4836(_0x291037._0x3cf869));});iscanshu==0x0&&(_0x3720ff='');await sleep(0x1f4),msg2=[segment[_0x4dfec6(0x1f4)](_0x4dfec6(0x1dc)),_0x3720ff];let _0x46bb11=await _0x2e6548['reply'](msg2,ishuifu);iscd=0x1,console['log'](_0x46bb11[_0x4dfec6(0x18f)],isch);if(_0x46bb11&&_0x46bb11['message_id']&&isch==0x1&&_0x2e6548[_0x4dfec6(_0x54392f._0x471b6a)]){let _0x270387=_0x2e6548['group'];setTimeout(()=>{const _0x1f9990=_0x4dfec6;_0x270387[_0x1f9990(_0x3c52c6._0x199c03)](_0x46bb11[_0x1f9990(0x18f)]);},timeout);}startTimeMS=new Date()[_0x4dfec6(0x172)](),t=setTimeout(()=>{kg2=0x0,iscd=0x0;},cd);}else{if(iscd==0x1){let _0x4fa2f9=cd-(new Date()[_0x4dfec6(0x172)]()-startTimeMS);_0x4fa2f9=Math[_0x4dfec6(0x1cb)](_0x4fa2f9/0x3e8);if(_0x4fa2f9<0x0){kg2=0x0;return;}_0x2e6548[_0x4dfec6(0x164)](_0x4dfec6(0x193)+String(_0x4fa2f9)+_0x4dfec6(0x1c3));}else _0x2e6548[_0x4dfec6(0x164)](_0x4dfec6(_0x54392f._0x503a6e));}}}async function imgUrlToBase64(_0x3b1ca6){let _0x5d9429;return new Promise(function(_0x5bc223,_0x27aa32){const _0x2dbf13={_0x273f00:0x1bf},_0x82c2c0={_0x481f8f:0x23a},_0x53a9b7=_0xb6be;let _0x12f366=http[_0x53a9b7(0x1ad)](_0x3b1ca6,function(_0x4ab00a){const _0x540c5d={_0x1e218f:0x1c0,_0xf53f28:0x1d0};var _0xe2ad7a=[],_0x2bb84c=0x0;_0x4ab00a['on']('data',function(_0x150721){const _0x44bd51=_0xb6be;_0xe2ad7a[_0x44bd51(_0x540c5d._0x1e218f)](_0x150721),_0x2bb84c+=_0x150721[_0x44bd51(_0x540c5d._0xf53f28)];}),_0x4ab00a['on']('end',function(_0x2d4deb){const _0x1e9fee=_0xb6be;var _0x22113d=Buffer[_0x1e9fee(0x1a1)](_0xe2ad7a,_0x2bb84c);_0x5d9429=_0x22113d[_0x1e9fee(_0x82c2c0._0x481f8f)](_0x1e9fee(0x1e4)),_0x5bc223({'success':!![],'base64Img':_0x5d9429});});});_0x12f366['on'](_0x53a9b7(0x216),_0x3e3280=>{const _0x2b24f3=_0x53a9b7;_0x5bc223({'success':![],'errmsg':_0x3e3280[_0x2b24f3(_0x2dbf13._0x273f00)]});}),_0x12f366['end']();});}function sleep(_0x18235a){return new Promise(_0x486cdc=>setTimeout(_0x486cdc,_0x18235a));}async function dqpz(){const _0x2b523f={_0x4598a4:0x1e3,_0x2fda77:0x202},_0x3cd576={_0x31e09b:0x1e1,_0x3de7b0:0x205},_0x1d2205=_0x49d826;Path=ml+_0x1d2205(_0x2b523f._0x4598a4),await _0x257312[_0x1d2205(_0x2b523f._0x2fda77)](Path,(_0x30f91d,_0x484dfd)=>{const _0x1b0a28=_0x1d2205;nr=_0x484dfd[_0x1b0a28(0x23a)](),nr=nr[_0x1b0a28(_0x3cd576._0x31e09b)](','),cd=nr[0x0],timeout=nr[0x1],isch=nr[0x2],iscd=nr[0x3],console[_0x1b0a28(_0x3cd576._0x3de7b0)](cd,timeout,isch,iscd);}),await sleep(0x1f4);}async function getAgent(){const _0x332b2a={_0x4bba74:0x186},_0x1a9ac6=_0x49d826;let _0x4e9cf3=_0x29d775['bot'][_0x1a9ac6(0x162)];if(!_0x4e9cf3)return null;if(_0x4e9cf3==='http://0.0.0.0:0')return null;HttpsProxyAgent===''&&(HttpsProxyAgent=await import(_0x1a9ac6(0x1a8))['catch'](_0x2b67d8=>{const _0x166d6c=_0x1a9ac6;logger[_0x166d6c(0x216)](_0x2b67d8);}),HttpsProxyAgent=HttpsProxyAgent?HttpsProxyAgent[_0x1a9ac6(_0x332b2a._0x4bba74)]:undefined);if(HttpsProxyAgent)return new HttpsProxyAgent(_0x4e9cf3);return null;}