const _0x5a64a5=_0x91bf;(function(_0x1e0c20,_0x53fb3e){const _0x156580={_0x577271:0xfb,_0x12b27f:0x14e,_0x5e68d9:0xb6,_0x558ac4:0x15e,_0x2ea8cd:0x139},_0x132304=_0x91bf,_0x47b1f9=_0x1e0c20();while(!![]){try{const _0xa70dfe=parseInt(_0x132304(_0x156580._0x577271))/0x1+-parseInt(_0x132304(0xab))/0x2+-parseInt(_0x132304(0xf7))/0x3*(-parseInt(_0x132304(_0x156580._0x12b27f))/0x4)+parseInt(_0x132304(0xdc))/0x5*(parseInt(_0x132304(0x136))/0x6)+-parseInt(_0x132304(_0x156580._0x5e68d9))/0x7*(parseInt(_0x132304(0x11c))/0x8)+-parseInt(_0x132304(0x17d))/0x9*(-parseInt(_0x132304(_0x156580._0x558ac4))/0xa)+-parseInt(_0x132304(_0x156580._0x2ea8cd))/0xb;if(_0xa70dfe===_0x53fb3e)break;else _0x47b1f9['push'](_0x47b1f9['shift']());}catch(_0x4d3631){_0x47b1f9['push'](_0x47b1f9['shift']());}}}(_0x192e,0x89087));import{segment}from'oicq';import _0xe40393 from'node-fetch';import _0x1babc3,{chownSync}from'fs';import _0x35ca3b from'../../../lib/config/config.js';import _0x5e6261 from'../../../lib/puppeteer/puppeteer.js';let data1={};import{createRequire}from'module';import _0x3f2432 from'yaml';const require=createRequire(import.meta['url']);let ysct,mf,mfkg=0x0,ml=process[_0x5a64a5(0x145)]();var http=require(_0x5a64a5(0x10c));import _0x11471a from'lodash';let yushekg=0x0,kg=0x0,guimo=5.5,kg2=0x0,mfid='',res4,htm='',htm2='',res5,res,zr=0x0,changdu=0x200,kuandu=0x200,msg2,timeout=0x7530,isch=0x1,cd=0x0,t,startTimeMS,iscd=0x0,my,dz,sj1,sj2,shuju,zt=0x0,gjc2,sc=0x0,bushu=0x1c,id='',xsd=0.4,nr,ycqx,jz=0.2,ss=_0x5a64a5(0xc6),Path,ys=[],moxing=_0x5a64a5(0xc1),isdl=0x0,iscanshu=0x1,ishuifu=!![],HttpsProxyAgent='',pc=_0x5a64a5(0x178);function _0x192e(){const _0x437217=['masterQQ','请发送要查看魔法的图片,0.0','#土块画图涩涩开启','你好号主，成功再次激活','tags','#所有人可画','正在生草中，我知道你很急，先别急','k_euler','你是主人，没有cd，欸嘿','^#土块画图步数(.*)|^#查看画图设置','reply','szgm','nai-diffusion','我知道你要干嘛！注意身体！','Euler\x20a','秒可画','当前预设有：\x0a','#土块画图撤回','ysgn','\x0a降噪：','#以图生草降噪','bot','left','https://api.sdgou.cc/api/fanyi/?msg=','test','模型已设置为k_euler_ancestral','utf-8','土块AI画图','isMaster','已经取消','post','push','预设包含中文','#查看预设词条','5uXnKHN','round','floor','#土块画图冷却','0.0001','好的，我开始画图了，请稍等哦','正在画图中，我知道你很急，但是你先别急。','catch','writeFileSync','img','length','&height=','密钥错误，或者遇上问题了','huatu2','random','log','includes','已经开启默认屏蔽词','你好号主','我没画成功，再来一次吧。','https://api.novelai.net/ai/generate-image\x20','Draw\x20mask','tianxie','&tk=','masterpiece,\x20best\x20quality,\x20','这个密钥已经被激活了，你想干嘛！','toString','57BMKyUZ','#仅我可画','[\x5cu4E00-\x5cu9FFF]+','message','959195PyejYg','文件写入成功！','删除预设成功','#以图生草','huatu3','screenshot','你还没有填写密钥哦。','正在查看魔法，请稍后啊，0v0','#土块画图冷却关闭','当前屏蔽词有：','&uc=','szbs','group','是英文','./resources/ht.png','#以图生草相似度','message_id','http','data','json','getTime','好的，我开始以图生草了','不能访问','shuju','删除屏蔽词成功','parse','replace','<p\x20style=\x22margin-bottom:0.75em\x22>Recommended\x20settings:\x20Sampling\x20Steps:\x2080-100,\x20Sampler:\x20Euler\x20a,\x20Denoising\x20strength:\x200.8</p>','&qq=','https://www.tukuai.one/diqiu.php?tk=','pbc','#查看屏蔽词','default','8mUxLJn','可以访问','Steps','kqdl','\x20\x0a步数:','image','已激活密钥，号主为','密钥不存在','&moxing=','服务器压力大，等等吧','魔法是：','步数不在合理范围内，28以下为合理范围','&order=zh2en','msg','/plugins/earth-k-plugin/resources/pz/pz.txt','base64Img','#取消画图','模型已设置为k_euler','fill','https://xiaobapi.top/api/xb/api/upload_image_tags.php?url=','模型：','application/json','写入文件错误','访问成功了','^#查看所有预设$|#新增预设(.*)|(.*)','新增屏蔽词成功','2571774DbfxNA','utf8','<p\x20style=\x22margin-bottom:0.75em\x22>Will\x20upscale\x20the\x20image\x20to\x20twice\x20the\x20dimensions;\x20use\x20width\x20and\x20height\x20sliders\x20to\x20set\x20tile\x20size</p>','4081990ReZPYs','开启代理成功','./resources/th2.txt','isPrivate','https://www.tukuai.one/dq.php?gjc=','^#开启代理|^#关闭代理|^#开启参数显示|^#关闭参数显示|^#开启词条回复|^#关闭词条回复','splice','name','15秒还未发图，查看魔法已取消','123','没有这个预设哦','已开启画图冷却，冷却时间为30秒','cwd','ddim','text','&model=','iewpl4wgau','已关闭参数显示','好的，已开启，请注意身体哦','user_id','#新增屏蔽词','15628SzClhq','#新增预设','30秒还未发图，以图生草已取消','#删除预设','功能暂时关闭，后续开放','已设置冷却时间为','当前相似度','#土块画图预设','^#填写密钥(.*)','已激活该密钥','readFile','None','writeFile','concat','qvht','密钥不存在！不能乱输入哦','220yCXOSA','original','base64','^#新增屏蔽词(.*)$|#查看屏蔽词$|#删除屏蔽词$|#开启默认屏蔽词$','split','好吧，那就一起来吧！','https://api.66mz8.com/api/translation.php?info=','#查看所有模型','/plugins/earth-k-plugin/resources/htys/ys.json','right','<ul>\x0a<li><code>CFG\x20Scale</code>\x20should\x20be\x202\x20or\x20lower.</li>\x0a</ul>\x0a','readFileSync','./plugins/earth-k-plugin/resources/aiht/ml.html','数字超过了预设个数','data:image/jpeg;base64,','#开启默认屏蔽词','recallMsg','以图生草','#查看魔法','模型已设置为ddim','\x0a相似度：','我在cd中，还有','get','plms','Seed','code','lowres,nude,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry,\x20owres,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry','end','&scale=','很抱歉，你的密钥错误，不能生草','gjc','153522suIDFy','你不是主人，不能用预设哦','已开启参数显示','fanyi','#土块画图涩涩关闭','#土块画图撤回关闭','stringify','https://www.tukuai.one/qx.php?tk=','trim','szmx','proxyAddress','已关闭代理','对不起，你不可画哦','#查看预设','isGroup','539156GpjKky','规模已设置为','down','好的，已关闭了','#关闭参数显示','没有访问成功','新增预设成功','Just\x20resize','模型已设置为k_lms','好的，权限已经关闭，只有你能画了','error','4447646xCEswf','#查看画图设置','abc','event:\x20newImage'];_0x192e=function(){return _0x437217;};return _0x192e();}export class aiht extends plugin{constructor(){const _0x47b450={_0x5c5b95:0xd5,_0x33ba88:0xd5,_0x2850d9:0xa5,_0x2d1b3a:0x106,_0x2835b0:0xf2},_0x14fbd3=_0x5a64a5;super({'name':_0x14fbd3(_0x47b450._0x5c5b95),'dsc':_0x14fbd3(_0x47b450._0x33ba88),'event':'message','priority':0x479,'rule':[{'reg':'^#绘个图(.*)$|#土块画图预设(.*)$','fnc':_0x14fbd3(0xe9)},{'reg':'^#取消画图$|^#所有人可画$|^#仅我可画$|^#土块画图撤回(.*)$|^#土块画图冷却(.*)$|^#土块画图涩涩开启|^#土块画图涩涩关闭','fnc':_0x14fbd3(0x15c)},{'reg':_0x14fbd3(0x161),'fnc':_0x14fbd3(0x119)},{'reg':'^#以图生草(.*)$|(.*)','fnc':_0x14fbd3(0xff),'log':![]},{'reg':_0x14fbd3(0x134),'fnc':_0x14fbd3(0xcc),'log':![]},{'reg':'^#土块画图规模(.*)','fnc':'szgm'},{'reg':'^#土块画图模型(.*)|^#查看所有模型','fnc':_0x14fbd3(_0x47b450._0x2850d9)},{'reg':_0x14fbd3(0xc3),'fnc':_0x14fbd3(_0x47b450._0x2d1b3a)},{'reg':_0x14fbd3(0x13e),'fnc':_0x14fbd3(0x11f)},{'reg':_0x14fbd3(0x156),'fnc':_0x14fbd3(_0x47b450._0x2835b0)}]});}async[_0x5a64a5(0xf2)](_0x132d21){const _0x167853={_0x72b899:0xd6,_0x448fa2:0x169,_0xf469d2:0x137,_0x25e817:0xba,_0x23a5c0:0x129,_0x19e27c:0x14c,_0x5bd3bb:0x147,_0x54ca48:0xec,_0x55b84d:0x15d,_0x48cd20:0xec,_0x17bd81:0xee,_0x2241bc:0x13b,_0xac3477:0xf6,_0x288a58:0xd4,_0x2615ed:0xec,_0x1d988e:0x157,_0xf34ec6:0xd4,_0x31e379:0xc4,_0xbc9ebd:0xf5},_0x4c7a1a={_0x13e2ec:0xeb,_0x351cef:0x132},_0xf39720={_0xbbaf04:0xeb,_0x15d458:0x132},_0x1fb07d=_0x5a64a5;if(_0x132d21[_0x1fb07d(_0x167853._0x72b899)]){let _0x51d07d=_0x3f2432['parse'](_0x1babc3[_0x1fb07d(_0x167853._0x448fa2)]('./config/config/other.yaml',_0x1fb07d(_0x167853._0xf469d2)));_0x51d07d=_0x51d07d[_0x1fb07d(_0x167853._0x25e817)][0x0],console['log'](_0x51d07d);let _0x4d04b4=_0x132d21[_0x1fb07d(_0x167853._0x23a5c0)]['replace'](/#填写密钥/g,'')['trim'](),_0x3fa364=_0x1fb07d(0x118)+_0x4d04b4+_0x1fb07d(0x117)+String(_0x132d21[_0x1fb07d(_0x167853._0x19e27c)]),_0xde7045=await _0xe40393(_0x3fa364),_0x36d942=await _0xde7045[_0x1fb07d(_0x167853._0x5bd3bb)]();if(_0x36d942[_0x1fb07d(_0x167853._0x54ca48)](_0x1fb07d(0x123))){_0x132d21[_0x1fb07d(0xc4)](_0x1fb07d(_0x167853._0x55b84d));return;}if(_0x36d942[_0x1fb07d(_0x167853._0x48cd20)](_0x1fb07d(_0x167853._0x17bd81))){_0x132d21['reply'](_0x1fb07d(0xbd)),await _0x1babc3[_0x1fb07d(0x15a)](_0x1fb07d(_0x167853._0x2241bc),_0x4d04b4[_0x1fb07d(_0x167853._0xac3477)](),_0x1fb07d(_0x167853._0x288a58),_0x475ccc=>{const _0x3357ec=_0x1fb07d;if(_0x475ccc)console[_0x3357ec(_0xf39720._0xbbaf04)](_0x3357ec(_0xf39720._0x15d458));else{}});return;}_0x36d942[_0x1fb07d(_0x167853._0x2615ed)](_0x1fb07d(_0x167853._0x1d988e))&&(_0x132d21[_0x1fb07d(0xc4)](_0x1fb07d(0x122)+String(_0x132d21[_0x1fb07d(0x14c)])),await _0x1babc3[_0x1fb07d(0x15a)](_0x1fb07d(0x13b),_0x4d04b4['toString'](),_0x1fb07d(_0x167853._0xf34ec6),_0x194d4b=>{const _0x5cc1d6=_0x1fb07d;if(_0x194d4b)console[_0x5cc1d6(_0x4c7a1a._0x13e2ec)](_0x5cc1d6(_0x4c7a1a._0x351cef));else{}})),_0x36d942[_0x1fb07d(0xec)]('该密钥已被激活')&&_0x132d21[_0x1fb07d(_0x167853._0x31e379)](_0x1fb07d(_0x167853._0xbc9ebd));}}async[_0x5a64a5(0x11f)](_0x2925a1){const _0x2eeb80={_0x758e79:0x129,_0x4c7a17:0xd6,_0x38caaa:0xa7,_0x5dfe08:0xc4,_0x51dd23:0x17f,_0x23f661:0xd6,_0x3fff10:0x14a},_0x346a44=_0x5a64a5;_0x2925a1[_0x346a44(_0x2eeb80._0x758e79)]=='#开启代理'&_0x2925a1[_0x346a44(_0x2eeb80._0x4c7a17)]&&(isdl=0x1,_0x2925a1['reply'](_0x346a44(0x13a))),_0x2925a1[_0x346a44(0x129)]=='#关闭代理'&_0x2925a1[_0x346a44(0xd6)]&&(isdl=0x0,_0x2925a1[_0x346a44(0xc4)](_0x346a44(_0x2eeb80._0x38caaa))),_0x2925a1[_0x346a44(_0x2eeb80._0x758e79)]=='#开启参数显示'&_0x2925a1['isMaster']&&(iscanshu=0x1,_0x2925a1[_0x346a44(_0x2eeb80._0x5dfe08)](_0x346a44(_0x2eeb80._0x51dd23))),_0x2925a1[_0x346a44(0x129)]==_0x346a44(0xaf)&_0x2925a1[_0x346a44(_0x2eeb80._0x23f661)]&&(iscanshu=0x0,_0x2925a1[_0x346a44(0xc4)](_0x346a44(_0x2eeb80._0x3fff10))),_0x2925a1[_0x346a44(_0x2eeb80._0x758e79)]=='#开启词条回复'&_0x2925a1[_0x346a44(0xd6)]&&(ishuifu=!![],_0x2925a1[_0x346a44(0xc4)]('已开启词条回复')),_0x2925a1[_0x346a44(0x129)]=='#关闭词条回复'&_0x2925a1[_0x346a44(0xd6)]&&(ishuifu=![],_0x2925a1['reply']('已关闭词条回复'));}async[_0x5a64a5(0x106)](_0x4efb0){const _0x3cd59d={_0x476cb0:0xb7,_0xa49e68:0x130,_0x335707:0xf6,_0x14d874:0x172,_0x29d5ac:0xcd,_0x42ef3f:0x129,_0x41c009:0xc4},_0xefd7f8=_0x5a64a5;if(_0x4efb0['msg']==_0xefd7f8(_0x3cd59d._0x476cb0)){console['log'](guimo);let _0x4b5818=[_0xefd7f8(_0x3cd59d._0xa49e68),moxing,'\x0a规模：',guimo[_0xefd7f8(_0x3cd59d._0x335707)](),'\x0a步数：',bushu['toString'](),_0xefd7f8(_0x3cd59d._0x14d874),xsd[_0xefd7f8(0xf6)](),_0xefd7f8(_0x3cd59d._0x29d5ac),jz['toString']()];_0x4efb0[_0xefd7f8(0xc4)](_0x4b5818);return;}bushu=_0x4efb0[_0xefd7f8(_0x3cd59d._0x42ef3f)][_0xefd7f8(0x115)](/#土块画图步数/g,'')[_0xefd7f8(0xa4)](),bushu=Number(bushu);if(bushu<0x0|bushu>0x1c){bushu=0x1c,_0x4efb0[_0xefd7f8(_0x3cd59d._0x41c009)](_0xefd7f8(0x127));return;}else _0x4efb0[_0xefd7f8(0xc4)]('步数已设置为'+String(bushu));}async['szmx'](_0x1be123){const _0x4a0c58={_0x55b82d:0x165,_0x5a3deb:0xc4,_0x5c7b35:0xd3,_0x16ed38:0x12d,_0x561a51:0x146},_0x417bf1=_0x5a64a5;if(_0x1be123[_0x417bf1(0x129)]==_0x417bf1(_0x4a0c58._0x55b82d)){let _0x26b9fd=['1：k_euler_ancestral,\x0a2：k_euler,\x0a3：k_lms,\x0a4：plms,\x0a5：ddim'];_0x1be123[_0x417bf1(_0x4a0c58._0x5a3deb)](_0x26b9fd);return;}moxing=_0x1be123[_0x417bf1(0x129)][_0x417bf1(0x115)](/#土块画图模型/g,'')[_0x417bf1(0xa4)](),moxing=Number(moxing);if(moxing<0x0|moxing>0x5){_0x1be123['reply']('模型不在合理范围内，1-5为合理范围'),moxing=0x2;return;}moxing==0x1&&(moxing='k_euler_ancestral',_0x1be123[_0x417bf1(0xc4)](_0x417bf1(_0x4a0c58._0x5c7b35))),moxing==0x2&&(moxing=_0x417bf1(0xc1),_0x1be123[_0x417bf1(0xc4)](_0x417bf1(_0x4a0c58._0x16ed38))),moxing==0x3&&(moxing='k_lms',_0x1be123[_0x417bf1(0xc4)](_0x417bf1(0xb3))),moxing==0x4&&(moxing=_0x417bf1(0x175),_0x1be123[_0x417bf1(0xc4)]('模型已设置为plms')),moxing==0x5&&(moxing=_0x417bf1(_0x4a0c58._0x561a51),_0x1be123[_0x417bf1(0xc4)](_0x417bf1(0x171)));}async[_0x5a64a5(0xc5)](_0x128e2a){const _0x4e711c={_0x210d99:0x129,_0x28a31d:0xa4,_0x507bd8:0xac},_0x58de31=_0x5a64a5;guimo=_0x128e2a[_0x58de31(_0x4e711c._0x210d99)][_0x58de31(0x115)](/#土块画图规模/g,'')[_0x58de31(_0x4e711c._0x28a31d)](),guimo=Number(guimo);if(guimo<0x3|guimo>0xc){_0x128e2a['reply']('规模不在合理范围内，3-12为合理范围'),guimo=5.5;return;}else _0x128e2a['reply'](_0x58de31(_0x4e711c._0x507bd8)+String(guimo));}async['ysgn'](_0x311aaf){const _0x239719={_0x5a8be8:0xe5,_0x1dd04e:0xec,_0x101bf9:0xa9,_0x1d9826:0x129,_0x3bc8dc:0xec,_0x323e25:0x129,_0x41273b:0xec,_0x231698:0xdb,_0x48e1a7:0xd6,_0x27e56e:0x115,_0x4134b6:0x162,_0x193a53:0x16b,_0x5592e9:0xc4,_0x2fd2a9:0x142,_0x5b5156:0xc4,_0x481ac0:0xec,_0xdf087e:0x151,_0x4da9af:0x115,_0x1cefbe:0xe6,_0x75ac19:0x112,_0x105a59:0x13f,_0x466815:0x15a,_0x4aedde:0xc4,_0x1ad73f:0xa2},_0x43e83c={_0x29cbba:0xfc,_0x25c390:0xc4,_0x4876e7:0xb1},_0xeead6b={_0x471b92:0xb5,_0x4429e0:0xc4},_0x53d340={_0x5ebb2a:0x114,_0x35d0df:0x112,_0x110702:0x140,_0x323369:0x17c},_0x5d3af7=_0x5a64a5;if(_0x311aaf[_0x5d3af7(_0x239719._0x5a8be8)]!=undefined)return![];if(yushekg==0x0&_0x311aaf['msg'][_0x5d3af7(_0x239719._0x1dd04e)](_0x5d3af7(_0x239719._0x101bf9))==![]&_0x311aaf[_0x5d3af7(_0x239719._0x1d9826)][_0x5d3af7(_0x239719._0x3bc8dc)]('#新增预设')==![]&_0x311aaf[_0x5d3af7(_0x239719._0x1d9826)]['includes'](_0x5d3af7(0x151))==![]&_0x311aaf[_0x5d3af7(_0x239719._0x323e25)][_0x5d3af7(_0x239719._0x3bc8dc)](_0x5d3af7(0xdb))==![])return![];let _0x1b56ed=ml+_0x5d3af7(0x166),_0x1ccf9f='';await _0x1babc3[_0x5d3af7(0x158)](_0x1b56ed,(_0x3963c1,_0x419eab)=>{const _0x1c5703=_0x5d3af7;if(_0x3963c1)throw _0x3963c1;var _0x45f3aa=_0x419eab['toString']()!=''?JSON[_0x1c5703(_0x53d340._0x5ebb2a)](_0x419eab['toString']()):[];ysct='',_0x1ccf9f='',shuju=_0x45f3aa;for(let _0x448bcc=0x0;_0x448bcc<shuju['shuju']['length'];_0x448bcc++){_0x1ccf9f=_0x1ccf9f+shuju[_0x1c5703(_0x53d340._0x35d0df)][_0x448bcc][_0x1c5703(_0x53d340._0x110702)]+',',ysct=ysct+shuju['shuju'][_0x448bcc][_0x1c5703(_0x53d340._0x323369)]+'++';}}),await sleep(0x1f4);if(_0x311aaf[_0x5d3af7(0x129)][_0x5d3af7(_0x239719._0x41273b)](_0x5d3af7(_0x239719._0x231698))&_0x311aaf[_0x5d3af7(_0x239719._0x48e1a7)]){let _0x27392d=_0x311aaf[_0x5d3af7(0x129)][_0x5d3af7(_0x239719._0x27e56e)](/#查看预设词条/g,'')[_0x5d3af7(0xa4)]();_0x27392d=Number(_0x27392d),ysct=ysct[_0x5d3af7(_0x239719._0x4134b6)]('++'),_0x1ccf9f=_0x1ccf9f[_0x5d3af7(_0x239719._0x4134b6)](',');if(_0x27392d>ysct[_0x5d3af7(0xe6)]|_0x27392d<0x0){_0x311aaf[_0x5d3af7(0xc4)](_0x5d3af7(_0x239719._0x193a53));return;}_0x311aaf[_0x5d3af7(_0x239719._0x5592e9)]([_0x1ccf9f[_0x27392d-0x1],':',ysct[_0x27392d-0x1]]),ysct='',_0x1ccf9f='';}if(_0x311aaf[_0x5d3af7(0x129)]==_0x5d3af7(0xa9)&_0x311aaf['isMaster']){_0x1ccf9f=_0x1ccf9f[_0x5d3af7(0x162)](','),data1={'tplFile':_0x5d3af7(0x16a),'dz':ml,'lb':_0x1ccf9f,'qsid':0x0};let _0x3d5938=await _0x5e6261[_0x5d3af7(0x100)](_0x5d3af7(_0x239719._0x2fd2a9),{...data1});_0x311aaf[_0x5d3af7(_0x239719._0x5592e9)](_0x3d5938);return;_0x311aaf[_0x5d3af7(_0x239719._0x5b5156)](_0x5d3af7(0xca)+_0x1ccf9f);}if(_0x311aaf['msg'][_0x5d3af7(_0x239719._0x481ac0)](_0x5d3af7(_0x239719._0xdf087e))&_0x311aaf['isMaster']){let _0x395dcc=_0x311aaf['msg'][_0x5d3af7(_0x239719._0x4da9af)](/#删除预设/g,'')[_0x5d3af7(0xa4)]();_0x395dcc=Number(_0x395dcc);if(_0x395dcc<shuju['shuju'][_0x5d3af7(_0x239719._0x1cefbe)]+0x1){shuju[_0x5d3af7(_0x239719._0x75ac19)][_0x5d3af7(_0x239719._0x105a59)](_0x395dcc-0x1,0x1);var _0x4b0291=JSON[_0x5d3af7(0xa2)](shuju);}_0x1babc3[_0x5d3af7(_0x239719._0x466815)](_0x1b56ed,_0x4b0291,function(_0x290d3d){const _0x388bbc=_0x5d3af7;_0x290d3d&&console[_0x388bbc(_0xeead6b._0x471b92)](_0x290d3d),_0x311aaf[_0x388bbc(_0xeead6b._0x4429e0)](_0x388bbc(0xfd));});}if(_0x311aaf['msg'][_0x5d3af7(0xec)](_0x5d3af7(0x14f))&_0x311aaf[_0x5d3af7(0xd6)]&yushekg==0x0){yushekg=0x1,ys[0x0]=_0x311aaf[_0x5d3af7(_0x239719._0x1d9826)]['replace'](/#新增预设/g,'')[_0x5d3af7(0xa4)](),_0x311aaf[_0x5d3af7(_0x239719._0x4aedde)]('请添加预设关键词');return;}if(yushekg==0x1&_0x311aaf[_0x5d3af7(_0x239719._0x48e1a7)]){yushekg=0x0,ys[0x1]=_0x311aaf['msg'];let _0x26ae9f={'name':ys[0x0],'gjc':ys[0x1]};shuju[_0x5d3af7(0x112)][_0x5d3af7(0xd9)](_0x26ae9f),console['log'](shuju);var _0x4b0291=JSON[_0x5d3af7(_0x239719._0x1ad73f)](shuju);_0x1babc3[_0x5d3af7(0x15a)](_0x1b56ed,_0x4b0291,_0x407b1d=>{const _0x33a339=_0x5d3af7;if(_0x407b1d)throw _0x407b1d;console[_0x33a339(0xeb)](_0x33a339(_0x43e83c._0x29cbba)),_0x311aaf[_0x33a339(_0x43e83c._0x25c390)](_0x33a339(_0x43e83c._0x4876e7));});return;}}async[_0x5a64a5(0x119)](_0x19fec3){const _0x4f0e1b={_0x26589a:0x14d,_0x4d235e:0x135,_0x184679:0x129,_0x4c755b:0xa4,_0x1367f1:0x11a,_0x558f97:0x113,_0x5b3eee:0xc7,_0x128401:0xd6,_0x365618:0xc4,_0x2ba9db:0xed,_0x3674b7:0x178},_0x2fbe04=_0x5a64a5;_0x19fec3['msg'][_0x2fbe04(0xec)](_0x2fbe04(_0x4f0e1b._0x26589a))&_0x19fec3[_0x2fbe04(0xd6)]&&(_0x19fec3['reply'](_0x2fbe04(_0x4f0e1b._0x4d235e)),pc=_0x19fec3[_0x2fbe04(_0x4f0e1b._0x184679)][_0x2fbe04(0x115)](/#新增屏蔽词/g,'')[_0x2fbe04(_0x4f0e1b._0x4c755b)]()),_0x19fec3[_0x2fbe04(0x129)]==_0x2fbe04(_0x4f0e1b._0x1367f1)&_0x19fec3[_0x2fbe04(0xd6)]&&_0x19fec3[_0x2fbe04(0xc4)]([_0x2fbe04(0x104),pc]),_0x19fec3['msg']['includes']('#删除屏蔽词')&_0x19fec3['isMaster']&&(_0x19fec3[_0x2fbe04(0xc4)](_0x2fbe04(_0x4f0e1b._0x558f97)+_0x2fbe04(_0x4f0e1b._0x5b3eee)),pc=''),_0x19fec3[_0x2fbe04(0x129)]['includes'](_0x2fbe04(0x16d))&_0x19fec3[_0x2fbe04(_0x4f0e1b._0x128401)]&&(_0x19fec3[_0x2fbe04(_0x4f0e1b._0x365618)](_0x2fbe04(_0x4f0e1b._0x2ba9db)),pc=_0x2fbe04(_0x4f0e1b._0x3674b7));}async[_0x5a64a5(0x15c)](_0x19d1d0){const _0x39a1d7={_0x3f4f1c:0x129,_0x34c652:0xd6,_0x39952a:0xa0,_0x4bfcac:0xc4,_0x1983fb:0xec,_0x2c302f:0xe4,_0x2bb1e2:0xd4,_0x14ed77:0x144,_0x140081:0xec,_0x126f5a:0xd6,_0x1494b7:0x115,_0x541bba:0xa4,_0x1ab379:0xd4,_0x3b57af:0x153,_0x24bc55:0xa1,_0x43bce1:0xd6,_0x5a579d:0xe4,_0x138074:0xec,_0x3b3c71:0xec,_0x23168d:0xe4,_0x5b4ef5:0x129,_0x3692fe:0x12c,_0x479cad:0xeb,_0x354be7:0xd7,_0x49417f:0x129,_0x16c00f:0xbf,_0x4e7575:0x129,_0x25105b:0xb4},_0x1632c2=_0x5a64a5;_0x19d1d0[_0x1632c2(_0x39a1d7._0x3f4f1c)]==_0x1632c2(0xbc)&_0x19d1d0[_0x1632c2(_0x39a1d7._0x34c652)]&&(_0x19d1d0[_0x1632c2(0xc4)](_0x1632c2(0x14b)),ss=_0x1632c2(0xc6));_0x19d1d0[_0x1632c2(0x129)]==_0x1632c2(_0x39a1d7._0x39952a)&_0x19d1d0[_0x1632c2(0xd6)]&&(_0x19d1d0[_0x1632c2(_0x39a1d7._0x4bfcac)](_0x1632c2(0xae)),ss='safe-diffusion');await dqpz();if(_0x19d1d0['msg']['includes'](_0x1632c2(0x103))&_0x19d1d0['isMaster']){nr[0x3]=0x0,nr[0x0]=0x0,_0x1babc3[_0x1632c2(0xe4)](Path,nr[_0x1632c2(0xf6)](),_0x1632c2(0xd4)),cd=0x0,kg2=0x0,kg=0x0,sc=0x0,iscd=0x0,_0x19d1d0[_0x1632c2(_0x39a1d7._0x4bfcac)]('已关闭画图冷却');return;}if(_0x19d1d0[_0x1632c2(0x129)][_0x1632c2(_0x39a1d7._0x1983fb)]('#土块画图冷却开启')&_0x19d1d0[_0x1632c2(0xd6)]){nr[0x0]=0x7530,nr[0x3]=0x1,_0x1babc3[_0x1632c2(_0x39a1d7._0x2c302f)](Path,nr[_0x1632c2(0xf6)](),_0x1632c2(_0x39a1d7._0x2bb1e2)),cd=0x7530,_0x19d1d0[_0x1632c2(0xc4)](_0x1632c2(_0x39a1d7._0x14ed77));return;}if(_0x19d1d0[_0x1632c2(_0x39a1d7._0x3f4f1c)][_0x1632c2(_0x39a1d7._0x140081)](_0x1632c2(0xdf))&_0x19d1d0[_0x1632c2(_0x39a1d7._0x126f5a)]){let _0x4fc829=_0x19d1d0['msg'][_0x1632c2(_0x39a1d7._0x1494b7)](/#土块画图冷却/g,'')[_0x1632c2(_0x39a1d7._0x541bba)]();cd=Number(_0x4fc829)*0x3e8,nr[0x0]=cd,nr[0x3]=0x1,_0x1babc3[_0x1632c2(_0x39a1d7._0x2c302f)](Path,nr[_0x1632c2(0xf6)](),_0x1632c2(_0x39a1d7._0x1ab379)),_0x19d1d0['reply'](_0x1632c2(_0x39a1d7._0x3b57af)+_0x4fc829+'秒');}if(_0x19d1d0['msg'][_0x1632c2(0xec)](_0x1632c2(_0x39a1d7._0x24bc55))&_0x19d1d0[_0x1632c2(_0x39a1d7._0x43bce1)]){nr[0x2]=0x0,_0x1babc3[_0x1632c2(_0x39a1d7._0x5a579d)](Path,nr['toString'](),_0x1632c2(0xd4)),isch=0x0,_0x19d1d0[_0x1632c2(0xc4)]('已关闭画图撤回');return;}if(_0x19d1d0[_0x1632c2(0x129)][_0x1632c2(_0x39a1d7._0x138074)]('#土块画图撤回开启')&_0x19d1d0[_0x1632c2(0xd6)]){isch=0x1,nr[0x1]=0x7530,nr[0x2]=0x1,_0x1babc3['writeFileSync'](Path,nr['toString'](),'utf-8'),timeout=0x7530,_0x19d1d0[_0x1632c2(_0x39a1d7._0x4bfcac)]('已开启画图撤回，撤回时间为30秒');return;}if(_0x19d1d0[_0x1632c2(_0x39a1d7._0x3f4f1c)][_0x1632c2(_0x39a1d7._0x3b3c71)](_0x1632c2(0xcb))&_0x19d1d0[_0x1632c2(_0x39a1d7._0x126f5a)]){isch=0x1;let _0x2e2061=_0x19d1d0[_0x1632c2(0x129)][_0x1632c2(0x115)](/#土块画图撤回/g,'')['trim']();timeout=Number(_0x2e2061)*0x3e8,nr[0x1]=timeout,nr[0x2]=0x1,_0x1babc3[_0x1632c2(_0x39a1d7._0x23168d)](Path,nr[_0x1632c2(0xf6)](),_0x1632c2(0xd4)),_0x19d1d0['reply']('已设置撤回时间为'+_0x2e2061+'秒');}_0x19d1d0[_0x1632c2(_0x39a1d7._0x5b4ef5)]==_0x1632c2(_0x39a1d7._0x3692fe)&&(kg=0x0,sc=0x0,zt=0x0,id='',console[_0x1632c2(_0x39a1d7._0x479cad)](_0x1632c2(_0x39a1d7._0x354be7)),kg2=0x0,_0x19d1d0[_0x1632c2(0xc4)]('已取消当前画图')),_0x19d1d0[_0x1632c2(_0x39a1d7._0x49417f)]==_0x1632c2(_0x39a1d7._0x16c00f)&_0x19d1d0[_0x1632c2(_0x39a1d7._0x34c652)]&&(_0x19d1d0[_0x1632c2(_0x39a1d7._0x4bfcac)](_0x1632c2(0x163)),zr=0x0),_0x19d1d0[_0x1632c2(_0x39a1d7._0x4e7575)]==_0x1632c2(0xf8)&_0x19d1d0['isMaster']&&(_0x19d1d0[_0x1632c2(0xc4)](_0x1632c2(_0x39a1d7._0x25105b)),zr=0x1);}async['huatu3'](_0x40ff4c){const _0x2e6260={_0x1dee30:0xe5,_0x18a867:0xec,_0x1a97f2:0xfe,_0x4d6a14:0x129,_0x391e88:0xbb,_0x2cf7b6:0x12f,_0x160362:0x174,_0x355795:0x131,_0x5b0204:0x126,_0x16c525:0xeb,_0xd6925d:0xbe,_0x47f992:0x177,_0x202f03:0xc4,_0x1139b2:0xe5,_0x4a17e8:0x129,_0x4f0a8e:0xa4,_0x455183:0x154,_0x57db40:0xce,_0x2bddda:0x115,_0x39fc0f:0xfe,_0x3ec07e:0x152,_0x319b3d:0x13b,_0x2639f6:0xc4,_0x8acfec:0xf6,_0x3f58dd:0x114,_0x3feb6b:0x169,_0x516287:0xeb,_0x2c3458:0xb0,_0x4535d5:0x147,_0x53b1ff:0x11d,_0x4c4f29:0x17b,_0x5a2f81:0xd2,_0x2666f0:0xd1,_0x38a026:0x147,_0x585507:0xeb,_0x414ccf:0x108,_0x31f74a:0xc4,_0x294a45:0xaa,_0x4515c1:0x12b,_0x4dcb8d:0x159,_0x49d2fa:0xc8,_0x19e1d2:0x159,_0x5eb8cf:0x168,_0x49c1a0:0x167,_0x2b92bb:0x12e,_0x35cb23:0x138,_0x8b4358:0x176,_0x9c01ba:0x110,_0x273fd2:0x10e,_0x5bed0e:0xeb,_0xe55c0a:0x140,_0x44ad5b:0x140,_0x5329eb:0x121,_0x31764e:0xc4,_0x45913a:0x107,_0x50cb0e:0x10f,_0x347c34:0x129,_0x2154f5:0xc9,_0x3092f9:0xc4,_0x13ef71:0xc0},_0x633c31={_0x45c417:0x150},_0xb743ce={_0x435f2a:0x141},_0x3e112d=_0x5a64a5;if(_0x40ff4c[_0x3e112d(0xe5)]!=undefined&zt==0x0&mfkg==0x0)return![];if(_0x40ff4c[_0x3e112d(_0x2e6260._0x1dee30)]==undefined&_0x40ff4c[_0x3e112d(0x129)]!=undefined){if(_0x40ff4c['msg'][_0x3e112d(_0x2e6260._0x18a867)](_0x3e112d(_0x2e6260._0x1a97f2))==![]&_0x40ff4c[_0x3e112d(_0x2e6260._0x1dee30)]==undefined&zt==0x0&_0x40ff4c[_0x3e112d(_0x2e6260._0x4d6a14)][_0x3e112d(_0x2e6260._0x18a867)](_0x3e112d(0x170))==![]&mfkg==0x0)return![];}mfkg==0x0&_0x40ff4c['msg']==_0x3e112d(0x170)&&(mfkg=0x1,mfid=_0x40ff4c['user_id'],_0x40ff4c['reply'](_0x3e112d(_0x2e6260._0x391e88)),mf=setTimeout(()=>{const _0x4a75b9=_0x3e112d;if(mfkg==0x1){mfkg=0x0,_0x40ff4c[_0x4a75b9(0xc4)](_0x4a75b9(_0xb743ce._0x435f2a));return;}},0x3a98));if(_0x40ff4c['img']!=undefined&mfkg==0x1&mfid==_0x40ff4c[_0x3e112d(0x14c)]){clearTimeout(mf),_0x40ff4c['reply'](_0x3e112d(0x102)),mfkg=0x0,mfid='';let _0x5d16d0=_0x3e112d(_0x2e6260._0x2cf7b6);console[_0x3e112d(0xeb)](_0x40ff4c[_0x3e112d(_0x2e6260._0x1dee30)]),_0x5d16d0=_0x5d16d0+_0x40ff4c[_0x3e112d(0xe5)][0x0],res=await _0xe40393(_0x5d16d0,{'method':_0x3e112d(_0x2e6260._0x160362),'headers':{'Content-Type':_0x3e112d(_0x2e6260._0x355795),'User-Agent':'Mozilla/5.0\x20(Windows\x20NT\x206.1;\x20WOW64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/86.0.4240.198\x20Safari/537.36'}});let _0x28d788=await res[_0x3e112d(0x10e)]();console[_0x3e112d(0xeb)](_0x3e112d(_0x2e6260._0x5b0204)+_0x28d788),console[_0x3e112d(_0x2e6260._0x16c525)](_0x28d788);if(_0x28d788!=undefined)_0x40ff4c[_0x3e112d(0xc4)](_0x28d788[_0x3e112d(_0x2e6260._0xd6925d)],!![]),_0x28d788[_0x3e112d(_0x2e6260._0x47f992)]==-0x1&&(_0x40ff4c[_0x3e112d(_0x2e6260._0x202f03)]('访问失败了,QAQ,TvT'),mfkg=0x0,mfid='');else{}}if(_0x40ff4c[_0x3e112d(0xe5)]==undefined&zt==0x1)return![];if(_0x40ff4c[_0x3e112d(_0x2e6260._0x1139b2)]==undefined&_0x40ff4c[_0x3e112d(0x129)]!=undefined){dqpz();if(_0x40ff4c['msg']['includes'](_0x3e112d(0x10a))&_0x40ff4c[_0x3e112d(0xd6)]){xsd=Number(_0x40ff4c[_0x3e112d(_0x2e6260._0x4a17e8)][_0x3e112d(0x115)](/#以图生草相似度/g,'')[_0x3e112d(_0x2e6260._0x4f0a8e)]())/0x64,_0x40ff4c['reply'](_0x3e112d(_0x2e6260._0x455183)+String(xsd)),console[_0x3e112d(0xeb)](xsd);return;}if(_0x40ff4c[_0x3e112d(_0x2e6260._0x4d6a14)]['includes'](_0x3e112d(_0x2e6260._0x57db40))&_0x40ff4c[_0x3e112d(0xd6)]){jz=Number(_0x40ff4c[_0x3e112d(_0x2e6260._0x4a17e8)][_0x3e112d(_0x2e6260._0x2bddda)](/#以图生草降噪/g,'')['trim']())/0x64,_0x40ff4c['reply']('当前降噪'+String(jz)),console['log'](jz);return;}if(zt==0x0&&sc==0x0&&_0x40ff4c['msg'][_0x3e112d(0xec)](_0x3e112d(_0x2e6260._0x39fc0f))){if(_0x40ff4c[_0x3e112d(0x13c)]){_0x40ff4c[_0x3e112d(0xc4)]('以图生草暂不支持私聊');return;}_0x40ff4c[_0x3e112d(0xc4)](_0x3e112d(_0x2e6260._0x3ec07e));return;dqpz();let _0x4bd5bd='';try{_0x4bd5bd=_0x1babc3[_0x3e112d(0x169)](_0x3e112d(_0x2e6260._0x319b3d));}catch{_0x40ff4c[_0x3e112d(_0x2e6260._0x2639f6)]('你还没有填写密钥哦。');return;}_0x4bd5bd=_0x4bd5bd[_0x3e112d(_0x2e6260._0x8acfec)]();let _0x14985a=_0x3f2432[_0x3e112d(_0x2e6260._0x3f58dd)](_0x1babc3[_0x3e112d(_0x2e6260._0x3feb6b)]('./config/config/other.yaml',_0x3e112d(0x137)));_0x14985a=_0x14985a['masterQQ'][0x0];try{let _0x35ad6e=_0x3e112d(0xa3)+_0x4bd5bd+'&qq='+String(_0x14985a);res=await _0xe40393(_0x35ad6e),console['log']('访问成功了');}catch(_0x244791){console[_0x3e112d(_0x2e6260._0x516287)](_0x244791),console[_0x3e112d(0xeb)](_0x3e112d(_0x2e6260._0x2c3458));}res=await res[_0x3e112d(_0x2e6260._0x4535d5)]();if(res[_0x3e112d(0xec)](_0x3e112d(_0x2e6260._0x53b1ff))==![]){_0x40ff4c[_0x3e112d(0xc4)](_0x3e112d(_0x2e6260._0x4c4f29)),console[_0x3e112d(0xeb)](res);return;}console[_0x3e112d(0xeb)](_0x3e112d(0x16f)),id=_0x40ff4c['user_id'],gjc2=_0x40ff4c[_0x3e112d(0x129)][_0x3e112d(0x115)](/#以图生草/g,'')[_0x3e112d(0xa4)]();var _0x19186f=new RegExp('[\x5cu4E00-\x5cu9FFF]+','g');if(_0x19186f[_0x3e112d(_0x2e6260._0x5a2f81)](gjc2)){console['log']('包含中文');let _0x373446=_0x3e112d(_0x2e6260._0x2666f0)+gjc2,_0x25a585=await _0xe40393(_0x373446),_0x42e8bc=await _0x25a585[_0x3e112d(_0x2e6260._0x38a026)]();_0x42e8bc=_0x42e8bc['replace'](/有道翻译查询结果/g,'')[_0x3e112d(0xa4)](),_0x42e8bc=_0x42e8bc['replace'](/翻译后/g,'')[_0x3e112d(_0x2e6260._0x4f0a8e)](),_0x42e8bc=_0x42e8bc[_0x3e112d(0x115)](/翻译前/g,'')['trim'](),_0x42e8bc=_0x42e8bc[_0x3e112d(_0x2e6260._0x2bddda)](/：/g,'')[_0x3e112d(_0x2e6260._0x4f0a8e)](),_0x42e8bc=_0x42e8bc[_0x3e112d(_0x2e6260._0x2bddda)](new RegExp(gjc2,'g'),''),gjc2=_0x42e8bc,console[_0x3e112d(_0x2e6260._0x516287)](gjc2);}else console[_0x3e112d(_0x2e6260._0x585507)](_0x3e112d(_0x2e6260._0x414ccf));zt=0x1,ycqx=setTimeout(()=>{const _0x8dd9=_0x3e112d;if(zt==0x1){zt=0x0,_0x40ff4c[_0x8dd9(0xc4)](_0x8dd9(_0x633c31._0x45c417));return;}},0x7530),_0x40ff4c[_0x3e112d(_0x2e6260._0x31f74a)]([segment['at'](id),'请发送图片']);return;}}if(sc==0x0&_0x40ff4c[_0x3e112d(_0x2e6260._0x294a45)]&zt==0x1&_0x40ff4c['img']!=undefined){clearTimeout(ycqx);return;if(_0x40ff4c[_0x3e112d(0x14c)]==id&zt==0x1){sc=0x1;let _0x30783f=await imgUrlToBase64(_0x40ff4c[_0x3e112d(_0x2e6260._0x1dee30)][0x0]['replace'](/https/g,_0x3e112d(0x10c))[_0x3e112d(0xa4)]()),_0x139080=_0x30783f[_0x3e112d(_0x2e6260._0x4515c1)],_0x3ad5aa=Math['floor'](Math[_0x3e112d(0xea)]()*0xb6cff090);var _0x313d8a={'fn_index':0x7e,'data':[0x0,gjc2,pc,_0x3e112d(_0x2e6260._0x4dcb8d),'None',_0x3e112d(0x16c)+_0x139080,null,null,null,_0x3e112d(0xf1),0x32,_0x3e112d(_0x2e6260._0x49d2fa),0x4,_0x3e112d(0x15f),![],![],0x1,0x1,0x7,0.5,-0x1,-0x1,0x0,0x0,0x0,![],0x300,0x200,_0x3e112d(0xb2),![],0x20,'Inpaint\x20masked','','',_0x3e112d(_0x2e6260._0x4dcb8d),0.9,0x5,_0x3e112d(0xe0),![],_0x3e112d(_0x2e6260._0x19e1d2),'',0.1,![],_0x3e112d(_0x2e6260._0x5eb8cf),!![],!![],'','',!![],0x32,!![],0x1,0x0,![],0x4,0x1,_0x3e112d(0x116),0x80,0x8,[_0x3e112d(0xd0),_0x3e112d(_0x2e6260._0x49c1a0),'up',_0x3e112d(0xad)],0x1,0.05,0x80,0x4,_0x3e112d(_0x2e6260._0x2b92bb),['left','right','up',_0x3e112d(0xad)],![],![],![],'',_0x3e112d(_0x2e6260._0x35cb23),0x40,_0x3e112d(0x159),_0x3e112d(_0x2e6260._0x8b4358),'','Nothing','',!![],![],![],null,'',''],'session_hash':_0x3e112d(0x149)};_0x40ff4c[_0x3e112d(0xc4)](_0x3e112d(_0x2e6260._0x9c01ba)),zt=0x0;let _0x5bc777=await res[_0x3e112d(_0x2e6260._0x273fd2)]();console[_0x3e112d(_0x2e6260._0x5bed0e)](_0x5bc777[_0x3e112d(0x10d)][0x0][0x0][_0x3e112d(_0x2e6260._0xe55c0a)]),_0x5bc777=_0x5bc777[_0x3e112d(0x10d)][0x0][0x0][_0x3e112d(_0x2e6260._0x44ad5b)],msg2=[segment['at'](_0x40ff4c['user_id']),segment[_0x3e112d(_0x2e6260._0x5329eb)](urrl)],await sleep(0x1f4);let _0x575262=await _0x40ff4c[_0x3e112d(_0x2e6260._0x31764e)](msg2);iscd=0x1,console[_0x3e112d(0xeb)](_0x575262['message_id'],isch);if(_0x575262&&_0x575262[_0x3e112d(0x10b)]&&isch==0x1&&_0x40ff4c['isGroup']){let _0x44de4c=_0x40ff4c[_0x3e112d(_0x2e6260._0x45913a)];setTimeout(()=>{const _0x1bb418=_0x3e112d;_0x44de4c[_0x1bb418(0x16e)](_0x575262[_0x1bb418(0x10b)]);},timeout);}startTimeMS=new Date()[_0x3e112d(_0x2e6260._0x50cb0e)](),t=setTimeout(()=>{iscd=0x0,sc=0x0,id='';},cd);}}else{if(_0x40ff4c[_0x3e112d(0xe5)]==undefined&_0x40ff4c[_0x3e112d(0x129)]!=undefined){return;if(_0x40ff4c[_0x3e112d(_0x2e6260._0x347c34)][_0x3e112d(0xec)]('#以图生草')){if(iscd==0x1){console['log'](iscd);let _0x547521=cd-(new Date()['getTime']()-startTimeMS);_0x547521=Math[_0x3e112d(0xdd)](_0x547521/0x3e8);if(_0x547521<0x0){sc=0x0,id='';return;}_0x40ff4c[_0x3e112d(0xc4)]('我在cd中，还有'+String(_0x547521)+_0x3e112d(_0x2e6260._0x2154f5));}else _0x40ff4c[_0x3e112d(_0x2e6260._0x3092f9)](_0x3e112d(_0x2e6260._0x13ef71));}}}}async[_0x5a64a5(0xe9)](_0x4bfd37){const _0x14f567={_0x22e5ab:0xec,_0x87e575:0xd6,_0x515339:0xc4,_0x2547a8:0x17e,_0xa7b1ed:0x129,_0x5795a7:0xec,_0x593aee:0x115,_0x511d2a:0xa4,_0x43506a:0xc2,_0x2cf2c4:0xd6,_0x4a4f89:0xd2,_0x4f99c8:0xeb,_0xc7e493:0x147,_0x2f41ef:0xa4,_0x1e7617:0x115,_0x27290d:0xa4,_0x4a6ddc:0x10e,_0xe04824:0x10d,_0x56d9d0:0x164,_0x45bfa8:0xeb,_0x5c6520:0x155,_0x47cbdb:0xa4,_0x965532:0x166,_0x127b48:0x143,_0x5c7356:0xe1,_0xdb9173:0xea,_0x507d1c:0xeb,_0x5f5d0d:0xb8,_0x3530be:0x159,_0x2759a9:0xc8,_0x330cd8:0x159,_0x292631:0x176,_0x10c0eb:0x159,_0x21eb60:0x176,_0x1a468e:0x11e,_0x243d13:0xf6,_0x367122:0x120,_0x75427a:0x169,_0x2a0312:0x114,_0x13d6c3:0xba,_0x52a654:0x148,_0x5561e3:0x17a,_0x9c8b27:0xeb,_0x475553:0x147,_0x1c4b47:0xb0,_0xe9ef89:0x111,_0x4644dc:0xe8,_0x2f4e1e:0xf0,_0x172b90:0x131,_0x42dc36:0xf4,_0x251488:0xc4,_0x29041a:0xb9,_0x10b3f7:0xc4,_0x5df426:0xef,_0x4d35b8:0xa4,_0x5ec3cf:0x15a,_0x263a08:0x109,_0x35608d:0x160,_0x336716:0x121,_0x16bcb1:0x109,_0x2feda0:0xdd,_0x111e65:0x173,_0x55fefe:0xc4},_0x2b7849={_0x74fd6:0x16e},_0x1bd750={_0xe6d9b3:0x132},_0x37a2e8={_0x5eb17d:0x114,_0x21694d:0xf9,_0xf30ebe:0xda,_0x23e72e:0xe6},_0x491f31=_0x5a64a5;dqpz();if(_0x4bfd37[_0x491f31(0x129)][_0x491f31(_0x14f567._0x22e5ab)]('#土块画图预设')&!_0x4bfd37[_0x491f31(_0x14f567._0x87e575)]){_0x4bfd37[_0x491f31(_0x14f567._0x515339)](_0x491f31(_0x14f567._0x2547a8));return;}let _0x3d0412,_0x45759b,_0x38aa68;_0x4bfd37[_0x491f31(_0x14f567._0xa7b1ed)][_0x491f31(_0x14f567._0x5795a7)]('#土块画图预设')==![]&&(_0x38aa68=_0x4bfd37['msg'][_0x491f31(_0x14f567._0x593aee)](/#绘个图/g,'')[_0x491f31(_0x14f567._0x511d2a)]());if(kg2==0x0&_0x4bfd37[_0x491f31(0xaa)]|_0x4bfd37[_0x491f31(_0x14f567._0x87e575)]){kg2==0x1&&_0x4bfd37[_0x491f31(0xc4)](_0x491f31(_0x14f567._0x43506a));if(zr==0x1&!_0x4bfd37[_0x491f31(_0x14f567._0x2cf2c4)]){_0x4bfd37[_0x491f31(0xc4)](_0x491f31(0xa8));return;}kg2=0x1;let _0x24b6b1=_0x38aa68;var _0x7aa6f2=new RegExp(_0x491f31(0xf9),'g');if(_0x7aa6f2[_0x491f31(_0x14f567._0x4a4f89)](_0x24b6b1)){console[_0x491f31(_0x14f567._0x4f99c8)]('包含中文');let _0x1acf36=_0x491f31(0xd1)+_0x24b6b1,_0x528cc8=await _0xe40393(_0x1acf36),_0x54b4e3=await _0x528cc8[_0x491f31(_0x14f567._0xc7e493)]();_0x54b4e3=_0x54b4e3[_0x491f31(_0x14f567._0x593aee)](/有道翻译查询结果/g,'')[_0x491f31(_0x14f567._0x2f41ef)](),_0x54b4e3=_0x54b4e3[_0x491f31(_0x14f567._0x593aee)](/翻译后/g,'')[_0x491f31(0xa4)](),_0x54b4e3=_0x54b4e3[_0x491f31(0x115)](/翻译前/g,'')[_0x491f31(_0x14f567._0x2f41ef)](),_0x54b4e3=_0x54b4e3[_0x491f31(_0x14f567._0x1e7617)](/：/g,'')[_0x491f31(_0x14f567._0x27290d)](),_0x54b4e3=_0x54b4e3['replace'](new RegExp(_0x24b6b1,'g'),''),res4=_0x54b4e3;if(res4==''){let _0x584401='\x20http://www.iinside.cn:7001/api_req?reqmode=nmt_mt5_jez&password=3652&text='+_0x38aa68+_0x491f31(0x128);res4=await _0xe40393(_0x584401),res4=await res4[_0x491f31(_0x14f567._0x4a6ddc)](),res4=res4[_0x491f31(_0x14f567._0xe04824)];}if(res4==''){let _0x58183e=_0x491f31(_0x14f567._0x56d9d0)+_0x38aa68;res4=await _0xe40393(_0x58183e),res4=await res4[_0x491f31(_0x14f567._0x4a6ddc)](),res4=res4[_0x491f31(0x180)];}console[_0x491f31(_0x14f567._0x45bfa8)](res4);}else console[_0x491f31(0xeb)]('是英文'),res4=_0x24b6b1;let _0x25b75a,_0x2d79da;if(_0x4bfd37[_0x491f31(_0x14f567._0xa7b1ed)][_0x491f31(0xec)](_0x491f31(_0x14f567._0x5c6520))&_0x4bfd37[_0x491f31(0xd6)]){_0x45759b=_0x4bfd37[_0x491f31(0x129)][_0x491f31(0x115)](/#土块画图预设/g,'')[_0x491f31(_0x14f567._0x47cbdb)]();let _0x3c46b2=ml+_0x491f31(_0x14f567._0x965532);await _0x1babc3['readFile'](_0x3c46b2,(_0x84f991,_0x5028bf)=>{const _0x4a191f=_0x491f31;_0x3d0412=JSON[_0x4a191f(_0x37a2e8._0x5eb17d)](_0x5028bf['toString']()),_0x2d79da=_0x3d0412['shuju'];var _0x1dd1b2=new RegExp(_0x4a191f(_0x37a2e8._0x21694d),'g');if(_0x1dd1b2['test'](_0x45759b))console[_0x4a191f(0xeb)](_0x4a191f(_0x37a2e8._0xf30ebe)),_0x25b75a=_0x2d79da['findIndex'](_0x1e43b9=>_0x1e43b9[_0x4a191f(0x140)]==_0x45759b);else{_0x25b75a=Number(_0x45759b)-0x1;if(_0x25b75a>_0x2d79da[_0x4a191f(_0x37a2e8._0x23e72e)]){_0x25b75a=-0x1;return;}}}),await sleep(0x1f4),console['log'](_0x25b75a);if(_0x25b75a!=-0x1)res4=_0x2d79da[_0x25b75a][_0x491f31(0x17c)];else{_0x4bfd37[_0x491f31(_0x14f567._0x515339)](_0x491f31(_0x14f567._0x127b48));return;}}await sleep(0x1f4),_0x4bfd37[_0x491f31(0xc4)](_0x491f31(_0x14f567._0x5c7356));let _0x562b2f=Math['floor'](Math[_0x491f31(_0x14f567._0xdb9173)]()*0x2);_0x562b2f==0x0&&(changdu=0x200,kuandu=0x300);_0x562b2f==0x1&&(changdu=0x300,kuandu=0x200);console[_0x491f31(_0x14f567._0x507d1c)](_0x562b2f),console['log'](res4);var _0x55139c=_0x491f31(_0x14f567._0x5f5d0d),_0xe0b014=[res4,pc,_0x491f31(0x159),_0x491f31(_0x14f567._0x3530be),0x14,_0x491f31(_0x14f567._0x2759a9),![],![],0x1,0x1,0x7,-0x1,-0x1,0x0,0x0,0x0,![],changdu,kuandu,![],![],0.7,_0x491f31(_0x14f567._0x330cd8),![],![],null,'',_0x491f31(_0x14f567._0x292631),'',_0x491f31(0x11e),'',!![],![],null,'',''],_0x5d3a4a=[res4,pc,'None',_0x491f31(_0x14f567._0x10c0eb),0x1c,_0x491f31(0xc8),![],![],0x1,0x1,0xb,-0x1,-0x1,0x0,0x0,0x0,![],0x200,0x200,![],![],0.7,_0x491f31(0x159),![],![],null,'',_0x491f31(_0x14f567._0x21eb60),'',_0x491f31(_0x14f567._0x1a468e),'',!![],![],null,'',''];let _0x3f14b6=_0x491f31(0xf0),_0x5bd3c0=Math[_0x491f31(0xde)](Math['random']()*0xb6cff090),_0x126d39='模型:'+moxing+'\x20\x20\x20|规模:'+guimo[_0x491f31(_0x14f567._0x243d13)]()+_0x491f31(_0x14f567._0x367122)+bushu[_0x491f31(0xf6)]()+'\x20\x20\x20\x20\x20\x20\x20\x20|seed:'+_0x5bd3c0[_0x491f31(0xf6)](),_0x5c8d05='';try{_0x5c8d05=_0x1babc3[_0x491f31(_0x14f567._0x75427a)]('./resources/th2.txt');}catch{_0x4bfd37[_0x491f31(0xc4)](_0x491f31(0x101));return;}_0x5c8d05=_0x5c8d05[_0x491f31(0xf6)]();let _0x5a050b=_0x3f2432[_0x491f31(_0x14f567._0x2a0312)](_0x1babc3[_0x491f31(0x169)]('./config/config/other.yaml',_0x491f31(0x137)));_0x5a050b=_0x5a050b[_0x491f31(_0x14f567._0x13d6c3)][0x0];try{_0x3f14b6=_0x491f31(0x13d)+res4+_0x491f31(0xf3)+_0x5c8d05+_0x491f31(0x117)+String(_0x5a050b)+_0x491f31(_0x14f567._0x52a654)+ss+'&width='+kuandu+_0x491f31(0xe7)+changdu+_0x491f31(_0x14f567._0x5561e3)+guimo+_0x491f31(0x124)+moxing+'&steps='+bushu+_0x491f31(0x105)+pc,res=await _0xe40393(_0x3f14b6),console[_0x491f31(_0x14f567._0x9c8b27)]('访问成功了');}catch(_0xf60e5b){console[_0x491f31(0xeb)](_0xf60e5b),console[_0x491f31(0xeb)]('没有访问成功');}res=await res[_0x491f31(_0x14f567._0x475553)]();if(res=='{\x22error\x22:\x22unknown\x20error\x22}'){console[_0x491f31(0xeb)](_0x491f31(_0x14f567._0x1c4b47)),_0x3f14b6=dz2;return;}if(res[_0x491f31(_0x14f567._0x22e5ab)](_0x491f31(_0x14f567._0xe9ef89))){_0x4bfd37['reply'](_0x491f31(_0x14f567._0x4644dc)),kg2=0x0;return;}if(!res['includes']('event:\x20newImage')){let _0x43d790=_0x491f31(_0x14f567._0x2f4e1e);try{res=await _0xe40393(_0x43d790,{'method':_0x491f31(0xd8),'agent':isdl?await getAgent():'','headers':{'Content-Type':_0x491f31(_0x14f567._0x172b90),'authorization':'Bearer\x20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImlRWFFJd1N1TVhsNGp6ZHVQN0J4OCIsIm5jIjoiSm1Ba0wtcWFidkF0YzRpTXZRQUROIiwiaWF0IjoxNjY4MzkxODQ0LCJleHAiOjE2NzA5ODM4NDR9.hlnDHc0oN6kUXcPX37RSydvuduQME7rifex2nuzbqbM'},'body':JSON[_0x491f31(0xa2)]({'input':_0x491f31(_0x14f567._0x42dc36)+res4,'model':ss,'parameters':{'width':kuandu,'height':changdu,'scale':guimo,'sampler':moxing,'steps':bushu,'seed':_0x5bd3c0,'n_samples':0x1,'ucPreset':0x0,'uc':pc}})}),console[_0x491f31(_0x14f567._0x507d1c)](_0x491f31(0x133));}catch(_0x424d5f){console[_0x491f31(0xeb)](_0x424d5f),_0x4bfd37[_0x491f31(_0x14f567._0x251488)](_0x491f31(0x125)),kg2=0x0;return;}res=await res['text']();if(!res[_0x491f31(0xec)](_0x491f31(_0x14f567._0x29041a))){_0x4bfd37[_0x491f31(_0x14f567._0x10b3f7)](_0x491f31(_0x14f567._0x5df426)),kg2=0x0;return;}}res=res[_0x491f31(0x115)](/id: 1/g,'')[_0x491f31(_0x14f567._0x4d35b8)](),res=res[_0x491f31(_0x14f567._0x1e7617)](/event: newImage/g,'')['trim'](),res=res['replace'](/data:/g,'')['trim'](),await _0x1babc3[_0x491f31(_0x14f567._0x5ec3cf)](_0x491f31(_0x14f567._0x263a08),res[_0x491f31(0xf6)](),_0x491f31(_0x14f567._0x35608d),_0x57de16=>{const _0x44017d=_0x491f31;if(_0x57de16)console['log'](_0x44017d(_0x1bd750._0xe6d9b3));else{}});iscanshu==0x0&&(_0x126d39='');await sleep(0x1f4),msg2=[segment[_0x491f31(_0x14f567._0x336716)](_0x491f31(_0x14f567._0x16bcb1)),_0x126d39];let _0x5abf28=await _0x4bfd37['reply'](msg2,ishuifu);iscd=0x1,console[_0x491f31(_0x14f567._0x45bfa8)](_0x5abf28[_0x491f31(0x10b)],isch);if(_0x5abf28&&_0x5abf28[_0x491f31(0x10b)]&&isch==0x1&&_0x4bfd37[_0x491f31(0xaa)]){let _0x42c971=_0x4bfd37[_0x491f31(0x107)];setTimeout(()=>{const _0xf49669=_0x491f31;_0x42c971[_0xf49669(_0x2b7849._0x74fd6)](_0x5abf28['message_id']);},timeout);}startTimeMS=new Date()[_0x491f31(0x10f)](),t=setTimeout(()=>{kg2=0x0,iscd=0x0;},cd);}else{if(iscd==0x1){let _0x1af3ea=cd-(new Date()[_0x491f31(0x10f)]()-startTimeMS);_0x1af3ea=Math[_0x491f31(_0x14f567._0x2feda0)](_0x1af3ea/0x3e8);if(_0x1af3ea<0x0){kg2=0x0;return;}_0x4bfd37[_0x491f31(0xc4)](_0x491f31(_0x14f567._0x111e65)+String(_0x1af3ea)+'秒可画');}else _0x4bfd37[_0x491f31(_0x14f567._0x55fefe)](_0x491f31(0xe2));}}}async function imgUrlToBase64(_0x5e7bb6){const _0x391d2f={_0x45633f:0xb5,_0x35b4b4:0x179},_0x574989={_0x4ccca8:0xfa};let _0x5aaffc;return new Promise(function(_0x293185,_0x1fb8ba){const _0x2f5fe0=_0x91bf;let _0x1d3984=http[_0x2f5fe0(0x174)](_0x5e7bb6,function(_0x199e88){const _0x539318=_0x2f5fe0;var _0x24ea6b=[],_0x87f5ec=0x0;_0x199e88['on'](_0x539318(0x10d),function(_0x1d52d9){const _0x5bc868=_0x539318;_0x24ea6b[_0x5bc868(0xd9)](_0x1d52d9),_0x87f5ec+=_0x1d52d9[_0x5bc868(0xe6)];}),_0x199e88['on'](_0x539318(0x179),function(_0x4a50a4){const _0x241e62=_0x539318;var _0x1db2b7=Buffer[_0x241e62(0x15b)](_0x24ea6b,_0x87f5ec);_0x5aaffc=_0x1db2b7['toString']('base64'),_0x293185({'success':!![],'base64Img':_0x5aaffc});});});_0x1d3984['on'](_0x2f5fe0(_0x391d2f._0x45633f),_0x5f549d=>{const _0x552b5e=_0x2f5fe0;_0x293185({'success':![],'errmsg':_0x5f549d[_0x552b5e(_0x574989._0x4ccca8)]});}),_0x1d3984[_0x2f5fe0(_0x391d2f._0x35b4b4)]();});}function sleep(_0x14ffab){return new Promise(_0xf28f35=>setTimeout(_0xf28f35,_0x14ffab));}async function dqpz(){const _0x355787={_0x1ee057:0xeb},_0x54f2d1=_0x5a64a5;Path=ml+_0x54f2d1(0x12a),await _0x1babc3[_0x54f2d1(0x158)](Path,(_0x438610,_0x101ad5)=>{const _0x16ce1=_0x54f2d1;nr=_0x101ad5['toString'](),nr=nr[_0x16ce1(0x162)](','),cd=nr[0x0],timeout=nr[0x1],isch=nr[0x2],iscd=nr[0x3],console[_0x16ce1(_0x355787._0x1ee057)](cd,timeout,isch,iscd);}),await sleep(0x1f4);}function _0x91bf(_0x2b6e95,_0x59a8dd){const _0x192e92=_0x192e();return _0x91bf=function(_0x91bf10,_0x538fd2){_0x91bf10=_0x91bf10-0xa0;let _0x10276f=_0x192e92[_0x91bf10];return _0x10276f;},_0x91bf(_0x2b6e95,_0x59a8dd);}async function getAgent(){const _0x10a042={_0x326fc7:0xcf,_0x2415f3:0xa6},_0x25c33d={_0x1cebe3:0xb5},_0x327582=_0x5a64a5;let _0xcf9846=_0x35ca3b[_0x327582(_0x10a042._0x326fc7)][_0x327582(_0x10a042._0x2415f3)];if(!_0xcf9846)return null;if(_0xcf9846==='http://0.0.0.0:0')return null;HttpsProxyAgent===''&&(HttpsProxyAgent=await import('https-proxy-agent')[_0x327582(0xe3)](_0x4b06c0=>{const _0x62801=_0x327582;logger[_0x62801(_0x25c33d._0x1cebe3)](_0x4b06c0);}),HttpsProxyAgent=HttpsProxyAgent?HttpsProxyAgent[_0x327582(0x11b)]:undefined);if(HttpsProxyAgent)return new HttpsProxyAgent(_0xcf9846);return null;}