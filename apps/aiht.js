const _0x1e244c=_0x5f06;(function(_0x5cee07,_0x4414ed){const _0x1350ab={_0x3678fe:0xe5,_0x3c6648:0x108,_0x4c0e23:0x109,_0x3ca99d:0x155,_0x3c3ebe:0xf7},_0x15c315=_0x5f06,_0x2b6eb9=_0x5cee07();while(!![]){try{const _0x1c9bf6=parseInt(_0x15c315(_0x1350ab._0x3678fe))/0x1*(parseInt(_0x15c315(0xca))/0x2)+parseInt(_0x15c315(0xf0))/0x3+parseInt(_0x15c315(_0x1350ab._0x3c6648))/0x4+parseInt(_0x15c315(_0x1350ab._0x4c0e23))/0x5*(parseInt(_0x15c315(0xd3))/0x6)+parseInt(_0x15c315(_0x1350ab._0x3ca99d))/0x7+parseInt(_0x15c315(_0x1350ab._0x3c3ebe))/0x8+-parseInt(_0x15c315(0xb8))/0x9;if(_0x1c9bf6===_0x4414ed)break;else _0x2b6eb9['push'](_0x2b6eb9['shift']());}catch(_0x404313){_0x2b6eb9['push'](_0x2b6eb9['shift']());}}}(_0x929f,0x647d7));import{segment}from'oicq';import _0x399c91 from'node-fetch';import _0x216b5f,{chownSync}from'fs';import _0x40e892 from'../../../lib/config/config.js';import _0x27e0d4 from'../../../lib/puppeteer/puppeteer.js';let data1={};import{createRequire}from'module';function _0x929f(){const _0x458a1d=['k_euler','masterQQ','534NJOFaa','这个密钥已经被激活了，你想干嘛！','szgm','https://xiaobapi.top/api/xb/api/upload_image_tags.php?url=','k_lms','文件写入成功！','规模已设置为','^#开启代理|^#关闭代理|^#开启参数显示|^#关闭参数显示|^#开启词条回复|^#关闭词条回复','split','访问成功了','\x0a降噪：','&model=','isMaster','huatu2','mac','msg','/plugins/earth-k-plugin/resources/htys/ys.json','{\x22error\x22:\x22unknown\x20error\x22}','28109tsnGTe','你好号主','^#取消画图$|^#所有人可画$|^#仅我可画$|^#土块画图撤回(.*)$|^#土块画图冷却(.*)$|^#土块画图涩涩开启|^#土块画图涩涩关闭','md5','huatu3','writeFile','./config/config/other.yaml','已关闭词条回复','你还没有填写密钥哦。','message_id','http://119.29.118.238/diqiu.php?tk=','1844346eRUEAz','请添加预设关键词','当前屏蔽词有：','模型已设置为ddim','[\x5cu4E00-\x5cu9FFF]+','好吧，那就一起来吧！','createHash','4444904iIPWMD','includes','writeFileSync','#关闭代理','#新增预设','没有这个预设哦','已激活该密钥','hex','safe-diffusion','isPrivate','#以图生草相似度','#土块画图预设','kqdl','round','gjc','base64','readFileSync','777600ruxwAm','32285BkqHun','访问失败了,QAQ,TvT','qvht','image','floor','数字超过了预设个数','步数不在合理范围内，28以下为合理范围','message','update','default','findIndex','删除屏蔽词成功','nai-diffusion','address','user_id','json','ddim','/3.jpg','已开启画图冷却，冷却时间为30秒','#开启词条回复','密钥不存在','#所有人可画','已经取消','./resources/ht.png','魔法是：','请发送要查看魔法的图片,0.0','name','#开启代理','fanyi','#土块画图冷却','#删除预设','&order=zh2en','Euler\x20a','img','模型:','replace','已设置冷却时间为','#取消画图','以图生草','pbc','tags','步数已设置为','预设包含中文','该功能暂时不可用','好的，已开启，请注意身体哦','已设置撤回时间为','&uc=','^#土块画图步数(.*)|^#查看画图设置','请发送图片','#开启参数显示','#查看画图设置','&qq=','push','cwd','127.0.0.1','\x20\x0a步数:','已关闭画图撤回','text','readFile','networkInterfaces','模型已设置为plms','土块AI绘个图','isGroup','好的，我开始画图了，请稍等哦','post','szmx','00:00:00:00:00:00','已关闭画图冷却','&height=','lowres,nude,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry,\x20owres,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry','好的，已关闭了','#土块画图冷却开启','写入文件错误','#土块画图涩涩关闭','abc','Seed','2275007IHKtcW','开启代理成功','没有访问成功','./resources/th.txt','base64Img','szbs','http','toString','http://0.0.0.0:0','我没画成功，再来一次吧。','k_euler_ancestral','已开启参数显示','url','group','1：k_euler_ancestral,\x0a2：k_euler,\x0a3：k_lms,\x0a4：plms,\x0a5：ddim','写入文件成功','#删除屏蔽词','当前降噪','/plugins/earth-k-plugin/resources/pz/pz.txt','./3.jpg','新增屏蔽词成功','已开启词条回复','http://119.29.118.238:6690/generate-stream\x20','模型已设置为k_euler','splice','log','#以图生草','^#土块画图规模(.*)','ysgn','我知道你要干嘛！注意身体！','已关闭参数显示','data','utf8','#关闭词条回复','Mozilla/5.0\x20(Windows\x20NT\x206.1;\x20WOW64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/86.0.4240.198\x20Safari/537.36','#土块画图撤回开启','该密钥已被激活','https://api.sdgou.cc/api/fanyi/?msg=','好的，我开始以图生草了','#查看预设','#关闭参数显示','\x20http://www.iinside.cn:7001/api_req?reqmode=nmt_mt5_jez&password=3652&text=','plms','bot','application/json','tianxie','error','包含中文','family','utf-8','None','模型不在合理范围内，1-5为合理范围','trim','#查看所有模型','规模不在合理范围内，3-12为合理范围','你好号主，成功再次激活','random','http://119.29.118.238/dq.php?gjc=','./resources/th2.txt','parse','recallMsg','https://api.novelai.net/ai/generate-image\x20','已取消当前画图','#查看魔法','Steps','#新增屏蔽词','正在生草中，我知道你很急，先别急','19964511iqLGyt','event:\x20newImage','新增预设成功','#查看屏蔽词','#查看预设词条','#土块画图撤回','shuju','15秒还未发图，查看魔法已取消','&moxing=','reply','length','是英文','你还不能使用此功能哦，暂未激活。','^#绘个图(.*)$|#土块画图预设(.*)$','^#新增屏蔽词(.*)$|#查看屏蔽词$|#删除屏蔽词$|#开启默认屏蔽词$','成功了！','#土块画图涩涩开启','IPv4','26jlMCmc','test','秒可画','screenshot','删除预设成功','好的，权限已经关闭，只有你能画了','stringify'];_0x929f=function(){return _0x458a1d;};return _0x929f();}import _0x49c627 from'yaml';const require=createRequire(import.meta[_0x1e244c(0x161)]);let ysct,mf,mfkg=0x0,ml=process[_0x1e244c(0x13e)]();var http=require(_0x1e244c(0x15b));import _0x5b89c6 from'lodash';function _0x5f06(_0x2c0215,_0x402d43){const _0x929fc3=_0x929f();return _0x5f06=function(_0x5f06ee,_0x4c12e3){_0x5f06ee=_0x5f06ee-0x9e;let _0x756e49=_0x929fc3[_0x5f06ee];return _0x756e49;},_0x5f06(_0x2c0215,_0x402d43);}let yushekg=0x0,kg=0x0,guimo=5.5,kg2=0x0,mfid='',res4,htm='',htm2='',res5,res,zr=0x0,changdu=0x200,kuandu=0x200,msg2,timeout=0x7530,isch=0x1,cd=0x0,t,startTimeMS,iscd=0x0,my,dz,sj1,sj2,shuju,zt=0x0,gjc2,sc=0x0,bushu=0x1c,id='',xsd=0.4,nr,ycqx,jz=0.2,ss=_0x1e244c(0x115),Path,ys=[],moxing=_0x1e244c(0xd1),isdl=0x0,iscanshu=0x1,ishuifu=!![],HttpsProxyAgent='',pc='lowres,nude,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry,\x20owres,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry';export class aiht extends plugin{constructor(){const _0x4b6245={_0x57e5ff:0x146,_0x54e2ed:0x110,_0x51218e:0xc5,_0x5a48e4:0xe7,_0x36837d:0x10b,_0x13eac7:0xc6,_0x448f76:0x130,_0x315bb6:0xe9,_0x4cf0fb:0xd5,_0x2f1679:0x15a},_0xffdd1a=_0x1e244c;super({'name':_0xffdd1a(_0x4b6245._0x57e5ff),'dsc':_0xffdd1a(0x146),'event':_0xffdd1a(_0x4b6245._0x54e2ed),'priority':0x479,'rule':[{'reg':_0xffdd1a(_0x4b6245._0x51218e),'fnc':_0xffdd1a(0xe0)},{'reg':_0xffdd1a(_0x4b6245._0x5a48e4),'fnc':_0xffdd1a(_0x4b6245._0x36837d)},{'reg':_0xffdd1a(_0x4b6245._0x13eac7),'fnc':_0xffdd1a(_0x4b6245._0x448f76)},{'reg':'^#以图生草(.*)$|(.*)','fnc':_0xffdd1a(_0x4b6245._0x315bb6),'log':![]},{'reg':'^#查看所有预设$|#新增预设(.*)|(.*)','fnc':_0xffdd1a(0x171),'log':![]},{'reg':_0xffdd1a(0x170),'fnc':_0xffdd1a(_0x4b6245._0x4cf0fb)},{'reg':'^#土块画图模型(.*)|^#查看所有模型','fnc':_0xffdd1a(0x14a)},{'reg':_0xffdd1a(0x138),'fnc':_0xffdd1a(_0x4b6245._0x2f1679)},{'reg':_0xffdd1a(0xda),'fnc':_0xffdd1a(0x103)},{'reg':'^#填写密钥(.*)','fnc':'tianxie'}]});}async[_0x1e244c(0xa2)](_0x41df98){const _0x13d118={_0x1ab58d:0xeb,_0x498e3b:0x16e,_0x61d0db:0xa9,_0x3cc26d:0x117,_0x1926b4:0xf8,_0x5234a2:0x11d,_0x313c30:0xe6,_0x5e7db0:0xaf,_0x5f3659:0x117,_0x2b0dca:0x15c,_0x114ec8:0x179},_0x11345a={_0x1d77ab:0x16e,_0x53dde4:0x151,_0x36e1db:0x16e,_0x3b307c:0x164},_0x5c92e1={_0x55564b:0x16e,_0x9b6ab3:0x164},_0x5663ed=_0x1e244c;if(_0x41df98[_0x5663ed(0xdf)]){let _0x5c79be=_0x49c627[_0x5663ed(0xb0)](_0x216b5f[_0x5663ed(0x107)](_0x5663ed(_0x13d118._0x1ab58d),_0x5663ed(0x175)));_0x5c79be=_0x5c79be[_0x5663ed(0xd2)][0x0],console[_0x5663ed(_0x13d118._0x498e3b)](_0x5c79be);let _0x23a88d=_0x41df98[_0x5663ed(0xe2)][_0x5663ed(0x12c)](/#填写密钥/g,'')[_0x5663ed(_0x13d118._0x61d0db)](),_0x2e30cf=_0x5663ed(0xef)+_0x23a88d+_0x5663ed(0x13c)+String(_0x41df98[_0x5663ed(_0x13d118._0x3cc26d)]),_0x306440=await _0x399c91(_0x2e30cf),_0x92b848=await _0x306440[_0x5663ed(0x142)]();if(_0x92b848[_0x5663ed(_0x13d118._0x1926b4)](_0x5663ed(_0x13d118._0x5234a2))){_0x41df98[_0x5663ed(0xc1)]('密钥不存在！不能乱输入哦');return;}if(_0x92b848['includes'](_0x5663ed(_0x13d118._0x313c30))){_0x41df98[_0x5663ed(0xc1)](_0x5663ed(0xac)),await _0x216b5f[_0x5663ed(0xea)](_0x5663ed(_0x13d118._0x5e7db0),_0x23a88d[_0x5663ed(0x15c)](),'utf-8',_0x25032e=>{const _0x142bf5=_0x5663ed;_0x25032e?console[_0x142bf5(0x16e)]('写入文件错误'):console[_0x142bf5(_0x5c92e1._0x55564b)](_0x142bf5(_0x5c92e1._0x9b6ab3));});return;}_0x92b848[_0x5663ed(0xf8)](_0x5663ed(0xfd))&&(_0x41df98[_0x5663ed(0xc1)]('已激活密钥，号主为'+String(_0x41df98[_0x5663ed(_0x13d118._0x5f3659)])),await _0x216b5f['writeFile'](_0x5663ed(_0x13d118._0x5e7db0),_0x23a88d[_0x5663ed(_0x13d118._0x2b0dca)](),_0x5663ed(0xa6),_0x57b3e7=>{const _0x5b2b38=_0x5663ed;_0x57b3e7?console[_0x5b2b38(_0x11345a._0x1d77ab)](_0x5b2b38(_0x11345a._0x53dde4)):console[_0x5b2b38(_0x11345a._0x36e1db)](_0x5b2b38(_0x11345a._0x3b307c));})),_0x92b848[_0x5663ed(_0x13d118._0x1926b4)](_0x5663ed(_0x13d118._0x114ec8))&&_0x41df98['reply'](_0x5663ed(0xd4));}}async['kqdl'](_0x4909af){const _0x4f7867={_0x48beda:0xfa,_0x38daba:0xc1,_0x56fd30:0xe2,_0xe1b42a:0x17d,_0x3f6dae:0xdf,_0x3d65bd:0x173,_0x22829d:0x11c,_0x3443fa:0xdf,_0x2508f1:0x176,_0x8f0bd8:0xc1,_0x210e07:0xec},_0x2448de=_0x1e244c;_0x4909af['msg']==_0x2448de(0x124)&_0x4909af[_0x2448de(0xdf)]&&(isdl=0x1,_0x4909af[_0x2448de(0xc1)](_0x2448de(0x156))),_0x4909af['msg']==_0x2448de(_0x4f7867._0x48beda)&_0x4909af['isMaster']&&(isdl=0x0,_0x4909af[_0x2448de(0xc1)]('已关闭代理')),_0x4909af['msg']==_0x2448de(0x13a)&_0x4909af[_0x2448de(0xdf)]&&(iscanshu=0x1,_0x4909af[_0x2448de(_0x4f7867._0x38daba)](_0x2448de(0x160))),_0x4909af[_0x2448de(_0x4f7867._0x56fd30)]==_0x2448de(_0x4f7867._0xe1b42a)&_0x4909af[_0x2448de(_0x4f7867._0x3f6dae)]&&(iscanshu=0x0,_0x4909af[_0x2448de(_0x4f7867._0x38daba)](_0x2448de(_0x4f7867._0x3d65bd))),_0x4909af['msg']==_0x2448de(_0x4f7867._0x22829d)&_0x4909af[_0x2448de(_0x4f7867._0x3443fa)]&&(ishuifu=!![],_0x4909af[_0x2448de(0xc1)](_0x2448de(0x16a))),_0x4909af['msg']==_0x2448de(_0x4f7867._0x2508f1)&_0x4909af[_0x2448de(0xdf)]&&(ishuifu=![],_0x4909af[_0x2448de(_0x4f7867._0x8f0bd8)](_0x2448de(_0x4f7867._0x210e07)));}async[_0x1e244c(0x15a)](_0x4f18f5){const _0x13e7bd={_0x59228d:0x16e,_0x1f5251:0x15c,_0x1fde10:0xdd,_0xbd2a25:0xa9,_0x43a7a0:0xc1},_0x32a1c0=_0x1e244c;if(_0x4f18f5[_0x32a1c0(0xe2)]==_0x32a1c0(0x13b)){console[_0x32a1c0(_0x13e7bd._0x59228d)](guimo);let _0x57e9d4=['模型：',moxing,'\x0a规模：',guimo['toString'](),'\x0a步数：',bushu['toString'](),'\x0a相似度：',xsd[_0x32a1c0(_0x13e7bd._0x1f5251)](),_0x32a1c0(_0x13e7bd._0x1fde10),jz[_0x32a1c0(0x15c)]()];_0x4f18f5[_0x32a1c0(0xc1)](_0x57e9d4);return;}bushu=_0x4f18f5['msg']['replace'](/#土块画图步数/g,'')[_0x32a1c0(_0x13e7bd._0xbd2a25)](),bushu=Number(bushu);if(bushu<0x0|bushu>0x1c){bushu=0x1c,_0x4f18f5[_0x32a1c0(_0x13e7bd._0x43a7a0)](_0x32a1c0(0x10f));return;}else _0x4f18f5['reply'](_0x32a1c0(0x132)+String(bushu));}async['szmx'](_0x2a8a21){const _0x364900={_0x1c3162:0xaa,_0x42c768:0xc1,_0x27f1ae:0xe2,_0x281567:0xa8,_0x2edf8d:0x15f,_0x208a0e:0x16c,_0x131ec9:0xd7,_0x52a3ed:0x145,_0x5c7341:0x119},_0x2dd672=_0x1e244c;if(_0x2a8a21[_0x2dd672(0xe2)]==_0x2dd672(_0x364900._0x1c3162)){let _0x9281a9=[_0x2dd672(0x163)];_0x2a8a21[_0x2dd672(_0x364900._0x42c768)](_0x9281a9);return;}moxing=_0x2a8a21[_0x2dd672(_0x364900._0x27f1ae)][_0x2dd672(0x12c)](/#土块画图模型/g,'')[_0x2dd672(0xa9)](),moxing=Number(moxing);if(moxing<0x0|moxing>0x5){_0x2a8a21['reply'](_0x2dd672(_0x364900._0x281567)),moxing=0x2;return;}moxing==0x1&&(moxing=_0x2dd672(_0x364900._0x2edf8d),_0x2a8a21[_0x2dd672(_0x364900._0x42c768)]('模型已设置为k_euler_ancestral')),moxing==0x2&&(moxing='k_euler',_0x2a8a21['reply'](_0x2dd672(_0x364900._0x208a0e))),moxing==0x3&&(moxing=_0x2dd672(_0x364900._0x131ec9),_0x2a8a21[_0x2dd672(_0x364900._0x42c768)]('模型已设置为k_lms')),moxing==0x4&&(moxing=_0x2dd672(0x9f),_0x2a8a21[_0x2dd672(_0x364900._0x42c768)](_0x2dd672(_0x364900._0x52a3ed))),moxing==0x5&&(moxing=_0x2dd672(_0x364900._0x5c7341),_0x2a8a21[_0x2dd672(0xc1)](_0x2dd672(0xf3)));}async[_0x1e244c(0xd5)](_0x25c626){const _0x16d047={_0x567329:0x12c,_0x8651ea:0xa9,_0x344d0e:0xc1},_0x1d65a6=_0x1e244c;guimo=_0x25c626[_0x1d65a6(0xe2)][_0x1d65a6(_0x16d047._0x567329)](/#土块画图规模/g,'')[_0x1d65a6(_0x16d047._0x8651ea)](),guimo=Number(guimo);if(guimo<0x3|guimo>0xc){_0x25c626[_0x1d65a6(_0x16d047._0x344d0e)](_0x1d65a6(0xab)),guimo=5.5;return;}else _0x25c626[_0x1d65a6(0xc1)](_0x1d65a6(0xd9)+String(guimo));}async[_0x1e244c(0x171)](_0x1b31d2){const _0x1af9ed={_0x129dbe:0xf8,_0x16a010:0x17c,_0x1e485c:0xf8,_0xf4efba:0x143,_0x34c020:0xe2,_0x4d3055:0xbc,_0x2d529e:0x10e,_0x5e5248:0xdf,_0x496ff3:0xcd,_0x19e019:0xc1,_0x1fb8e0:0xdf,_0x1ba111:0xbe,_0x9df074:0xea,_0x3828c9:0xe2,_0x132186:0xf1,_0x27c9bd:0xbe,_0x3ef290:0xd0,_0x2e285e:0xea},_0x1022aa={_0xf51021:0x16e},_0x20c78f={_0x4cc215:0x15c,_0x3d153e:0xc2,_0x21b68f:0x123},_0x961555=_0x1e244c;if(_0x1b31d2[_0x961555(0x12a)]!=undefined)return![];if(yushekg==0x0&_0x1b31d2[_0x961555(0xe2)][_0x961555(_0x1af9ed._0x129dbe)](_0x961555(_0x1af9ed._0x16a010))==![]&_0x1b31d2[_0x961555(0xe2)][_0x961555(_0x1af9ed._0x1e485c)](_0x961555(0xfb))==![]&_0x1b31d2['msg']['includes'](_0x961555(0x127))==![]&_0x1b31d2['msg']['includes'](_0x961555(0xbc))==![])return![];let _0x2447b9=ml+_0x961555(0xe3),_0x5b07a8='';await _0x216b5f[_0x961555(_0x1af9ed._0xf4efba)](_0x2447b9,(_0x38d403,_0x442127)=>{const _0x34c97b=_0x961555;if(_0x38d403)throw _0x38d403;var _0x5ad161=_0x442127[_0x34c97b(_0x20c78f._0x4cc215)]()!=''?JSON[_0x34c97b(0xb0)](_0x442127[_0x34c97b(0x15c)]()):[];ysct='',_0x5b07a8='',shuju=_0x5ad161;for(let _0x147e1a=0x0;_0x147e1a<shuju['shuju'][_0x34c97b(_0x20c78f._0x3d153e)];_0x147e1a++){_0x5b07a8=_0x5b07a8+shuju['shuju'][_0x147e1a][_0x34c97b(_0x20c78f._0x21b68f)]+',',ysct=ysct+shuju['shuju'][_0x147e1a][_0x34c97b(0x105)]+'++';}}),await sleep(0x1f4);if(_0x1b31d2[_0x961555(_0x1af9ed._0x34c020)][_0x961555(0xf8)](_0x961555(_0x1af9ed._0x4d3055))&_0x1b31d2[_0x961555(0xdf)]){let _0x296d31=_0x1b31d2[_0x961555(_0x1af9ed._0x34c020)][_0x961555(0x12c)](/#查看预设词条/g,'')[_0x961555(0xa9)]();_0x296d31=Number(_0x296d31),ysct=ysct[_0x961555(0xdb)]('++'),_0x5b07a8=_0x5b07a8['split'](',');if(_0x296d31>ysct[_0x961555(0xc2)]|_0x296d31<0x0){_0x1b31d2['reply'](_0x961555(_0x1af9ed._0x2d529e));return;}_0x1b31d2['reply']([_0x5b07a8[_0x296d31-0x1],':',ysct[_0x296d31-0x1]]),ysct='',_0x5b07a8='';}if(_0x1b31d2[_0x961555(_0x1af9ed._0x34c020)]==_0x961555(0x17c)&_0x1b31d2[_0x961555(_0x1af9ed._0x5e5248)]){_0x5b07a8=_0x5b07a8['split'](','),data1={'tplFile':'./plugins/earth-k-plugin/resources/aiht/ml.html','dz':ml,'lb':_0x5b07a8,'qsid':0x0};let _0x17ebdb=await _0x27e0d4[_0x961555(_0x1af9ed._0x496ff3)]('123',{...data1});_0x1b31d2['reply'](_0x17ebdb);return;_0x1b31d2[_0x961555(_0x1af9ed._0x19e019)]('当前预设有：\x0a'+_0x5b07a8);}if(_0x1b31d2['msg'][_0x961555(0xf8)]('#删除预设')&_0x1b31d2[_0x961555(_0x1af9ed._0x1fb8e0)]){let _0x1d9808=_0x1b31d2[_0x961555(0xe2)][_0x961555(0x12c)](/#删除预设/g,'')[_0x961555(0xa9)]();_0x1d9808=Number(_0x1d9808);if(_0x1d9808<shuju[_0x961555(0xbe)][_0x961555(0xc2)]+0x1){shuju[_0x961555(_0x1af9ed._0x1ba111)][_0x961555(0x16d)](_0x1d9808-0x1,0x1);var _0x32a84d=JSON[_0x961555(0xd0)](shuju);}_0x216b5f[_0x961555(_0x1af9ed._0x9df074)](_0x2447b9,_0x32a84d,function(_0x4443c4){const _0x228e46=_0x961555;_0x4443c4&&console['error'](_0x4443c4),_0x1b31d2[_0x228e46(0xc1)](_0x228e46(0xce));});}if(_0x1b31d2[_0x961555(_0x1af9ed._0x34c020)][_0x961555(0xf8)](_0x961555(0xfb))&_0x1b31d2[_0x961555(_0x1af9ed._0x1fb8e0)]&yushekg==0x0){yushekg=0x1,ys[0x0]=_0x1b31d2[_0x961555(_0x1af9ed._0x3828c9)]['replace'](/#新增预设/g,'')['trim'](),_0x1b31d2['reply'](_0x961555(_0x1af9ed._0x132186));return;}if(yushekg==0x1&_0x1b31d2[_0x961555(0xdf)]){yushekg=0x0,ys[0x1]=_0x1b31d2[_0x961555(_0x1af9ed._0x34c020)];let _0xd37469={'name':ys[0x0],'gjc':ys[0x1]};shuju[_0x961555(_0x1af9ed._0x27c9bd)][_0x961555(0x13d)](_0xd37469),console[_0x961555(0x16e)](shuju);var _0x32a84d=JSON[_0x961555(_0x1af9ed._0x3ef290)](shuju);_0x216b5f[_0x961555(_0x1af9ed._0x2e285e)](_0x2447b9,_0x32a84d,_0x5390ea=>{const _0x16fd9e=_0x961555;if(_0x5390ea)throw _0x5390ea;console[_0x16fd9e(_0x1022aa._0xf51021)](_0x16fd9e(0xd8)),_0x1b31d2[_0x16fd9e(0xc1)](_0x16fd9e(0xba));});return;}}async[_0x1e244c(0x130)](_0x9a5a01){const _0x4c07b4={_0x44e3cd:0xdf,_0x5d0377:0x169,_0x101e0d:0xe2,_0x3b3381:0x165,_0x4a52b8:0x114},_0x113607=_0x1e244c;_0x9a5a01[_0x113607(0xe2)][_0x113607(0xf8)](_0x113607(0xb6))&_0x9a5a01[_0x113607(_0x4c07b4._0x44e3cd)]&&(_0x9a5a01['reply'](_0x113607(_0x4c07b4._0x5d0377)),pc=_0x9a5a01[_0x113607(0xe2)][_0x113607(0x12c)](/#新增屏蔽词/g,'')[_0x113607(0xa9)]()),_0x9a5a01[_0x113607(0xe2)]==_0x113607(0xbb)&_0x9a5a01['isMaster']&&_0x9a5a01[_0x113607(0xc1)]([_0x113607(0xf2),pc]),_0x9a5a01[_0x113607(_0x4c07b4._0x101e0d)]['includes'](_0x113607(_0x4c07b4._0x3b3381))&_0x9a5a01['isMaster']&&(_0x9a5a01[_0x113607(0xc1)](_0x113607(_0x4c07b4._0x4a52b8)+_0x113607(0x172)),pc=''),_0x9a5a01[_0x113607(_0x4c07b4._0x101e0d)]['includes']('#开启默认屏蔽词')&_0x9a5a01['isMaster']&&(_0x9a5a01[_0x113607(0xc1)]('已经开启默认屏蔽词'),pc=_0x113607(0x14e));}async[_0x1e244c(0x10b)](_0x5044c3){const _0x37a075={_0x4097c6:0xc8,_0x375d3c:0xdf,_0x40364f:0x135,_0x316446:0x152,_0x59b39f:0xdf,_0x3c1588:0xff,_0x471cc4:0x15c,_0x2d0633:0xa6,_0x4ed850:0x150,_0x4a56e6:0xdf,_0x532dec:0xf9,_0x26d3d9:0xe2,_0x4e4f0d:0xa9,_0x4e0820:0x12d,_0x3ff725:0xc1,_0xdbb942:0xdf,_0x116925:0x15c,_0x26358b:0xa6,_0x518466:0xf8,_0x243e37:0xbd,_0x3ac37b:0x12c,_0x1cb23c:0xf9,_0x4cb533:0x12e,_0x494f86:0xc1,_0xc555fc:0xe2,_0x105e4b:0xf5,_0x32f6ee:0xdf},_0x28e4de=_0x1e244c;_0x5044c3[_0x28e4de(0xe2)]==_0x28e4de(_0x37a075._0x4097c6)&_0x5044c3[_0x28e4de(_0x37a075._0x375d3c)]&&(_0x5044c3[_0x28e4de(0xc1)](_0x28e4de(_0x37a075._0x40364f)),ss=_0x28e4de(0x115));_0x5044c3[_0x28e4de(0xe2)]==_0x28e4de(_0x37a075._0x316446)&_0x5044c3[_0x28e4de(_0x37a075._0x59b39f)]&&(_0x5044c3['reply'](_0x28e4de(0x14f)),ss=_0x28e4de(_0x37a075._0x3c1588));await dqpz();if(_0x5044c3[_0x28e4de(0xe2)]['includes']('#土块画图冷却关闭')&_0x5044c3['isMaster']){nr[0x3]=0x0,nr[0x0]=0x0,_0x216b5f['writeFileSync'](Path,nr[_0x28e4de(_0x37a075._0x471cc4)](),_0x28e4de(_0x37a075._0x2d0633)),cd=0x0,kg2=0x0,kg=0x0,sc=0x0,iscd=0x0,_0x5044c3[_0x28e4de(0xc1)](_0x28e4de(0x14c));return;}if(_0x5044c3[_0x28e4de(0xe2)][_0x28e4de(0xf8)](_0x28e4de(_0x37a075._0x4ed850))&_0x5044c3[_0x28e4de(_0x37a075._0x4a56e6)]){nr[0x0]=0x7530,nr[0x3]=0x1,_0x216b5f[_0x28e4de(_0x37a075._0x532dec)](Path,nr[_0x28e4de(_0x37a075._0x471cc4)](),_0x28e4de(_0x37a075._0x2d0633)),cd=0x7530,_0x5044c3[_0x28e4de(0xc1)](_0x28e4de(0x11b));return;}if(_0x5044c3[_0x28e4de(_0x37a075._0x26d3d9)][_0x28e4de(0xf8)](_0x28e4de(0x126))&_0x5044c3[_0x28e4de(0xdf)]){let _0x25c48c=_0x5044c3[_0x28e4de(0xe2)]['replace'](/#土块画图冷却/g,'')[_0x28e4de(_0x37a075._0x4e4f0d)]();cd=Number(_0x25c48c)*0x3e8,nr[0x0]=cd,nr[0x3]=0x1,_0x216b5f[_0x28e4de(0xf9)](Path,nr[_0x28e4de(0x15c)](),_0x28e4de(0xa6)),_0x5044c3['reply'](_0x28e4de(_0x37a075._0x4e0820)+_0x25c48c+'秒');}if(_0x5044c3[_0x28e4de(_0x37a075._0x26d3d9)][_0x28e4de(0xf8)]('#土块画图撤回关闭')&_0x5044c3[_0x28e4de(0xdf)]){nr[0x2]=0x0,_0x216b5f[_0x28e4de(_0x37a075._0x532dec)](Path,nr[_0x28e4de(0x15c)](),_0x28e4de(_0x37a075._0x2d0633)),isch=0x0,_0x5044c3[_0x28e4de(_0x37a075._0x3ff725)](_0x28e4de(0x141));return;}if(_0x5044c3[_0x28e4de(0xe2)][_0x28e4de(0xf8)](_0x28e4de(0x178))&_0x5044c3[_0x28e4de(_0x37a075._0xdbb942)]){isch=0x1,nr[0x1]=0x7530,nr[0x2]=0x1,_0x216b5f[_0x28e4de(0xf9)](Path,nr[_0x28e4de(_0x37a075._0x116925)](),_0x28e4de(_0x37a075._0x26358b)),timeout=0x7530,_0x5044c3[_0x28e4de(0xc1)]('已开启画图撤回，撤回时间为30秒');return;}if(_0x5044c3[_0x28e4de(0xe2)][_0x28e4de(_0x37a075._0x518466)](_0x28e4de(_0x37a075._0x243e37))&_0x5044c3['isMaster']){isch=0x1;let _0xc7b1de=_0x5044c3[_0x28e4de(0xe2)][_0x28e4de(_0x37a075._0x3ac37b)](/#土块画图撤回/g,'')[_0x28e4de(0xa9)]();timeout=Number(_0xc7b1de)*0x3e8,nr[0x1]=timeout,nr[0x2]=0x1,_0x216b5f[_0x28e4de(_0x37a075._0x1cb23c)](Path,nr[_0x28e4de(_0x37a075._0x471cc4)](),_0x28e4de(0xa6)),_0x5044c3[_0x28e4de(0xc1)](_0x28e4de(0x136)+_0xc7b1de+'秒');}_0x5044c3[_0x28e4de(_0x37a075._0x26d3d9)]==_0x28e4de(_0x37a075._0x4cb533)&&(kg=0x0,sc=0x0,zt=0x0,id='',console['log'](_0x28e4de(0x11f)),kg2=0x0,_0x5044c3[_0x28e4de(_0x37a075._0x494f86)](_0x28e4de(0xb3))),_0x5044c3[_0x28e4de(_0x37a075._0xc555fc)]==_0x28e4de(0x11e)&_0x5044c3[_0x28e4de(_0x37a075._0xdbb942)]&&(_0x5044c3[_0x28e4de(0xc1)](_0x28e4de(_0x37a075._0x105e4b)),zr=0x0),_0x5044c3[_0x28e4de(0xe2)]=='#仅我可画'&_0x5044c3[_0x28e4de(_0x37a075._0x32f6ee)]&&(_0x5044c3['reply'](_0x28e4de(0xcf)),zr=0x1);}async['huatu3'](_0x23bb5b){const _0x566fc6={_0x503f87:0x12a,_0x283b5b:0xe2,_0xd14a76:0xf8,_0x5ce22a:0x12a,_0x240ce5:0xb4,_0x22331f:0xe2,_0x47a7aa:0x117,_0x52a900:0xc1,_0x28382c:0xd6,_0x7219ca:0xa1,_0x441321:0x16e,_0x9e3617:0x121,_0xe718b7:0x131,_0x4e43a2:0x12a,_0x479031:0xf8,_0x4babce:0x101,_0x475ccc:0xe2,_0x4b37a5:0xa9,_0x123054:0x16e,_0x151188:0xa9,_0x501bea:0x166,_0x8f60a3:0xf8,_0x99eb7:0x100,_0x128f73:0xa5,_0x323715:0xc9,_0x55b4b8:0x116,_0x19fab1:0x13f,_0x5539c1:0xe2,_0x702945:0x158,_0x3a64af:0x134,_0xba7dc3:0x15c,_0x300a24:0x12c,_0x514288:0x12c,_0x3bef5e:0x12c,_0x124511:0x12f,_0xd2243:0xcb,_0x356e21:0x16e,_0x34feff:0xa4,_0x52da6f:0xc1,_0x160cdb:0x139,_0x3d8a87:0x12a,_0x16604e:0x159,_0x5546ce:0x16b,_0x81f663:0xd0,_0x5e3d02:0x142,_0x37187f:0x12c,_0x1cb1ff:0xa9,_0x3edd5c:0x12c,_0x3d588c:0xc1,_0x44e6cd:0x15e,_0x4f984a:0xc7,_0x2f800c:0x168,_0x4f7d8f:0x10c,_0x217d24:0x16e,_0xf648e5:0xee,_0x112c9d:0xe2,_0x28c3a1:0x16f},_0x4150a3={_0x314c6b:0xb1,_0x164152:0xee},_0x5c028a={_0x4cc8f2:0x16e},_0x2e090c={_0x4509bd:0xe8},_0x369024=_0x1e244c;if(_0x23bb5b[_0x369024(0x12a)]!=undefined&zt==0x0&mfkg==0x0)return![];if(_0x23bb5b[_0x369024(_0x566fc6._0x503f87)]==undefined&_0x23bb5b[_0x369024(_0x566fc6._0x283b5b)]!=undefined){if(_0x23bb5b[_0x369024(0xe2)][_0x369024(_0x566fc6._0xd14a76)](_0x369024(0x16f))==![]&_0x23bb5b[_0x369024(_0x566fc6._0x5ce22a)]==undefined&zt==0x0&_0x23bb5b[_0x369024(_0x566fc6._0x283b5b)][_0x369024(_0x566fc6._0xd14a76)](_0x369024(_0x566fc6._0x240ce5))==![]&mfkg==0x0)return![];}mfkg==0x0&_0x23bb5b[_0x369024(_0x566fc6._0x22331f)]=='#查看魔法'&&(mfkg=0x1,mfid=_0x23bb5b[_0x369024(_0x566fc6._0x47a7aa)],_0x23bb5b['reply'](_0x369024(0x122)),mf=setTimeout(()=>{const _0x13c250=_0x369024;if(mfkg==0x1){mfkg=0x0,_0x23bb5b[_0x13c250(0xc1)](_0x13c250(0xbf));return;}},0x3a98));if(_0x23bb5b[_0x369024(0x12a)]!=undefined&mfkg==0x1&mfid==_0x23bb5b['user_id']){clearTimeout(mf),_0x23bb5b[_0x369024(_0x566fc6._0x52a900)]('正在查看魔法，请稍后啊，0v0'),mfkg=0x0,mfid='';let _0x18ff2b=_0x369024(_0x566fc6._0x28382c);console[_0x369024(0x16e)](_0x23bb5b[_0x369024(_0x566fc6._0x5ce22a)]),_0x18ff2b=_0x18ff2b+_0x23bb5b[_0x369024(0x12a)][0x0],res=await _0x399c91(_0x18ff2b,{'method':'get','headers':{'Content-Type':_0x369024(_0x566fc6._0x7219ca),'User-Agent':_0x369024(0x177)}});let _0x4f4233=await res['json']();console[_0x369024(_0x566fc6._0x441321)](_0x369024(_0x566fc6._0x9e3617)+_0x4f4233),console['log'](_0x4f4233);if(_0x4f4233!=undefined)_0x23bb5b[_0x369024(0xc1)](_0x4f4233[_0x369024(_0x566fc6._0xe718b7)],!![]),_0x4f4233['code']==-0x1&&(_0x23bb5b['reply'](_0x369024(0x10a)),mfkg=0x0,mfid='');else{}}if(_0x23bb5b[_0x369024(_0x566fc6._0x4e43a2)]==undefined&zt==0x1)return![];if(_0x23bb5b['img']==undefined&_0x23bb5b[_0x369024(_0x566fc6._0x22331f)]!=undefined){dqpz();if(_0x23bb5b[_0x369024(0xe2)][_0x369024(_0x566fc6._0x479031)](_0x369024(_0x566fc6._0x4babce))&_0x23bb5b['isMaster']){xsd=Number(_0x23bb5b[_0x369024(_0x566fc6._0x475ccc)]['replace'](/#以图生草相似度/g,'')[_0x369024(_0x566fc6._0x4b37a5)]())/0x64,_0x23bb5b['reply']('当前相似度'+String(xsd)),console[_0x369024(_0x566fc6._0x123054)](xsd);return;}if(_0x23bb5b[_0x369024(_0x566fc6._0x283b5b)][_0x369024(0xf8)]('#以图生草降噪')&_0x23bb5b[_0x369024(0xdf)]){jz=Number(_0x23bb5b['msg']['replace'](/#以图生草降噪/g,'')[_0x369024(_0x566fc6._0x151188)]())/0x64,_0x23bb5b[_0x369024(0xc1)](_0x369024(_0x566fc6._0x501bea)+String(jz)),console['log'](jz);return;}if(zt==0x0&&sc==0x0&&_0x23bb5b[_0x369024(_0x566fc6._0x283b5b)][_0x369024(_0x566fc6._0x8f60a3)](_0x369024(0x16f))){if(_0x23bb5b[_0x369024(_0x566fc6._0x99eb7)]){_0x23bb5b['reply']('以图生草暂不支持私聊');return;}dqpz();var _0x18febe=require('os'),_0x3f64ac='',_0xa2f931=_0x18febe[_0x369024(0x144)]();for(var _0x392de9 in _0xa2f931){for(var _0x42dc80 in _0xa2f931[_0x392de9]){_0xa2f931[_0x392de9][_0x42dc80][_0x369024(_0x566fc6._0x128f73)]===_0x369024(_0x566fc6._0x323715)&&_0xa2f931[_0x392de9][_0x42dc80][_0x369024(0xe1)]!==_0x369024(0x14b)&&_0xa2f931[_0x392de9][_0x42dc80][_0x369024(_0x566fc6._0x55b4b8)]!==_0x369024(_0x566fc6._0x19fab1)&&(_0x3f64ac=_0xa2f931[_0x392de9][_0x42dc80][_0x369024(0xe1)]);}}var _0x8f40db=require('crypto');function _0x28c616(_0x3d63d2){const _0x429756=_0x369024;var _0x59f5ca=_0x8f40db[_0x429756(0xf6)](_0x429756(_0x2e090c._0x4509bd));return _0x59f5ca[_0x429756(0x111)](_0x3d63d2)['digest'](_0x429756(0xfe));}var _0x58d30f=_0x3f64ac,_0x5342a8=_0x28c616(_0x58d30f);let _0x1c7846=_0x23bb5b[_0x369024(_0x566fc6._0x5539c1)][_0x369024(0x12c)](/#填写激活码/g,'')[_0x369024(0xa9)]();htm=_0x5342a8;try{htm2=_0x216b5f[_0x369024(0x107)](_0x369024(_0x566fc6._0x702945));}catch{_0x23bb5b[_0x369024(0xc1)](_0x369024(_0x566fc6._0x3a64af));return;}htm2==htm&&(htm2='');htm2=htm2[_0x369024(_0x566fc6._0xba7dc3)](),htm2=htm2[_0x369024(0x12c)](/]Q/g,'a')[_0x369024(0xa9)](),htm2=htm2['replace'](/\{F/g,'b')['trim'](),htm2=htm2[_0x369024(0x12c)](/\[W/g,'c')['trim'](),htm2=htm2[_0x369024(0x12c)](/\}G/g,'d')[_0x369024(0xa9)](),htm2=htm2[_0x369024(0x12c)](/\*T/g,'e')[_0x369024(0xa9)](),htm2=htm2[_0x369024(0x12c)](/\=K/g,'f')[_0x369024(0xa9)](),htm2=htm2[_0x369024(0x12c)](/\-R/g,'g')[_0x369024(0xa9)](),htm2=htm2[_0x369024(_0x566fc6._0x300a24)](/\*Z/g,'1')[_0x369024(_0x566fc6._0x4b37a5)](),htm2=htm2[_0x369024(0x12c)](/\+X/g,'2')['trim'](),htm2=htm2['replace'](/\-C/g,'3')[_0x369024(_0x566fc6._0x151188)](),htm2=htm2[_0x369024(_0x566fc6._0x514288)](/\)V/g,'4')[_0x369024(0xa9)](),htm2=htm2[_0x369024(_0x566fc6._0x514288)](/\&Z/g,'9')[_0x369024(0xa9)](),htm2=htm2[_0x369024(_0x566fc6._0x3bef5e)](/\^X/g,'8')[_0x369024(_0x566fc6._0x151188)](),htm2=htm2['replace'](/\%C/g,'7')[_0x369024(0xa9)](),htm2=htm2[_0x369024(_0x566fc6._0x3bef5e)](/\$V/g,'6')[_0x369024(_0x566fc6._0x151188)]();if(htm!=htm2){_0x23bb5b['reply'](_0x369024(0xc4));return;}console[_0x369024(0x16e)](_0x369024(_0x566fc6._0x124511)),id=_0x23bb5b[_0x369024(0x117)],gjc2=_0x23bb5b[_0x369024(0xe2)]['replace'](/#以图生草/g,'')[_0x369024(0xa9)]();var _0x558184=new RegExp('[\x5cu4E00-\x5cu9FFF]+','g');if(_0x558184[_0x369024(_0x566fc6._0xd2243)](gjc2)){console[_0x369024(_0x566fc6._0x356e21)](_0x369024(_0x566fc6._0x34feff));let _0x355c30=_0x369024(0x17a)+gjc2,_0x1fed59=await _0x399c91(_0x355c30),_0x148cf4=await _0x1fed59[_0x369024(0x142)]();_0x148cf4=_0x148cf4[_0x369024(0x12c)](/有道翻译查询结果/g,'')[_0x369024(_0x566fc6._0x151188)](),_0x148cf4=_0x148cf4['replace'](/翻译后/g,'')[_0x369024(0xa9)](),_0x148cf4=_0x148cf4[_0x369024(0x12c)](/翻译前/g,'')[_0x369024(0xa9)](),_0x148cf4=_0x148cf4[_0x369024(_0x566fc6._0x514288)](/：/g,'')[_0x369024(0xa9)](),_0x148cf4=_0x148cf4['replace'](new RegExp(gjc2,'g'),''),gjc2=_0x148cf4,console[_0x369024(0x16e)](gjc2);}else console[_0x369024(_0x566fc6._0x123054)]('是英文');zt=0x1,ycqx=setTimeout(()=>{const _0x1eea83=_0x369024;if(zt==0x1){zt=0x0,_0x23bb5b[_0x1eea83(0xc1)]('30秒还未发图，以图生草已取消');return;}},0x7530),_0x23bb5b[_0x369024(_0x566fc6._0x52da6f)]([segment['at'](id),_0x369024(_0x566fc6._0x160cdb)]);return;}}if(sc==0x0&_0x23bb5b[_0x369024(0x147)]&zt==0x1&_0x23bb5b[_0x369024(0x12a)]!=undefined){clearTimeout(ycqx);if(_0x23bb5b[_0x369024(0x117)]==id&zt==0x1){sc=0x1;let _0x473a50=await imgUrlToBase64(_0x23bb5b[_0x369024(_0x566fc6._0x3d8a87)][0x0]['replace'](/https/g,_0x369024(0x15b))[_0x369024(0xa9)]()),_0x5e68c9=_0x473a50[_0x369024(_0x566fc6._0x16604e)],_0x4ce3eb=Math[_0x369024(0x10d)](Math[_0x369024(0xad)]()*0xb6cff090);var _0x219ad1={'prompt':'masterpiece,\x20best\x20quality,'+gjc2,'width':0x180,'height':0x200,'scale':guimo,'sampler':moxing,'steps':0x32,'seed':_0x4ce3eb,'n_samples':0x1,'strength':0x1-xsd,'noise':jz,'ucPreset':0x0,'image':_0x5e68c9,'uc':pc};_0x23bb5b['reply'](_0x369024(0x17b)),zt=0x0;try{res=await _0x399c91(_0x369024(_0x566fc6._0x5546ce),{'method':_0x369024(0x149),'body':JSON[_0x369024(_0x566fc6._0x81f663)](_0x219ad1),'headers':{'Content-Type':_0x369024(_0x566fc6._0x7219ca),'User-Agent':_0x369024(0x177)}});}catch(_0x5e471f){console[_0x369024(_0x566fc6._0x356e21)](_0x5e471f),console[_0x369024(0x16e)](_0x369024(0x157)),kg=0x0;return;}let _0x5df335=await res[_0x369024(_0x566fc6._0x5e3d02)]();_0x5df335=_0x5df335[_0x369024(_0x566fc6._0x37187f)](/id: 1/g,'')[_0x369024(_0x566fc6._0x1cb1ff)](),_0x5df335=_0x5df335[_0x369024(_0x566fc6._0x3edd5c)](/event: newImage/g,'')[_0x369024(0xa9)](),_0x5df335=_0x5df335[_0x369024(0x12c)](/data:/g,'')[_0x369024(_0x566fc6._0x4b37a5)]();if(res==''){_0x23bb5b[_0x369024(_0x566fc6._0x3d588c)](_0x369024(_0x566fc6._0x44e6cd));return;}_0x23bb5b[_0x369024(0xc1)](_0x369024(_0x566fc6._0x4f984a)),await _0x216b5f[_0x369024(0xea)](_0x369024(_0x566fc6._0x2f800c),_0x5df335[_0x369024(0x15c)](),_0x369024(0x106),_0x11216a=>{const _0x3f3a9b=_0x369024;_0x11216a?console['log'](_0x3f3a9b(0x151)):console[_0x3f3a9b(_0x5c028a._0x4cc8f2)]('写入文件成功');}),msg2=[segment['at'](_0x23bb5b['user_id']),segment[_0x369024(_0x566fc6._0x4f7d8f)](ml+_0x369024(0x11a))],await sleep(0x1f4);let _0x5b4496=await _0x23bb5b['reply'](msg2);iscd=0x1,console[_0x369024(_0x566fc6._0x217d24)](_0x5b4496['message_id'],isch);if(_0x5b4496&&_0x5b4496[_0x369024(_0x566fc6._0xf648e5)]&&isch==0x1&&_0x23bb5b['isGroup']){let _0x107c00=_0x23bb5b[_0x369024(0x162)];setTimeout(()=>{const _0x37c991=_0x369024;_0x107c00[_0x37c991(_0x4150a3._0x314c6b)](_0x5b4496[_0x37c991(_0x4150a3._0x164152)]);},timeout);}startTimeMS=new Date()['getTime'](),t=setTimeout(()=>{iscd=0x0,sc=0x0,id='';},cd);}}else{if(_0x23bb5b[_0x369024(_0x566fc6._0x3d8a87)]==undefined&_0x23bb5b[_0x369024(_0x566fc6._0x112c9d)]!=undefined){if(_0x23bb5b[_0x369024(0xe2)]['includes'](_0x369024(_0x566fc6._0x28c3a1))){if(iscd==0x1){console[_0x369024(0x16e)](iscd);let _0x2b2af0=cd-(new Date()['getTime']()-startTimeMS);_0x2b2af0=Math[_0x369024(0x104)](_0x2b2af0/0x3e8);if(_0x2b2af0<0x0){sc=0x0,id='';return;}_0x23bb5b[_0x369024(0xc1)]('我在cd中，还有'+String(_0x2b2af0)+'秒可画');}else _0x23bb5b['reply'](_0x369024(0xb7));}}}}async[_0x1e244c(0xe0)](_0x2c8555){const _0x4795ca={_0x4bc8b6:0xe2,_0x1356c3:0xf8,_0x119e9a:0x102,_0x5b4057:0xc1,_0x3d9fb9:0x102,_0x2ff499:0x12c,_0xe8b113:0xa9,_0x1120fa:0x147,_0x59cb16:0xdf,_0x3e490e:0xf4,_0x441b70:0x142,_0x3084fc:0xa9,_0x253348:0x9e,_0xa43911:0x118,_0x31a647:0x143,_0x915fb2:0x16e,_0x2c901f:0xfc,_0x415d59:0x148,_0xd85675:0x10d,_0x2505eb:0x153,_0x248660:0xa7,_0x58de78:0xa7,_0x5e1a13:0xb5,_0x3a4fd7:0xa7,_0x1ea205:0x129,_0x11bd9f:0xb2,_0x48b599:0x12b,_0x4e032c:0x15c,_0x5bc270:0x140,_0x3730e3:0x15c,_0x2339c1:0x107,_0x55cebe:0xaf,_0x595153:0xd2,_0x53b21a:0x14d,_0x4be3b9:0xc0,_0x1ac5bc:0x137,_0x4f0075:0xdc,_0x656f6c:0x16e,_0x333fce:0x120,_0x5b6156:0x10c,_0x77604a:0xc1,_0x5d78ca:0xee,_0x591ba5:0x104,_0x5cd54b:0xcc},_0x225cd6={_0x32e677:0x151},_0x364ff1={_0x5c4519:0x15c,_0x48a3e6:0xcb,_0x4373e4:0x133,_0x25116f:0x113,_0x315cdb:0xc2},_0x1673db=_0x1e244c;dqpz();if(_0x2c8555[_0x1673db(_0x4795ca._0x4bc8b6)][_0x1673db(_0x4795ca._0x1356c3)](_0x1673db(_0x4795ca._0x119e9a))&!_0x2c8555[_0x1673db(0xdf)]){_0x2c8555[_0x1673db(_0x4795ca._0x5b4057)]('你不是主人，不能用预设哦');return;}let _0x356753,_0x51252f,_0x2dae39;_0x2c8555[_0x1673db(0xe2)]['includes'](_0x1673db(_0x4795ca._0x3d9fb9))==![]&&(_0x2dae39=_0x2c8555[_0x1673db(0xe2)][_0x1673db(_0x4795ca._0x2ff499)](/#绘个图/g,'')[_0x1673db(_0x4795ca._0xe8b113)]());if(kg2==0x0&_0x2c8555[_0x1673db(_0x4795ca._0x1120fa)]|_0x2c8555[_0x1673db(0xdf)]){kg2==0x1&&_0x2c8555[_0x1673db(0xc1)]('你是主人，没有cd，欸嘿');if(zr==0x1&!_0x2c8555[_0x1673db(_0x4795ca._0x59cb16)]){_0x2c8555[_0x1673db(_0x4795ca._0x5b4057)]('对不起，你不可画哦');return;}kg2=0x1;let _0x31a6ac=_0x2dae39;var _0x17d0f1=new RegExp(_0x1673db(_0x4795ca._0x3e490e),'g');if(_0x17d0f1['test'](_0x31a6ac)){console[_0x1673db(0x16e)]('包含中文');let _0x29b736=_0x1673db(0x17a)+_0x31a6ac,_0x419ffb=await _0x399c91(_0x29b736),_0x335774=await _0x419ffb[_0x1673db(_0x4795ca._0x441b70)]();_0x335774=_0x335774[_0x1673db(0x12c)](/有道翻译查询结果/g,'')[_0x1673db(_0x4795ca._0x3084fc)](),_0x335774=_0x335774[_0x1673db(0x12c)](/翻译后/g,'')[_0x1673db(0xa9)](),_0x335774=_0x335774[_0x1673db(0x12c)](/翻译前/g,'')[_0x1673db(0xa9)](),_0x335774=_0x335774[_0x1673db(0x12c)](/：/g,'')['trim'](),_0x335774=_0x335774[_0x1673db(0x12c)](new RegExp(_0x31a6ac,'g'),''),res4=_0x335774;if(res4==''){let _0x4e6fa2=_0x1673db(_0x4795ca._0x253348)+_0x2dae39+_0x1673db(0x128);res4=await _0x399c91(_0x4e6fa2),res4=await res4[_0x1673db(0x118)](),res4=res4['data'];}if(res4==''){let _0x335425='https://api.66mz8.com/api/translation.php?info='+_0x2dae39;res4=await _0x399c91(_0x335425),res4=await res4[_0x1673db(_0x4795ca._0xa43911)](),res4=res4[_0x1673db(0x125)];}console[_0x1673db(0x16e)](res4);}else console[_0x1673db(0x16e)](_0x1673db(0xc3)),res4=_0x31a6ac;let _0x4540e9,_0x4374b8;if(_0x2c8555[_0x1673db(_0x4795ca._0x4bc8b6)][_0x1673db(_0x4795ca._0x1356c3)](_0x1673db(0x102))&_0x2c8555['isMaster']){_0x51252f=_0x2c8555[_0x1673db(_0x4795ca._0x4bc8b6)][_0x1673db(0x12c)](/#土块画图预设/g,'')[_0x1673db(0xa9)]();let _0xa13121=ml+'/plugins/earth-k-plugin/resources/htys/ys.json';await _0x216b5f[_0x1673db(_0x4795ca._0x31a647)](_0xa13121,(_0x3951dc,_0x3bfeb3)=>{const _0x1b6b6b=_0x1673db;_0x356753=JSON['parse'](_0x3bfeb3[_0x1b6b6b(_0x364ff1._0x5c4519)]()),_0x4374b8=_0x356753[_0x1b6b6b(0xbe)];var _0x5b374f=new RegExp(_0x1b6b6b(0xf4),'g');if(_0x5b374f[_0x1b6b6b(_0x364ff1._0x48a3e6)](_0x51252f))console[_0x1b6b6b(0x16e)](_0x1b6b6b(_0x364ff1._0x4373e4)),_0x4540e9=_0x4374b8[_0x1b6b6b(_0x364ff1._0x25116f)](_0x51fac9=>_0x51fac9[_0x1b6b6b(0x123)]==_0x51252f);else{_0x4540e9=Number(_0x51252f)-0x1;if(_0x4540e9>_0x4374b8[_0x1b6b6b(_0x364ff1._0x315cdb)]){_0x4540e9=-0x1;return;}}}),await sleep(0x1f4),console[_0x1673db(_0x4795ca._0x915fb2)](_0x4540e9);if(_0x4540e9!=-0x1)res4=_0x4374b8[_0x4540e9][_0x1673db(0x105)];else{_0x2c8555[_0x1673db(_0x4795ca._0x5b4057)](_0x1673db(_0x4795ca._0x2c901f));return;}}await sleep(0x1f4),_0x2c8555['reply'](_0x1673db(_0x4795ca._0x415d59));let _0x2a2027=Math[_0x1673db(_0x4795ca._0xd85675)](Math['random']()*0x2);_0x2a2027==0x0&&(changdu=0x200,kuandu=0x300);_0x2a2027==0x1&&(changdu=0x300,kuandu=0x200);console['log'](_0x2a2027),console[_0x1673db(0x16e)](res4);var _0x31d7bc=_0x1673db(_0x4795ca._0x2505eb),_0x5e50b6=[res4,pc,_0x1673db(_0x4795ca._0x248660),_0x1673db(_0x4795ca._0x58de78),0x14,_0x1673db(0x129),![],![],0x1,0x1,0x7,-0x1,-0x1,0x0,0x0,0x0,![],changdu,kuandu,![],![],0.7,_0x1673db(0xa7),![],![],null,'','Seed','',_0x1673db(_0x4795ca._0x5e1a13),'',!![],![],null,'',''],_0x3f76d9=[res4,pc,_0x1673db(_0x4795ca._0x3a4fd7),_0x1673db(0xa7),0x1c,_0x1673db(_0x4795ca._0x1ea205),![],![],0x1,0x1,0xb,-0x1,-0x1,0x0,0x0,0x0,![],0x200,0x200,![],![],0.7,_0x1673db(0xa7),![],![],null,'',_0x1673db(0x154),'',_0x1673db(0xb5),'',!![],![],null,'',''];let _0x1ac030=_0x1673db(_0x4795ca._0x11bd9f),_0x5253f2=Math[_0x1673db(_0x4795ca._0xd85675)](Math['random']()*0xb6cff090),_0x192d70=_0x1673db(_0x4795ca._0x48b599)+moxing+'\x20\x20\x20|规模:'+guimo[_0x1673db(_0x4795ca._0x4e032c)]()+_0x1673db(_0x4795ca._0x5bc270)+bushu['toString']()+'\x20\x20\x20\x20\x20\x20\x20\x20|seed:'+_0x5253f2[_0x1673db(_0x4795ca._0x3730e3)](),_0x2d637f='';try{_0x2d637f=_0x216b5f[_0x1673db(_0x4795ca._0x2339c1)](_0x1673db(_0x4795ca._0x55cebe));}catch{_0x2c8555[_0x1673db(0xc1)](_0x1673db(0xed));return;}_0x2d637f=_0x2d637f[_0x1673db(0x15c)]();let _0x4c76ad=_0x49c627[_0x1673db(0xb0)](_0x216b5f[_0x1673db(_0x4795ca._0x2339c1)](_0x1673db(0xeb),_0x1673db(0x175)));_0x4c76ad=_0x4c76ad[_0x1673db(_0x4795ca._0x595153)][0x0];try{_0x1ac030=_0x1673db(0xae)+res4+'&tk='+_0x2d637f+_0x1673db(0x13c)+String(_0x4c76ad)+_0x1673db(0xde)+ss+'&width='+kuandu+_0x1673db(_0x4795ca._0x53b21a)+changdu+'&scale='+guimo+_0x1673db(_0x4795ca._0x4be3b9)+moxing+'&steps='+bushu+_0x1673db(_0x4795ca._0x1ac5bc)+pc,res=await _0x399c91(_0x1ac030),console[_0x1673db(_0x4795ca._0x915fb2)](_0x1673db(_0x4795ca._0x4f0075));}catch(_0x38ed4b){console[_0x1673db(_0x4795ca._0x656f6c)](_0x38ed4b),console[_0x1673db(0x16e)]('没有访问成功');}res=await res[_0x1673db(0x142)]();if(res==_0x1673db(0xe4)){console[_0x1673db(0x16e)]('没有访问成功'),_0x1ac030=dz2;return;}if(!res['includes'](_0x1673db(0xb9))){_0x2c8555[_0x1673db(0xc1)]('密钥错误，或者遇上问题了'),kg2=0x0;return;}res=res['replace'](/id: 1/g,'')[_0x1673db(_0x4795ca._0x3084fc)](),res=res[_0x1673db(0x12c)](/event: newImage/g,'')['trim'](),res=res[_0x1673db(0x12c)](/data:/g,'')['trim'](),await _0x216b5f['writeFile'](_0x1673db(_0x4795ca._0x333fce),res['toString'](),'base64',_0x4b7fb0=>{const _0x4f7d68=_0x1673db;_0x4b7fb0?console[_0x4f7d68(0x16e)](_0x4f7d68(_0x225cd6._0x32e677)):console['log'](_0x4f7d68(0x164));});iscanshu==0x0&&(_0x192d70='');await sleep(0x1f4),msg2=[segment[_0x1673db(_0x4795ca._0x5b6156)](_0x1673db(_0x4795ca._0x333fce)),_0x192d70];let _0x3bde32=await _0x2c8555[_0x1673db(_0x4795ca._0x77604a)](msg2,ishuifu);iscd=0x1,console[_0x1673db(_0x4795ca._0x656f6c)](_0x3bde32[_0x1673db(_0x4795ca._0x5d78ca)],isch);if(_0x3bde32&&_0x3bde32[_0x1673db(0xee)]&&isch==0x1&&_0x2c8555[_0x1673db(_0x4795ca._0x1120fa)]){let _0x3126d4=_0x2c8555['group'];setTimeout(()=>{const _0x14e981=_0x1673db;_0x3126d4['recallMsg'](_0x3bde32[_0x14e981(0xee)]);},timeout);}startTimeMS=new Date()['getTime'](),t=setTimeout(()=>{kg2=0x0,iscd=0x0;},cd);}else{if(iscd==0x1){let _0x3fc25e=cd-(new Date()['getTime']()-startTimeMS);_0x3fc25e=Math[_0x1673db(_0x4795ca._0x591ba5)](_0x3fc25e/0x3e8);if(_0x3fc25e<0x0){kg2=0x0;return;}_0x2c8555[_0x1673db(0xc1)]('我在cd中，还有'+String(_0x3fc25e)+_0x1673db(_0x4795ca._0x5cd54b));}else _0x2c8555['reply']('正在画图中，我知道你很急，但是你先别急。');}}}async function imgUrlToBase64(_0x5dec2c){const _0x24583c={_0x2f68ae:0xa3},_0x1528f8={_0x490768:0x110};let _0x75808c;return new Promise(function(_0x536ebb,_0x17bdf7){const _0x5a0460={_0x3c4338:0x174},_0x1770f5=_0x5f06;let _0x159c6a=http['get'](_0x5dec2c,function(_0x1a266a){const _0x3aac1d=_0x5f06;var _0x22c711=[],_0xe3c4ec=0x0;_0x1a266a['on'](_0x3aac1d(_0x5a0460._0x3c4338),function(_0x41b6e9){const _0x20f0f9=_0x3aac1d;_0x22c711['push'](_0x41b6e9),_0xe3c4ec+=_0x41b6e9[_0x20f0f9(0xc2)];}),_0x1a266a['on']('end',function(_0x1dde0e){const _0x5d672a=_0x3aac1d;var _0x127c2e=Buffer['concat'](_0x22c711,_0xe3c4ec);_0x75808c=_0x127c2e['toString'](_0x5d672a(0x106)),_0x536ebb({'success':!![],'base64Img':_0x75808c});});});_0x159c6a['on'](_0x1770f5(_0x24583c._0x2f68ae),_0x197db9=>{const _0x12cb35=_0x1770f5;_0x536ebb({'success':![],'errmsg':_0x197db9[_0x12cb35(_0x1528f8._0x490768)]});}),_0x159c6a['end']();});}function sleep(_0x2c6fa6){return new Promise(_0xd7713d=>setTimeout(_0xd7713d,_0x2c6fa6));}async function dqpz(){const _0x156585={_0x3b39cb:0x15c},_0x266d73=_0x1e244c;Path=ml+_0x266d73(0x167),await _0x216b5f[_0x266d73(0x143)](Path,(_0x3b80d8,_0x20f07b)=>{const _0x296736=_0x266d73;nr=_0x20f07b[_0x296736(_0x156585._0x3b39cb)](),nr=nr[_0x296736(0xdb)](','),cd=nr[0x0],timeout=nr[0x1],isch=nr[0x2],iscd=nr[0x3],console['log'](cd,timeout,isch,iscd);}),await sleep(0x1f4);}async function getAgent(){const _0xd7d607={_0x5b3675:0xa0},_0x39ccc5={_0x398f5c:0xa3},_0x1a7dcc=_0x1e244c;let _0x363e90=_0x40e892[_0x1a7dcc(_0xd7d607._0x5b3675)]['proxyAddress'];if(!_0x363e90)return null;if(_0x363e90===_0x1a7dcc(0x15d))return null;HttpsProxyAgent===''&&(HttpsProxyAgent=await import('https-proxy-agent')['catch'](_0x1e6183=>{const _0x19e2e9=_0x1a7dcc;logger[_0x19e2e9(_0x39ccc5._0x398f5c)](_0x1e6183);}),HttpsProxyAgent=HttpsProxyAgent?HttpsProxyAgent[_0x1a7dcc(0x112)]:undefined);if(HttpsProxyAgent)return new HttpsProxyAgent(_0x363e90);return null;}