const _0x294d=['已关闭画图撤回','我没画成功，再来一次吧。','readFile','message_id','你还不可以用该功能哦','已关闭画图冷却','message','random','k_lms','已设置冷却时间为','^#绘个图(.*)$|#土块画图预设(.*)$','img','msg','findIndex','30秒还未发图，以图生草已取消','base64Img','当前预设有：\x0a','toString','reply','包含中文','abc','application/json','#土块画图冷却关闭','qvht','规模不在合理范围内，3-12为合理范围','json','./2.png','sj2','好吧，那就一起来吧！','#新增预设','\x0a规模：','shuju','huatu3','[\x5cu4E00-\x5cu9FFF]+','end','已开启画图撤回，撤回时间为30秒','Mozilla/5.0\x20(Windows\x20NT\x206.1;\x20WOW64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/86.0.4240.198\x20Safari/537.36','好的，权限已经关闭，只有你能画了','None','Seed','ODg3ODh9.Em-FPcAzz7YIWWg65V_9y2KH6IMzvoI7_TzCpRbWuZU','好的，我开始画图了，请稍等哦','cwd','#以图生草相似度','\x0a降噪：','isGroup','splice','trim','请添加预设关键词','\x20http://www.iinside.cn:7001/api_req?reqmode=nmt_mt5_jez&password=3652&text=','split','秒可画','\x0a相似度：','miyao2','以图生草暂不支持私聊','#删除预设','/2.png','写入文件成功','以图生草','#所有人可画','好的，已关闭了','huatu2','http','新增预设成功','预设包含中文','k_euler_ancestral','#土块画图撤回开启','isMaster','我知道你要干嘛！注意身体！','文件写入成功！','push','writeFileSync','get','includes','^#土块画图模型(.*)|^#查看所有模型','https://api.66mz8.com/api/translation.php?info=','lowres,nude,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry,\x20owres,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry','szgm','没有访问成功,尝试换接口','miyao','你不是主人，不能用预设哦','log','模型已设置为plms','^#新增屏蔽词(.*)$|#查看屏蔽词$|#删除屏蔽词$|#开启默认屏蔽词$','getTime','Steps','parse','data','pbc','test','group','error','/plugins/earth-k-plugin/resources/my/my.json','我在cd中，还有','text','土块AI绘个图','writeFile','#土块画图预设','/plugins/earth-k-plugin/resources/htys/ys.json','123','length','#以图生草','已取消当前画图','k_euler','#土块画图步数','Euler\x20a','^#取消画图$|^#所有人可画$|^#仅我可画$|^#土块画图撤回(.*)$|^#土块画图冷却(.*)$|^#土块画图涩涩开启|^#土块画图涩涩关闭','isPrivate','\x0a步数：','没有访问成功哦','./plugins/earth-k-plugin/resources/aiht/ml.html','对不起，你不可画哦','utf-8','1：k_euler_ancestral,\x0a2：k_euler,\x0a3：k_lms,\x0a4：plms,\x0a5：ddim','没有这个预设哦','成功了！','#查看预设','masterpiece,\x20best\x20quality,','szmx','recallMsg','^#土块画图步数(.*)|^#查看画图设置','请发送图片','删除屏蔽词成功','floor','写入文件错误','url','模型已设置为k_lms','stringify','image','好的，我开始以图生草了','replace','当前降噪','模型不在合理范围内，1-5为合理范围','user_id','好的，已开启，请注意身体哦','ddim'];const _0x17e7=function(_0x294de3,_0x17e748){_0x294de3=_0x294de3-0x0;let _0x2c166c=_0x294d[_0x294de3];return _0x2c166c;};import{segment}from'oicq';import _0x344c20 from'node-fetch';import _0x4c2bfd,{chownSync}from'fs';import _0x19de26 from'../../../lib/puppeteer/puppeteer.js';let data1={};import{createRequire}from'module';const require=createRequire(import.meta[_0x17e7('0x7d')]);let ml=process[_0x17e7('0x2a')]();var http=require('http');let yushekg=0x0;let kg=0x0;let guimo=5.5;let kg2=0x0;let res4;let res5;let res;let zr=0x0;let changdu=0x200;let kuandu=0x200;let msg2;let timeout=0x7530;let isch=0x1;let cd=0x0;let t;let startTimeMS;let iscd=0x0;let my;let dz;let sj1;let sj2;let shuju;let zt=0x0;let gjc2;let sc=0x0;let bushu=0x1c;let id='';let xsd=0.4;let nr;let ycqx;let jz=0.2;let ss='nai-diffusion';let Path;let ys=[];let moxing='k_euler';let pc=_0x17e7('0x4c');export class aiht extends plugin{constructor(){super({'name':_0x17e7('0x5f'),'dsc':'土块AI绘个图','event':_0x17e7('0x6'),'priority':0x479,'rule':[{'reg':_0x17e7('0xa'),'fnc':_0x17e7('0x3d')},{'reg':_0x17e7('0x6a'),'fnc':_0x17e7('0x17')},{'reg':_0x17e7('0x53'),'fnc':'pbc'},{'reg':'^#以图生草(.*)$|(.*)','fnc':'huatu3','log':![]},{'reg':'^#查看所有预设$|#新增预设(.*)|(.*)','fnc':'ysgn','log':![]},{'reg':'^#土块画图规模(.*)','fnc':_0x17e7('0x4d')},{'reg':_0x17e7('0x4a'),'fnc':_0x17e7('0x76')},{'reg':_0x17e7('0x78'),'fnc':'szbs'}]});}async['szbs'](_0x7a6c4a){if(_0x7a6c4a[_0x17e7('0xc')]=='#查看画图设置'){console[_0x17e7('0x51')](guimo);let _0x188506=['模型：',moxing,_0x17e7('0x1e'),guimo[_0x17e7('0x11')](),_0x17e7('0x6c'),bushu['toString'](),_0x17e7('0x34'),xsd[_0x17e7('0x11')](),_0x17e7('0x2c'),jz['toString']()];_0x7a6c4a[_0x17e7('0x12')](_0x188506);return;}if(_0x7a6c4a[_0x17e7('0xc')][_0x17e7('0x49')](_0x17e7('0x68'))){bushu=_0x7a6c4a['msg'][_0x17e7('0x82')](/#土块画图步数/g,'')['trim']();bushu=Number(bushu);if(bushu<0x0|bushu>0x1c){_0x7a6c4a['reply']('步数不在合理范围内，28以下为合理范围');return;}else{_0x7a6c4a[_0x17e7('0x12')]('步数已设置为'+String(bushu));}}}async[_0x17e7('0x76')](_0x123e17){if(_0x123e17['msg']=='#查看所有模型'){let _0x48109c=[_0x17e7('0x71')];_0x123e17['reply'](_0x48109c);return;}moxing=_0x123e17['msg'][_0x17e7('0x82')](/#土块画图模型/g,'')['trim']();moxing=Number(moxing);if(moxing<0x0|moxing>0x5){_0x123e17[_0x17e7('0x12')](_0x17e7('0x84'));return;}if(moxing==0x1){moxing=_0x17e7('0x41');_0x123e17['reply']('模型已设置为k_euler_ancestral');}if(moxing==0x2){moxing=_0x17e7('0x67');_0x123e17[_0x17e7('0x12')]('模型已设置为k_euler');}if(moxing==0x3){moxing=_0x17e7('0x8');_0x123e17[_0x17e7('0x12')](_0x17e7('0x7e'));}if(moxing==0x4){moxing='plms';_0x123e17['reply'](_0x17e7('0x52'));}if(moxing==0x5){moxing=_0x17e7('0x87');_0x123e17['reply']('模型已设置为ddim');}}async['szgm'](_0x75ee08){guimo=_0x75ee08[_0x17e7('0xc')][_0x17e7('0x82')](/#土块画图规模/g,'')[_0x17e7('0x2f')]();guimo=Number(guimo);if(guimo<0x3|guimo>0xc){_0x75ee08['reply'](_0x17e7('0x18'));return;}else{_0x75ee08['reply']('规模已设置为'+String(guimo));}}async['ysgn'](_0x3f60c7){if(yushekg==0x0&_0x3f60c7['msg'][_0x17e7('0x49')](_0x17e7('0x74'))==![]&_0x3f60c7[_0x17e7('0xc')][_0x17e7('0x49')](_0x17e7('0x1d'))==![]&_0x3f60c7['msg'][_0x17e7('0x49')](_0x17e7('0x37'))==![]){return![];}let _0xf46a2c=ml+'/plugins/earth-k-plugin/resources/htys/ys.json';let _0x48fff8='';await _0x4c2bfd[_0x17e7('0x2')](_0xf46a2c,(_0x20cb23,_0xc08875)=>{if(_0x20cb23)throw _0x20cb23;var _0x21ba5f=_0xc08875['toString']()!=''?JSON['parse'](_0xc08875[_0x17e7('0x11')]()):[];shuju=_0x21ba5f;for(let _0x827520=0x0;_0x827520<shuju[_0x17e7('0x1f')]['length'];_0x827520++){_0x48fff8=_0x48fff8+shuju[_0x17e7('0x1f')][_0x827520]['name']+',';}});await sleep(0x1f4);if(_0x3f60c7[_0x17e7('0xc')]==_0x17e7('0x74')&_0x3f60c7['isMaster']){_0x48fff8=_0x48fff8[_0x17e7('0x32')](',');data1={'tplFile':_0x17e7('0x6e'),'dz':ml,'lb':_0x48fff8,'qsid':0x0};let _0x62dc4c=await _0x19de26['screenshot'](_0x17e7('0x63'),{...data1});_0x3f60c7['reply'](_0x62dc4c);return;_0x3f60c7[_0x17e7('0x12')](_0x17e7('0x10')+_0x48fff8);}if(_0x3f60c7['msg'][_0x17e7('0x49')](_0x17e7('0x37'))&_0x3f60c7[_0x17e7('0x43')]){let _0x30ed4c=_0x3f60c7['msg'][_0x17e7('0x82')](/#删除预设/g,'')[_0x17e7('0x2f')]();_0x30ed4c=Number(_0x30ed4c);if(_0x30ed4c<shuju[_0x17e7('0x1f')][_0x17e7('0x64')]+0x1){shuju[_0x17e7('0x1f')][_0x17e7('0x2e')](_0x30ed4c-0x1,0x1);var _0x404d06=JSON[_0x17e7('0x7f')](shuju);}_0x4c2bfd[_0x17e7('0x60')](_0xf46a2c,_0x404d06,function(_0x5210dd){if(_0x5210dd){console['error'](_0x5210dd);}_0x3f60c7['reply']('删除预设成功');});}if(_0x3f60c7['msg'][_0x17e7('0x49')]('#新增预设')&_0x3f60c7['isMaster']&yushekg==0x0){yushekg=0x1;ys[0x0]=_0x3f60c7['msg'][_0x17e7('0x82')](/#新增预设/g,'')['trim']();_0x3f60c7[_0x17e7('0x12')](_0x17e7('0x30'));return;}if(yushekg==0x1&_0x3f60c7['isMaster']){yushekg=0x0;ys[0x1]=_0x3f60c7[_0x17e7('0xc')];let _0x4039c1={'name':ys[0x0],'gjc':ys[0x1]};shuju['shuju'][_0x17e7('0x46')](_0x4039c1);var _0x404d06=JSON['stringify'](shuju);_0x4c2bfd['writeFile'](_0xf46a2c,_0x404d06,_0x322bee=>{if(_0x322bee)throw _0x322bee;console[_0x17e7('0x51')](_0x17e7('0x45'));_0x3f60c7[_0x17e7('0x12')](_0x17e7('0x3f'));});return;}}async[_0x17e7('0x58')](_0x15347f){if(_0x15347f[_0x17e7('0xc')]['includes']('#新增屏蔽词')&_0x15347f['isMaster']){_0x15347f['reply']('新增屏蔽词成功');pc=_0x15347f[_0x17e7('0xc')]['replace'](/#新增屏蔽词/g,'')['trim']();}if(_0x15347f['msg']=='#查看屏蔽词'&_0x15347f['isMaster']){_0x15347f['reply'](['当前屏蔽词有：',pc]);}if(_0x15347f[_0x17e7('0xc')][_0x17e7('0x49')]('#删除屏蔽词')&_0x15347f['isMaster']){_0x15347f['reply'](_0x17e7('0x7a')+_0x17e7('0x44'));pc='';}if(_0x15347f['msg'][_0x17e7('0x49')]('#开启默认屏蔽词')&_0x15347f['isMaster']){_0x15347f[_0x17e7('0x12')]('已经开启默认屏蔽词');pc=_0x17e7('0x4c');}}async['qvht'](_0x5d7cea){if(_0x5d7cea[_0x17e7('0xc')]=='#土块画图涩涩开启'&_0x5d7cea['isMaster']){_0x5d7cea[_0x17e7('0x12')](_0x17e7('0x86'));ss='nai-diffusion';}if(_0x5d7cea['msg']=='#土块画图涩涩关闭'&_0x5d7cea[_0x17e7('0x43')]){_0x5d7cea[_0x17e7('0x12')](_0x17e7('0x3c'));ss='safe-diffusion';}await dqpz();if(_0x5d7cea['msg']['includes'](_0x17e7('0x16'))&_0x5d7cea[_0x17e7('0x43')]){nr[0x3]=0x0;nr[0x0]=0x0;_0x4c2bfd['writeFileSync'](Path,nr[_0x17e7('0x11')](),_0x17e7('0x70'));cd=0x0;kg2=0x0;kg=0x0;sc=0x0;iscd=0x0;_0x5d7cea['reply'](_0x17e7('0x5'));return;}if(_0x5d7cea[_0x17e7('0xc')][_0x17e7('0x49')]('#土块画图冷却开启')&_0x5d7cea[_0x17e7('0x43')]){nr[0x0]=0x7530;nr[0x3]=0x1;_0x4c2bfd[_0x17e7('0x47')](Path,nr['toString'](),_0x17e7('0x70'));cd=0x7530;_0x5d7cea['reply']('已开启画图冷却，冷却时间为30秒');return;}if(_0x5d7cea['msg']['includes']('#土块画图冷却')&_0x5d7cea[_0x17e7('0x43')]){let _0x111ba6=_0x5d7cea[_0x17e7('0xc')][_0x17e7('0x82')](/#土块画图冷却/g,'')[_0x17e7('0x2f')]();cd=Number(_0x111ba6)*0x3e8;nr[0x0]=cd;nr[0x3]=0x1;_0x4c2bfd['writeFileSync'](Path,nr[_0x17e7('0x11')](),_0x17e7('0x70'));_0x5d7cea['reply'](_0x17e7('0x9')+_0x111ba6+'秒');}if(_0x5d7cea['msg']['includes']('#土块画图撤回关闭')&_0x5d7cea[_0x17e7('0x43')]){nr[0x2]=0x0;_0x4c2bfd[_0x17e7('0x47')](Path,nr['toString'](),_0x17e7('0x70'));isch=0x0;_0x5d7cea[_0x17e7('0x12')](_0x17e7('0x0'));return;}if(_0x5d7cea['msg'][_0x17e7('0x49')](_0x17e7('0x42'))&_0x5d7cea[_0x17e7('0x43')]){isch=0x1;nr[0x1]=0x7530;nr[0x2]=0x1;_0x4c2bfd['writeFileSync'](Path,nr[_0x17e7('0x11')](),_0x17e7('0x70'));timeout=0x7530;_0x5d7cea[_0x17e7('0x12')](_0x17e7('0x23'));return;}if(_0x5d7cea[_0x17e7('0xc')]['includes']('#土块画图撤回')&_0x5d7cea['isMaster']){isch=0x1;let _0x54d648=_0x5d7cea['msg'][_0x17e7('0x82')](/#土块画图撤回/g,'')[_0x17e7('0x2f')]();timeout=Number(_0x54d648)*0x3e8;nr[0x1]=timeout;nr[0x2]=0x1;_0x4c2bfd[_0x17e7('0x47')](Path,nr[_0x17e7('0x11')](),'utf-8');_0x5d7cea['reply']('已设置撤回时间为'+_0x54d648+'秒');}if(_0x5d7cea[_0x17e7('0xc')]=='#取消画图'){kg=0x0;sc=0x0;zt=0x0;id='';console['log']('已经取消');kg2=0x0;_0x5d7cea['reply'](_0x17e7('0x66'));}if(_0x5d7cea[_0x17e7('0xc')]==_0x17e7('0x3b')&_0x5d7cea['isMaster']){_0x5d7cea[_0x17e7('0x12')](_0x17e7('0x1c'));zr=0x0;}if(_0x5d7cea['msg']=='#仅我可画'&_0x5d7cea[_0x17e7('0x43')]){_0x5d7cea[_0x17e7('0x12')](_0x17e7('0x25'));zr=0x1;}}async[_0x17e7('0x20')](_0x1da6de){if(_0x1da6de['img']==undefined&_0x1da6de[_0x17e7('0xc')]!=undefined){if(_0x1da6de[_0x17e7('0xc')][_0x17e7('0x49')]('#以图生草')==![]&_0x1da6de[_0x17e7('0xb')]==undefined&zt==0x0){return![];}}if(_0x1da6de[_0x17e7('0xb')]==undefined&zt==0x1){return![];}if(_0x1da6de[_0x17e7('0xb')]==undefined&_0x1da6de[_0x17e7('0xc')]!=undefined){dqpz();if(_0x1da6de[_0x17e7('0xc')]['includes'](_0x17e7('0x2b'))&_0x1da6de[_0x17e7('0x43')]){xsd=Number(_0x1da6de[_0x17e7('0xc')][_0x17e7('0x82')](/#以图生草相似度/g,'')[_0x17e7('0x2f')]())/0x64;_0x1da6de['reply']('当前相似度'+String(xsd));console[_0x17e7('0x51')](xsd);return;}if(_0x1da6de['msg'][_0x17e7('0x49')]('#以图生草降噪')&_0x1da6de[_0x17e7('0x43')]){jz=Number(_0x1da6de[_0x17e7('0xc')][_0x17e7('0x82')](/#以图生草降噪/g,'')['trim']())/0x64;_0x1da6de['reply'](_0x17e7('0x83')+String(jz));console['log'](jz);return;}if(zt==0x0&&sc==0x0&&_0x1da6de['msg']['includes']('#以图生草')){if(_0x1da6de[_0x17e7('0x6b')]){_0x1da6de['reply'](_0x17e7('0x36'));return;}console['log'](_0x17e7('0x3a'));id=_0x1da6de[_0x17e7('0x85')];gjc2=_0x1da6de[_0x17e7('0xc')][_0x17e7('0x82')](/#以图生草/g,'')[_0x17e7('0x2f')]();var _0x14cc2a=new RegExp(_0x17e7('0x21'),'g');if(_0x14cc2a['test'](gjc2)){console[_0x17e7('0x51')](_0x17e7('0x13'));let _0x133e82='https://api.sdgou.cc/api/fanyi/?msg='+gjc2;let _0x384ba8=await _0x344c20(_0x133e82);let _0x3f803b=await _0x384ba8[_0x17e7('0x5e')]();_0x3f803b=_0x3f803b[_0x17e7('0x82')](/有道翻译查询结果/g,'')[_0x17e7('0x2f')]();_0x3f803b=_0x3f803b[_0x17e7('0x82')](/翻译后/g,'')[_0x17e7('0x2f')]();_0x3f803b=_0x3f803b[_0x17e7('0x82')](/翻译前/g,'')[_0x17e7('0x2f')]();_0x3f803b=_0x3f803b[_0x17e7('0x82')](/：/g,'')[_0x17e7('0x2f')]();_0x3f803b=_0x3f803b['replace'](new RegExp(gjc2,'g'),'');gjc2=_0x3f803b;console['log'](gjc2);}else{console[_0x17e7('0x51')]('是英文');}zt=0x1;ycqx=setTimeout(()=>{if(zt==0x1){zt=0x0;_0x1da6de['reply'](_0x17e7('0xe'));return;}},0x7530);_0x1da6de[_0x17e7('0x12')]([segment['at'](id),_0x17e7('0x79')]);return;}}if(sc==0x0&_0x1da6de[_0x17e7('0x2d')]&zt==0x1&_0x1da6de[_0x17e7('0xb')]!=undefined){clearTimeout(ycqx);let _0x3ddd2f=ml+_0x17e7('0x5c');let _0x972248;await _0x4c2bfd[_0x17e7('0x2')](_0x3ddd2f,(_0x19f91a,_0x23b286)=>{my=JSON['parse'](_0x23b286['toString']());dz=my[_0x17e7('0x35')];_0x972248=my['yh2'];});await sleep(0x1f4);if(_0x1da6de[_0x17e7('0x85')]==id&zt==0x1){sc=0x1;let _0xd9096=await imgUrlToBase64(_0x1da6de['img'][0x0][_0x17e7('0x82')](/https/g,_0x17e7('0x3e'))['trim']());let _0x43bf10=_0xd9096[_0x17e7('0xf')];let _0x4907c3=Math['floor'](Math[_0x17e7('0x7')]()*0xb6cff090);var _0x7f931b={'prompt':_0x17e7('0x75')+gjc2,'width':0x180,'height':0x200,'scale':guimo,'sampler':moxing,'steps':0x32,'seed':_0x4907c3,'n_samples':0x1,'strength':0x1-xsd,'noise':jz,'ucPreset':0x0,'image':_0x43bf10,'uc':pc};_0x1da6de['reply'](_0x17e7('0x81'));zt=0x0;try{res=await _0x344c20(dz,{'method':'post','body':JSON[_0x17e7('0x7f')](_0x7f931b),'headers':{'Content-Type':_0x17e7('0x15'),'User-Agent':_0x17e7('0x24')}});}catch(_0x32b190){console['log'](_0x32b190);console['log']('没有访问成功');kg=0x0;return;}let _0x45198d=await res[_0x17e7('0x5e')]();_0x45198d=_0x45198d[_0x17e7('0x82')](/id: 1/g,'')['trim']();_0x45198d=_0x45198d['replace'](/event: newImage/g,'')[_0x17e7('0x2f')]();_0x45198d=_0x45198d[_0x17e7('0x82')](/data:/g,'')['trim']();if(res==''){_0x1da6de[_0x17e7('0x12')]('我没画成功，再来一次吧。');return;}_0x1da6de[_0x17e7('0x12')](_0x17e7('0x73'));await _0x4c2bfd[_0x17e7('0x60')]('./3.jpg',_0x45198d[_0x17e7('0x11')](),'base64',_0x289eff=>{if(_0x289eff){console['log'](_0x17e7('0x7c'));}else{console[_0x17e7('0x51')](_0x17e7('0x39'));}});msg2=[segment['at'](_0x1da6de[_0x17e7('0x85')]),segment[_0x17e7('0x80')](ml+'/3.jpg')];await sleep(0x1f4);let _0x23cdfd=await _0x1da6de['reply'](msg2);iscd=0x1;console['log'](_0x23cdfd['message_id'],isch);if(_0x23cdfd&&_0x23cdfd[_0x17e7('0x3')]&&isch==0x1&&_0x1da6de[_0x17e7('0x2d')]){let _0x208168=_0x1da6de['group'];setTimeout(()=>{_0x208168[_0x17e7('0x77')](_0x23cdfd['message_id']);},timeout);}startTimeMS=new Date()[_0x17e7('0x54')]();t=setTimeout(()=>{iscd=0x0;sc=0x0;id='';},cd);}}else if(_0x1da6de['img']==undefined&_0x1da6de[_0x17e7('0xc')]!=undefined){if(_0x1da6de['msg']['includes'](_0x17e7('0x65'))){if(iscd==0x1){console[_0x17e7('0x51')](iscd);let _0xf5b00=cd-(new Date()['getTime']()-startTimeMS);_0xf5b00=Math['round'](_0xf5b00/0x3e8);if(_0xf5b00<0x0){sc=0x0;id='';return;}_0x1da6de['reply']('我在cd中，还有'+String(_0xf5b00)+'秒可画');}else{_0x1da6de[_0x17e7('0x12')]('正在生草中，我知道你很急，先别急');}}}}async['huatu2'](_0x1384cb){dqpz();let _0x438eae=ml+_0x17e7('0x5c');let _0x5ded10;let _0x31aed7;let _0xcac50d;await _0x4c2bfd['readFile'](_0x438eae,(_0x2edd68,_0x5a3dbc)=>{my=JSON[_0x17e7('0x56')](_0x5a3dbc[_0x17e7('0x11')]());dz=my[_0x17e7('0x4f')];sj1=my['sj1'];sj2=my[_0x17e7('0x1b')];_0x5ded10=my['zh'];_0x31aed7=my['miyao2'];_0xcac50d=my['yh2'];});await sleep(0x1f4);if(dz==''){_0x1384cb['reply'](_0x17e7('0x4'));return;}if(_0x1384cb['msg']['includes']('#土块画图预设')&!_0x1384cb['isMaster']){_0x1384cb['reply'](_0x17e7('0x50'));return;}let _0x2748f0;let _0x5305aa;let _0x4fa94c;if(_0x1384cb['msg']['includes'](_0x17e7('0x61'))==![]){_0x4fa94c=_0x1384cb[_0x17e7('0xc')][_0x17e7('0x82')](/#绘个图/g,'')['trim']();}if(kg2==0x0&_0x1384cb['isGroup']|_0x1384cb['isMaster']){if(kg2==0x1){_0x1384cb[_0x17e7('0x12')]('你是主人，没有cd，欸嘿');}if(zr==0x1&!_0x1384cb['isMaster']){_0x1384cb[_0x17e7('0x12')](_0x17e7('0x6f'));return;}kg2=0x1;let _0x25ca05=_0x4fa94c;var _0x2f79f9=new RegExp('[\x5cu4E00-\x5cu9FFF]+','g');if(_0x2f79f9[_0x17e7('0x59')](_0x25ca05)){console['log'](_0x17e7('0x13'));let _0x34ec9f='https://api.sdgou.cc/api/fanyi/?msg='+_0x25ca05;let _0x4f862c=await _0x344c20(_0x34ec9f);let _0x1c0fd7=await _0x4f862c[_0x17e7('0x5e')]();_0x1c0fd7=_0x1c0fd7[_0x17e7('0x82')](/有道翻译查询结果/g,'')[_0x17e7('0x2f')]();_0x1c0fd7=_0x1c0fd7[_0x17e7('0x82')](/翻译后/g,'')[_0x17e7('0x2f')]();_0x1c0fd7=_0x1c0fd7[_0x17e7('0x82')](/翻译前/g,'')[_0x17e7('0x2f')]();_0x1c0fd7=_0x1c0fd7[_0x17e7('0x82')](/：/g,'')['trim']();_0x1c0fd7=_0x1c0fd7[_0x17e7('0x82')](new RegExp(_0x25ca05,'g'),'');res4=_0x1c0fd7;if(res4==''){let _0x27626d=_0x17e7('0x31')+_0x4fa94c+'&order=zh2en';res4=await _0x344c20(_0x27626d);res4=await res4['json']();res4=res4[_0x17e7('0x57')];}if(res4==''){let _0x2ba01c=_0x17e7('0x4b')+_0x4fa94c;res4=await _0x344c20(_0x2ba01c);res4=await res4[_0x17e7('0x19')]();res4=res4['fanyi'];}console['log'](res4);}else{console[_0x17e7('0x51')]('是英文');res4=_0x25ca05;}let _0x14d47a;let _0xefbfc5;if(_0x1384cb['msg']['includes']('#土块画图预设')&_0x1384cb[_0x17e7('0x43')]){_0x5305aa=_0x1384cb['msg']['replace'](/#土块画图预设/g,'')['trim']();let _0x5bf679=ml+_0x17e7('0x62');await _0x4c2bfd[_0x17e7('0x2')](_0x5bf679,(_0x2084a5,_0x1a5061)=>{_0x2748f0=JSON['parse'](_0x1a5061['toString']());_0xefbfc5=_0x2748f0[_0x17e7('0x1f')];var _0x320e04=new RegExp('[\x5cu4E00-\x5cu9FFF]+','g');if(_0x320e04[_0x17e7('0x59')](_0x5305aa)){console[_0x17e7('0x51')](_0x17e7('0x40'));_0x14d47a=_0xefbfc5[_0x17e7('0xd')](_0x3c28bd=>_0x3c28bd['name']==_0x5305aa);}else{_0x14d47a=Number(_0x5305aa)-0x1;if(_0x14d47a>_0xefbfc5[_0x17e7('0x64')]){_0x14d47a=-0x1;return;}}});await sleep(0x1f4);console[_0x17e7('0x51')](_0x14d47a);if(_0x14d47a!=-0x1){res4=_0xefbfc5[_0x14d47a]['gjc'];}else{_0x1384cb[_0x17e7('0x12')](_0x17e7('0x72'));return;}}await sleep(0x1f4);_0x1384cb[_0x17e7('0x12')](_0x17e7('0x29'));let _0x496b06=Math[_0x17e7('0x7b')](Math['random']()*0x2);if(_0x496b06==0x0){changdu=0x200;kuandu=0x300;}if(_0x496b06==0x1){changdu=0x300;kuandu=0x200;}console['log'](_0x496b06);console[_0x17e7('0x51')](res4);var _0x494cdc=_0x17e7('0x14');var _0x497c47=[res4,pc,'None',_0x17e7('0x26'),0x14,_0x17e7('0x69'),![],![],0x1,0x1,0x7,-0x1,-0x1,0x0,0x0,0x0,![],changdu,kuandu,![],![],0.7,'None',![],![],null,'',_0x17e7('0x27'),'',_0x17e7('0x55'),'',!![],![],null,'',''];var _0x2befad=[res4,pc,'None','None',0x1c,'Euler\x20a',![],![],0x1,0x1,0xb,-0x1,-0x1,0x0,0x0,0x0,![],0x200,0x200,![],![],0.7,'None',![],![],null,'',_0x17e7('0x27'),'','Steps','',!![],![],null,'',''];let _0x509cd2=dz;let _0x4739ae=Math['floor'](Math[_0x17e7('0x7')]()*0xb6cff090);try{res=await _0x344c20(_0x509cd2,{'method':'post','headers':{'Content-Type':'application/json','authorization':_0x5ded10},'body':JSON[_0x17e7('0x7f')]({'input':'masterpiece,\x20best\x20quality,\x20'+res4,'model':ss,'parameters':{'width':kuandu,'height':changdu,'scale':guimo,'sampler':moxing,'steps':bushu,'seed':_0x4739ae,'n_samples':0x1,'ucPreset':0x0,'uc':pc}})});console['log']('访问成功了');}catch(_0x5e7761){console['log'](_0x5e7761);console['log'](_0x17e7('0x4e'));_0x509cd2=_0x31aed7;let _0x134464=Math['floor'](Math[_0x17e7('0x7')]()*0x2);if(_0x134464==0x0){changdu=0x200;kuandu=0x180;}if(_0x134464==0x1){changdu=0x180;kuandu=0x200;}console['log'](_0x134464);try{res=await _0x344c20(_0x509cd2,{'method':'post','headers':{'Content-Type':_0x17e7('0x15'),'authorization':_0xcac50d},'body':JSON[_0x17e7('0x7f')]({'prompt':'masterpiece,\x20best\x20quality,'+res4,'width':kuandu,'height':changdu,'scale':guimo,'sampler':moxing,'steps':0x14,'seed':_0x4739ae,'n_samples':0x1,'ucPreset':0x0,'uc':'lowres,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry'})});}catch(_0x3b3cd3){console['log'](_0x3b3cd3);_0x1384cb[_0x17e7('0x12')](_0x17e7('0x6d'));kg2=0x0;return;}}res=await res['text']();if(res=='{\x22error\x22:\x22unknown\x20error\x22}'){console[_0x17e7('0x51')](_0x17e7('0x4e'));_0x509cd2=_0x31aed7;try{res=await _0x344c20(_0x509cd2,{'method':'post','headers':{'Content-Type':'application/json','authorization':_0xcac50d+_0x17e7('0x28')},'body':JSON['stringify']({'prompt':_0x17e7('0x75')+res4,'width':kuandu,'height':changdu,'scale':guimo,'sampler':_0x17e7('0x41'),'steps':0x14,'seed':_0x4739ae,'n_samples':0x1,'ucPreset':0x0,'uc':'lowres,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry'})});}catch(_0x114144){console[_0x17e7('0x51')](_0x114144);_0x1384cb[_0x17e7('0x12')]('没有访问成功哦');kg2=0x0;return;}return;}if(!res[_0x17e7('0x49')]('event:\x20newImage')){_0x1384cb[_0x17e7('0x12')]('我没画成功，再来一次吧。');kg2=0x0;return;}res=res[_0x17e7('0x82')](/id: 1/g,'')[_0x17e7('0x2f')]();res=res[_0x17e7('0x82')](/event: newImage/g,'')['trim']();res=res[_0x17e7('0x82')](/data:/g,'')[_0x17e7('0x2f')]();if(res==''){_0x1384cb[_0x17e7('0x12')](_0x17e7('0x1'));kg2=0x0;return;}_0x1384cb['reply'](_0x17e7('0x73'));await _0x4c2bfd[_0x17e7('0x60')](_0x17e7('0x1a'),res[_0x17e7('0x11')](),'base64',_0x32dfaa=>{if(_0x32dfaa){console['log'](_0x17e7('0x7c'));}else{console[_0x17e7('0x51')](_0x17e7('0x39'));}});msg2=[segment['at'](_0x1384cb['user_id']),segment[_0x17e7('0x80')](ml+_0x17e7('0x38'))];await sleep(0x1f4);let _0x5946d2=await _0x1384cb[_0x17e7('0x12')](msg2);iscd=0x1;console['log'](_0x5946d2['message_id'],isch);if(_0x5946d2&&_0x5946d2['message_id']&&isch==0x1&&_0x1384cb['isGroup']){let _0x228d33=_0x1384cb[_0x17e7('0x5a')];setTimeout(()=>{_0x228d33[_0x17e7('0x77')](_0x5946d2[_0x17e7('0x3')]);},timeout);}startTimeMS=new Date()[_0x17e7('0x54')]();t=setTimeout(()=>{kg2=0x0;iscd=0x0;},cd);}else if(iscd==0x1){let _0x3399c4=cd-(new Date()['getTime']()-startTimeMS);_0x3399c4=Math['round'](_0x3399c4/0x3e8);if(_0x3399c4<0x0){kg2=0x0;return;}_0x1384cb['reply'](_0x17e7('0x5d')+String(_0x3399c4)+_0x17e7('0x33'));}else{_0x1384cb[_0x17e7('0x12')]('正在画图中，我知道你很急，但是你先别急。');}}}async function imgUrlToBase64(_0x2e7b2c){let _0x57ee94;return new Promise(function(_0x32630a,_0xe689b9){let _0x3304e0=http[_0x17e7('0x48')](_0x2e7b2c,function(_0x42e2ae){var _0x57f9e7=[];var _0x4fd4fa=0x0;_0x42e2ae['on'](_0x17e7('0x57'),function(_0x4e560b){_0x57f9e7['push'](_0x4e560b);_0x4fd4fa+=_0x4e560b['length'];});_0x42e2ae['on']('end',function(_0x36e5a4){var _0x2fb117=Buffer['concat'](_0x57f9e7,_0x4fd4fa);_0x57ee94=_0x2fb117['toString']('base64');_0x32630a({'success':!![],'base64Img':_0x57ee94});});});_0x3304e0['on'](_0x17e7('0x5b'),_0x17c4a2=>{_0x32630a({'success':![],'errmsg':_0x17c4a2['message']});});_0x3304e0[_0x17e7('0x22')]();});}function sleep(_0xa3afd3){return new Promise(_0xb43df9=>setTimeout(_0xb43df9,_0xa3afd3));}async function dqpz(){Path=ml+'/plugins/earth-k-plugin/resources/pz/pz.txt';await _0x4c2bfd[_0x17e7('0x2')](Path,(_0x4b269b,_0x7c9c46)=>{nr=_0x7c9c46['toString']();nr=nr[_0x17e7('0x32')](',');cd=nr[0x0];timeout=nr[0x1];isch=nr[0x2];iscd=nr[0x3];console['log'](cd,timeout,isch,iscd);});await sleep(0x1f4);}