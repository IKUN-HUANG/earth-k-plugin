const _0x295820=_0x5072;(function(_0x269bf6,_0x1c3a59){const _0xf37749=_0x5072,_0x2bff32=_0x269bf6();while(!![]){try{const _0x1bc742=parseInt(_0xf37749(0x1eb))/0x1*(parseInt(_0xf37749(0x1af))/0x2)+-parseInt(_0xf37749(0x12b))/0x3*(-parseInt(_0xf37749(0x1b7))/0x4)+-parseInt(_0xf37749(0x1f7))/0x5*(-parseInt(_0xf37749(0x172))/0x6)+-parseInt(_0xf37749(0x1ca))/0x7*(-parseInt(_0xf37749(0x139))/0x8)+parseInt(_0xf37749(0x161))/0x9+-parseInt(_0xf37749(0x138))/0xa*(-parseInt(_0xf37749(0x1d3))/0xb)+parseInt(_0xf37749(0x12f))/0xc*(-parseInt(_0xf37749(0x1c9))/0xd);if(_0x1bc742===_0x1c3a59)break;else _0x2bff32['push'](_0x2bff32['shift']());}catch(_0x1b1c74){_0x2bff32['push'](_0x2bff32['shift']());}}}(_0xe6f7,0x996b1));const _0x35d4ee=(function(){let _0x1c4a3d=!![];return function(_0x270bf5,_0x2a89a6){const _0x2edce1=_0x1c4a3d?function(){if(_0x2a89a6){const _0x4e5b31=_0x2a89a6['apply'](_0x270bf5,arguments);return _0x2a89a6=null,_0x4e5b31;}}:function(){};return _0x1c4a3d=![],_0x2edce1;};}()),_0x21a02f=_0x35d4ee(this,function(){const _0x475577=_0x5072;return _0x21a02f[_0x475577(0x14a)]()[_0x475577(0x18a)](_0x475577(0x1ef))[_0x475577(0x14a)]()[_0x475577(0x132)](_0x21a02f)[_0x475577(0x18a)](_0x475577(0x1ef));});_0x21a02f();const _0x325d64=(function(){let _0x1a72f9=!![];return function(_0x12a6a1,_0x32e161){const _0x3f121c=_0x1a72f9?function(){if(_0x32e161){const _0x5b7727=_0x32e161['apply'](_0x12a6a1,arguments);return _0x32e161=null,_0x5b7727;}}:function(){};return _0x1a72f9=![],_0x3f121c;};}()),_0x49e118=_0x325d64(this,function(){const _0xa0d014=_0x5072,_0x254de3=function(){const _0x18c21c=_0x5072;let _0x5cdf51;try{_0x5cdf51=Function(_0x18c21c(0x19f)+'{}.constructor(\x22return\x20this\x22)(\x20)'+');')();}catch(_0x294a42){_0x5cdf51=window;}return _0x5cdf51;},_0x58bb8b=_0x254de3(),_0x5368fd=_0x58bb8b[_0xa0d014(0x12a)]=_0x58bb8b[_0xa0d014(0x12a)]||{},_0x5a3076=['log',_0xa0d014(0x1bf),'info',_0xa0d014(0x1d8),_0xa0d014(0x13c),_0xa0d014(0x1d1),_0xa0d014(0x1f5)];for(let _0x479366=0x0;_0x479366<_0x5a3076['length'];_0x479366++){const _0x7e0122=_0x325d64[_0xa0d014(0x132)][_0xa0d014(0x165)]['bind'](_0x325d64),_0x33b5ae=_0x5a3076[_0x479366],_0x270f43=_0x5368fd[_0x33b5ae]||_0x7e0122;_0x7e0122[_0xa0d014(0x18f)]=_0x325d64[_0xa0d014(0x13e)](_0x325d64),_0x7e0122[_0xa0d014(0x14a)]=_0x270f43[_0xa0d014(0x14a)][_0xa0d014(0x13e)](_0x270f43),_0x5368fd[_0x33b5ae]=_0x7e0122;}});_0x49e118();import{segment}from'oicq';import _0xce3d94 from'node-fetch';function _0x5072(_0x5a209b,_0x3ca991){const _0x56fc49=_0xe6f7();return _0x5072=function(_0x49e118,_0x325d64){_0x49e118=_0x49e118-0x125;let _0x439049=_0x56fc49[_0x49e118];return _0x439049;},_0x5072(_0x5a209b,_0x3ca991);}import _0x24e794,{chownSync}from'fs';import _0x423d33 from'../../../lib/config/config.js';import _0x1d239d from'../../../lib/puppeteer/puppeteer.js';let data1={};import{createRequire}from'module';function _0xe6f7(){const _0xded100=['code','请添加预设关键词','splice','http://119.29.118.238:6690/generate-stream\x20','数字超过了预设个数','已取消当前画图','秒可画','replace','fanyi','#新增屏蔽词','42EWdmNo','模型已设置为k_euler','好的，我开始以图生草了','是英文','当前相似度','#关闭代理','规模不在合理范围内，3-12为合理范围','\x20http://www.iinside.cn:7001/api_req?reqmode=nmt_mt5_jez&password=3652&text=','#土块画图预设','test','#土块画图撤回开启','cwd','[\x5cu4E00-\x5cu9FFF]+','application/json','text','模型已设置为k_lms','writeFileSync','catch','#新增预设','暂未激活该功能哦','\x0a规模：','findIndex','then','https://api.novelai.net/ai/generate-image\x20','search','huatu2','writeFile','#土块画图撤回关闭','^#土块画图步数(.*)|^#查看画图设置','__proto__','parse','正在查看魔法，请稍后啊，0v0','#开启默认屏蔽词','./resources/th.txt','includes','你是主人，没有cd，欸嘿','^#绘个图(.*)$|#土块画图预设(.*)$','node-machine-id','已开启画图撤回，撤回时间为30秒','模型:','好的，我开始画图了，请稍等哦','length','./5.png','模型不在合理范围内，1-5为合理范围','post','return\x20(function()\x20','删除预设成功','#开启代理','szgm','None','floor','15秒还未发图，查看魔法已取消','^#查看所有预设$|#新增预设(.*)|(.*)','我在cd中，还有','lowres,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry','concat','bot','tags','\x0a相似度：','szmx','写入文件错误','170QpzxLh','文件写入成功！','/3.jpg','recallMsg','已关闭画图冷却','event:\x20newImage','模型已设置为k_euler_ancestral','^#土块画图模型(.*)|^#查看所有模型','1356NnjjNQ','./plugins/earth-k-plugin/resources/aiht/ml.html','masterpiece,\x20best\x20quality,','msg','qvht','huatu3','好的，已关闭了','已经取消','warn','你还不能使用此功能哦，暂未激活。','写入文件成功','default','#查看魔法','isMaster','#取消画图','对不起，你不可画哦','规模已设置为','步数不在合理范围内，28以下为合理范围','26WajycB','101731uCFTaU','已关闭词条回复','ysgn','random','#所有人可画','message','好的，已开启，请注意身体哦','table','以图生草暂不支持私聊','2013AAjetx','./3.jpg','/plugins/earth-k-plugin/resources/pz/pz.txt','shuju','#删除预设','error','\x0a步数：','stringify','好吧，那就一起来吧！','Mozilla/5.0\x20(Windows\x20NT\x206.1;\x20WOW64)\x20AppleWebKit/537.36\x20(KHTML,\x20like\x20Gecko)\x20Chrome/86.0.4240.198\x20Safari/537.36','utf-8','没有访问成功哦','user_id','没有这个预设哦','没有访问成功','Euler\x20a','url','reply','readFileSync','#查看预设','split','我没画成功，再来一次吧。','getTime','#删除屏蔽词','10624JoGOQg','我知道你要干嘛！注意身体！','#以图生草相似度','\x20\x0a步数:','(((.+)+)+)+$','#土块画图撤回','push','message_id','^#新增屏蔽词(.*)$|#查看屏蔽词$|#删除屏蔽词$|#开启默认屏蔽词$','log','trace','readFile','145955GAcTwS','正在画图中，我知道你很急，但是你先别急。','#土块画图冷却关闭','name','end','kqdl','isGroup','#查看所有模型','已开启画图冷却，冷却时间为30秒','console','3753zOzRxB','base64','image','json','11759652xLwUQH','你不是主人，不能用预设哦','123','constructor','已设置撤回时间为','ddim','#查看屏蔽词','safe-diffusion','abc','1920AFrxLB','24QevogR','pbc','当前预设有：\x0a','exception','plms','bind','以图生草','trim','Seed','正在生草中，我知道你很急，先别急','#关闭参数显示','img','成功了！','好的，权限已经关闭，只有你能画了','#土块画图冷却开启','删除屏蔽词成功','已设置冷却时间为','toString','1：k_euler_ancestral,\x0a2：k_euler,\x0a3：k_lms,\x0a4：plms,\x0a5：ddim','\x20\x20\x20\x20\x20\x20\x20\x20|seed:','https-proxy-agent','\x20\x20\x20|规模:','#土块画图冷却','已关闭代理','http://0.0.0.0:0','#查看预设词条','#以图生草','k_euler','#开启词条回复','^#土块画图规模(.*)','https://api.sdgou.cc/api/fanyi/?msg=','screenshot','已关闭参数显示','开启代理成功','&order=zh2en','k_euler_ancestral','data','#关闭词条回复','http','包含中文','8803278gYJxeu','当前降噪','get','模型已设置为plms','prototype','#开启参数显示','szbs'];_0xe6f7=function(){return _0xded100;};return _0xe6f7();}import{Console}from'console';const require=createRequire(import.meta[_0x295820(0x1e3)]);let ysct,mf,mfkg=0x0,ml=process[_0x295820(0x17d)]();var http=require('http');import _0x239f60 from'lodash';let yushekg=0x0,kg=0x0,guimo=5.5,kg2=0x0,mfid='',res4,htm='',htm2='',res5,res,zr=0x0,changdu=0x200,kuandu=0x200,msg2,timeout=0x7530,isch=0x1,cd=0x0,t,startTimeMS,iscd=0x0,my,dz,sj1,sj2,shuju,zt=0x0,gjc2,sc=0x0,bushu=0x1c,id='',xsd=0.4,nr,ycqx,jz=0.2,ss='nai-diffusion',Path,ys=[],moxing=_0x295820(0x154),isdl=0x0,iscanshu=0x1,ishuifu=!![],HttpsProxyAgent='',pc='lowres,nude,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry,\x20owres,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry';export class aiht extends plugin{constructor(){const _0x199a04=_0x295820;super({'name':'土块AI绘个图','dsc':'土块AI画图','event':'message','priority':0x479,'rule':[{'reg':_0x199a04(0x196),'fnc':_0x199a04(0x18b)},{'reg':'^#取消画图$|^#所有人可画$|^#仅我可画$|^#土块画图撤回(.*)$|^#土块画图冷却(.*)$|^#土块画图涩涩开启|^#土块画图涩涩关闭','fnc':'qvht'},{'reg':_0x199a04(0x1f3),'fnc':_0x199a04(0x13a)},{'reg':'^#以图生草(.*)$|(.*)','fnc':'huatu3','log':![]},{'reg':_0x199a04(0x1a6),'fnc':_0x199a04(0x1cc),'log':![]},{'reg':_0x199a04(0x156),'fnc':_0x199a04(0x1a2)},{'reg':_0x199a04(0x1b6),'fnc':_0x199a04(0x1ad)},{'reg':_0x199a04(0x18e),'fnc':_0x199a04(0x167)},{'reg':'^#开启代理|^#关闭代理|^#开启参数显示|^#关闭参数显示|^#开启词条回复|^#关闭词条回复','fnc':_0x199a04(0x126)}]});}async[_0x295820(0x126)](_0x4054dd){const _0xbbb10=_0x295820;_0x4054dd[_0xbbb10(0x1ba)]==_0xbbb10(0x1a1)&_0x4054dd[_0xbbb10(0x1c4)]&&(isdl=0x1,_0x4054dd[_0xbbb10(0x1e4)](_0xbbb10(0x15a))),_0x4054dd[_0xbbb10(0x1ba)]==_0xbbb10(0x177)&_0x4054dd[_0xbbb10(0x1c4)]&&(isdl=0x0,_0x4054dd[_0xbbb10(0x1e4)](_0xbbb10(0x150))),_0x4054dd[_0xbbb10(0x1ba)]==_0xbbb10(0x166)&_0x4054dd[_0xbbb10(0x1c4)]&&(iscanshu=0x1,_0x4054dd['reply']('已开启参数显示')),_0x4054dd[_0xbbb10(0x1ba)]==_0xbbb10(0x143)&_0x4054dd[_0xbbb10(0x1c4)]&&(iscanshu=0x0,_0x4054dd[_0xbbb10(0x1e4)](_0xbbb10(0x159))),_0x4054dd[_0xbbb10(0x1ba)]==_0xbbb10(0x155)&_0x4054dd[_0xbbb10(0x1c4)]&&(ishuifu=!![],_0x4054dd[_0xbbb10(0x1e4)]('已开启词条回复')),_0x4054dd['msg']==_0xbbb10(0x15e)&_0x4054dd[_0xbbb10(0x1c4)]&&(ishuifu=![],_0x4054dd['reply'](_0xbbb10(0x1cb)));}async[_0x295820(0x167)](_0x3c235a){const _0x40b10c=_0x295820;if(_0x3c235a['msg']=='#查看画图设置'){console[_0x40b10c(0x1f4)](guimo);let _0x42899c=['模型：',moxing,_0x40b10c(0x186),guimo[_0x40b10c(0x14a)](),_0x40b10c(0x1d9),bushu[_0x40b10c(0x14a)](),_0x40b10c(0x1ac),xsd['toString'](),'\x0a降噪：',jz[_0x40b10c(0x14a)]()];_0x3c235a['reply'](_0x42899c);return;}bushu=_0x3c235a[_0x40b10c(0x1ba)]['replace'](/#土块画图步数/g,'')['trim'](),bushu=Number(bushu);if(bushu<0x0|bushu>0x1c){bushu=0x1c,_0x3c235a[_0x40b10c(0x1e4)](_0x40b10c(0x1c8));return;}else _0x3c235a[_0x40b10c(0x1e4)]('步数已设置为'+String(bushu));}async[_0x295820(0x1ad)](_0x3b1f95){const _0x8d42c1=_0x295820;if(_0x3b1f95['msg']==_0x8d42c1(0x128)){let _0x69335=[_0x8d42c1(0x14b)];_0x3b1f95['reply'](_0x69335);return;}moxing=_0x3b1f95['msg'][_0x8d42c1(0x16f)](/#土块画图模型/g,'')['trim'](),moxing=Number(moxing);if(moxing<0x0|moxing>0x5){_0x3b1f95[_0x8d42c1(0x1e4)](_0x8d42c1(0x19d)),moxing=0x2;return;}moxing==0x1&&(moxing=_0x8d42c1(0x15c),_0x3b1f95[_0x8d42c1(0x1e4)](_0x8d42c1(0x1b5))),moxing==0x2&&(moxing=_0x8d42c1(0x154),_0x3b1f95[_0x8d42c1(0x1e4)](_0x8d42c1(0x173))),moxing==0x3&&(moxing='k_lms',_0x3b1f95['reply'](_0x8d42c1(0x181))),moxing==0x4&&(moxing=_0x8d42c1(0x13d),_0x3b1f95['reply'](_0x8d42c1(0x164))),moxing==0x5&&(moxing=_0x8d42c1(0x134),_0x3b1f95['reply']('模型已设置为ddim'));}async[_0x295820(0x1a2)](_0x2a23c4){const _0x116d5c=_0x295820;guimo=_0x2a23c4[_0x116d5c(0x1ba)][_0x116d5c(0x16f)](/#土块画图规模/g,'')[_0x116d5c(0x140)](),guimo=Number(guimo);if(guimo<0x3|guimo>0xc){_0x2a23c4[_0x116d5c(0x1e4)](_0x116d5c(0x178)),guimo=5.5;return;}else _0x2a23c4[_0x116d5c(0x1e4)](_0x116d5c(0x1c7)+String(guimo));}async[_0x295820(0x1cc)](_0x4b6aec){const _0x42bca9=_0x295820;if(_0x4b6aec[_0x42bca9(0x144)]!=undefined)return![];if(yushekg==0x0&_0x4b6aec[_0x42bca9(0x1ba)][_0x42bca9(0x194)](_0x42bca9(0x1e6))==![]&_0x4b6aec[_0x42bca9(0x1ba)]['includes'](_0x42bca9(0x184))==![]&_0x4b6aec[_0x42bca9(0x1ba)][_0x42bca9(0x194)](_0x42bca9(0x1d7))==![]&_0x4b6aec[_0x42bca9(0x1ba)][_0x42bca9(0x194)](_0x42bca9(0x152))==![])return![];let _0x54144f=ml+'/plugins/earth-k-plugin/resources/htys/ys.json',_0x16c94e='';await _0x24e794[_0x42bca9(0x1f6)](_0x54144f,(_0x1a9a55,_0x57aeeb)=>{const _0x5d08d8=_0x42bca9;if(_0x1a9a55)throw _0x1a9a55;var _0x449e7a=_0x57aeeb[_0x5d08d8(0x14a)]()!=''?JSON[_0x5d08d8(0x190)](_0x57aeeb['toString']()):[];ysct='',_0x16c94e='',shuju=_0x449e7a;for(let _0x511e64=0x0;_0x511e64<shuju[_0x5d08d8(0x1d6)][_0x5d08d8(0x19b)];_0x511e64++){_0x16c94e=_0x16c94e+shuju[_0x5d08d8(0x1d6)][_0x511e64][_0x5d08d8(0x1fa)]+',',ysct=ysct+shuju[_0x5d08d8(0x1d6)][_0x511e64]['gjc']+'++';}}),await sleep(0x1f4);if(_0x4b6aec[_0x42bca9(0x1ba)][_0x42bca9(0x194)](_0x42bca9(0x152))&_0x4b6aec[_0x42bca9(0x1c4)]){let _0x4c2669=_0x4b6aec[_0x42bca9(0x1ba)][_0x42bca9(0x16f)](/#查看预设词条/g,'')[_0x42bca9(0x140)]();_0x4c2669=Number(_0x4c2669),ysct=ysct[_0x42bca9(0x1e7)]('++'),_0x16c94e=_0x16c94e['split'](',');if(_0x4c2669>ysct[_0x42bca9(0x19b)]|_0x4c2669<0x0){_0x4b6aec['reply'](_0x42bca9(0x16c));return;}_0x4b6aec[_0x42bca9(0x1e4)]([_0x16c94e[_0x4c2669-0x1],':',ysct[_0x4c2669-0x1]]),ysct='',_0x16c94e='';}if(_0x4b6aec[_0x42bca9(0x1ba)]==_0x42bca9(0x1e6)&_0x4b6aec[_0x42bca9(0x1c4)]){_0x16c94e=_0x16c94e[_0x42bca9(0x1e7)](','),data1={'tplFile':_0x42bca9(0x1b8),'dz':ml,'lb':_0x16c94e,'qsid':0x0};let _0x46ccdd=await _0x1d239d[_0x42bca9(0x158)](_0x42bca9(0x131),{...data1});_0x4b6aec[_0x42bca9(0x1e4)](_0x46ccdd);return;_0x4b6aec[_0x42bca9(0x1e4)](_0x42bca9(0x13b)+_0x16c94e);}if(_0x4b6aec['msg'][_0x42bca9(0x194)](_0x42bca9(0x1d7))&_0x4b6aec[_0x42bca9(0x1c4)]){let _0x570ec2=_0x4b6aec[_0x42bca9(0x1ba)][_0x42bca9(0x16f)](/#删除预设/g,'')[_0x42bca9(0x140)]();_0x570ec2=Number(_0x570ec2);if(_0x570ec2<shuju[_0x42bca9(0x1d6)][_0x42bca9(0x19b)]+0x1){shuju[_0x42bca9(0x1d6)][_0x42bca9(0x16a)](_0x570ec2-0x1,0x1);var _0x17adca=JSON[_0x42bca9(0x1da)](shuju);}_0x24e794['writeFile'](_0x54144f,_0x17adca,function(_0x29ebb5){const _0xd24ce2=_0x42bca9;_0x29ebb5&&console[_0xd24ce2(0x1d8)](_0x29ebb5),_0x4b6aec[_0xd24ce2(0x1e4)](_0xd24ce2(0x1a0));});}if(_0x4b6aec['msg'][_0x42bca9(0x194)](_0x42bca9(0x184))&_0x4b6aec[_0x42bca9(0x1c4)]&yushekg==0x0){yushekg=0x1,ys[0x0]=_0x4b6aec['msg']['replace'](/#新增预设/g,'')[_0x42bca9(0x140)](),_0x4b6aec[_0x42bca9(0x1e4)](_0x42bca9(0x169));return;}if(yushekg==0x1&_0x4b6aec[_0x42bca9(0x1c4)]){yushekg=0x0,ys[0x1]=_0x4b6aec[_0x42bca9(0x1ba)];let _0x252564={'name':ys[0x0],'gjc':ys[0x1]};shuju[_0x42bca9(0x1d6)][_0x42bca9(0x1f1)](_0x252564),console[_0x42bca9(0x1f4)](shuju);var _0x17adca=JSON[_0x42bca9(0x1da)](shuju);_0x24e794[_0x42bca9(0x18c)](_0x54144f,_0x17adca,_0x384fa2=>{const _0x35192e=_0x42bca9;if(_0x384fa2)throw _0x384fa2;console[_0x35192e(0x1f4)](_0x35192e(0x1b0)),_0x4b6aec[_0x35192e(0x1e4)]('新增预设成功');});return;}}async[_0x295820(0x13a)](_0x2cf4d0){const _0x2d1d87=_0x295820;_0x2cf4d0[_0x2d1d87(0x1ba)]['includes'](_0x2d1d87(0x171))&_0x2cf4d0[_0x2d1d87(0x1c4)]&&(_0x2cf4d0['reply']('新增屏蔽词成功'),pc=_0x2cf4d0[_0x2d1d87(0x1ba)]['replace'](/#新增屏蔽词/g,'')[_0x2d1d87(0x140)]()),_0x2cf4d0['msg']==_0x2d1d87(0x135)&_0x2cf4d0[_0x2d1d87(0x1c4)]&&_0x2cf4d0[_0x2d1d87(0x1e4)](['当前屏蔽词有：',pc]),_0x2cf4d0[_0x2d1d87(0x1ba)]['includes'](_0x2d1d87(0x1ea))&_0x2cf4d0[_0x2d1d87(0x1c4)]&&(_0x2cf4d0['reply'](_0x2d1d87(0x148)+_0x2d1d87(0x1ec)),pc=''),_0x2cf4d0[_0x2d1d87(0x1ba)][_0x2d1d87(0x194)](_0x2d1d87(0x192))&_0x2cf4d0[_0x2d1d87(0x1c4)]&&(_0x2cf4d0[_0x2d1d87(0x1e4)]('已经开启默认屏蔽词'),pc='lowres,nude,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry,\x20owres,\x20bad\x20anatomy,\x20bad\x20hands,\x20text,\x20error,\x20missing\x20fingers,\x20extra\x20digit,\x20fewer\x20digits,\x20cropped,\x20worst\x20quality,\x20low\x20quality,\x20normal\x20quality,\x20jpeg\x20artifacts,\x20signature,\x20watermark,\x20username,\x20blurry');}async[_0x295820(0x1bb)](_0x3b7312){const _0x4af1b5=_0x295820;_0x3b7312[_0x4af1b5(0x1ba)]=='#土块画图涩涩开启'&_0x3b7312[_0x4af1b5(0x1c4)]&&(_0x3b7312[_0x4af1b5(0x1e4)](_0x4af1b5(0x1d0)),ss='nai-diffusion');_0x3b7312['msg']=='#土块画图涩涩关闭'&_0x3b7312['isMaster']&&(_0x3b7312['reply'](_0x4af1b5(0x1bd)),ss=_0x4af1b5(0x136));await dqpz();if(_0x3b7312['msg']['includes'](_0x4af1b5(0x1f9))&_0x3b7312[_0x4af1b5(0x1c4)]){nr[0x3]=0x0,nr[0x0]=0x0,_0x24e794[_0x4af1b5(0x182)](Path,nr[_0x4af1b5(0x14a)](),_0x4af1b5(0x1dd)),cd=0x0,kg2=0x0,kg=0x0,sc=0x0,iscd=0x0,_0x3b7312[_0x4af1b5(0x1e4)](_0x4af1b5(0x1b3));return;}if(_0x3b7312[_0x4af1b5(0x1ba)][_0x4af1b5(0x194)](_0x4af1b5(0x147))&_0x3b7312[_0x4af1b5(0x1c4)]){nr[0x0]=0x7530,nr[0x3]=0x1,_0x24e794[_0x4af1b5(0x182)](Path,nr[_0x4af1b5(0x14a)](),_0x4af1b5(0x1dd)),cd=0x7530,_0x3b7312[_0x4af1b5(0x1e4)](_0x4af1b5(0x129));return;}if(_0x3b7312[_0x4af1b5(0x1ba)][_0x4af1b5(0x194)](_0x4af1b5(0x14f))&_0x3b7312['isMaster']){let _0x2ffb95=_0x3b7312[_0x4af1b5(0x1ba)][_0x4af1b5(0x16f)](/#土块画图冷却/g,'')[_0x4af1b5(0x140)]();cd=Number(_0x2ffb95)*0x3e8,nr[0x0]=cd,nr[0x3]=0x1,_0x24e794[_0x4af1b5(0x182)](Path,nr[_0x4af1b5(0x14a)](),'utf-8'),_0x3b7312['reply'](_0x4af1b5(0x149)+_0x2ffb95+'秒');}if(_0x3b7312[_0x4af1b5(0x1ba)][_0x4af1b5(0x194)](_0x4af1b5(0x18d))&_0x3b7312[_0x4af1b5(0x1c4)]){nr[0x2]=0x0,_0x24e794[_0x4af1b5(0x182)](Path,nr[_0x4af1b5(0x14a)](),_0x4af1b5(0x1dd)),isch=0x0,_0x3b7312[_0x4af1b5(0x1e4)]('已关闭画图撤回');return;}if(_0x3b7312['msg'][_0x4af1b5(0x194)](_0x4af1b5(0x17c))&_0x3b7312[_0x4af1b5(0x1c4)]){isch=0x1,nr[0x1]=0x7530,nr[0x2]=0x1,_0x24e794[_0x4af1b5(0x182)](Path,nr[_0x4af1b5(0x14a)](),_0x4af1b5(0x1dd)),timeout=0x7530,_0x3b7312[_0x4af1b5(0x1e4)](_0x4af1b5(0x198));return;}if(_0x3b7312[_0x4af1b5(0x1ba)][_0x4af1b5(0x194)](_0x4af1b5(0x1f0))&_0x3b7312[_0x4af1b5(0x1c4)]){isch=0x1;let _0x333966=_0x3b7312[_0x4af1b5(0x1ba)][_0x4af1b5(0x16f)](/#土块画图撤回/g,'')['trim']();timeout=Number(_0x333966)*0x3e8,nr[0x1]=timeout,nr[0x2]=0x1,_0x24e794[_0x4af1b5(0x182)](Path,nr[_0x4af1b5(0x14a)](),'utf-8'),_0x3b7312[_0x4af1b5(0x1e4)](_0x4af1b5(0x133)+_0x333966+'秒');}_0x3b7312[_0x4af1b5(0x1ba)]==_0x4af1b5(0x1c5)&&(kg=0x0,sc=0x0,zt=0x0,id='',console[_0x4af1b5(0x1f4)](_0x4af1b5(0x1be)),kg2=0x0,_0x3b7312[_0x4af1b5(0x1e4)](_0x4af1b5(0x16d))),_0x3b7312[_0x4af1b5(0x1ba)]==_0x4af1b5(0x1ce)&_0x3b7312['isMaster']&&(_0x3b7312[_0x4af1b5(0x1e4)](_0x4af1b5(0x1db)),zr=0x0),_0x3b7312[_0x4af1b5(0x1ba)]=='#仅我可画'&_0x3b7312[_0x4af1b5(0x1c4)]&&(_0x3b7312[_0x4af1b5(0x1e4)](_0x4af1b5(0x146)),zr=0x1);}async[_0x295820(0x1bc)](_0x2734e7){const _0x168fa5=_0x295820;if(_0x2734e7['img']!=undefined&zt==0x0&mfkg==0x0)return![];if(_0x2734e7[_0x168fa5(0x144)]==undefined&_0x2734e7[_0x168fa5(0x1ba)]!=undefined){if(_0x2734e7[_0x168fa5(0x1ba)][_0x168fa5(0x194)](_0x168fa5(0x153))==![]&_0x2734e7[_0x168fa5(0x144)]==undefined&zt==0x0&_0x2734e7[_0x168fa5(0x1ba)][_0x168fa5(0x194)](_0x168fa5(0x1c3))==![]&mfkg==0x0)return![];}mfkg==0x0&_0x2734e7[_0x168fa5(0x1ba)]==_0x168fa5(0x1c3)&&(mfkg=0x1,mfid=_0x2734e7['user_id'],_0x2734e7[_0x168fa5(0x1e4)]('请发送要查看魔法的图片,0.0'),mf=setTimeout(()=>{const _0x15aeba=_0x168fa5;if(mfkg==0x1){mfkg=0x0,_0x2734e7[_0x15aeba(0x1e4)](_0x15aeba(0x1a5));return;}},0x3a98));if(_0x2734e7[_0x168fa5(0x144)]!=undefined&mfkg==0x1&mfid==_0x2734e7['user_id']){clearTimeout(mf),_0x2734e7[_0x168fa5(0x1e4)](_0x168fa5(0x191)),mfkg=0x0,mfid='';let _0x27710b='https://xiaobapi.top/api/xb/api/upload_image_tags.php?url=';console['log'](_0x2734e7[_0x168fa5(0x144)]),_0x27710b=_0x27710b+_0x2734e7[_0x168fa5(0x144)][0x0],res=await _0xce3d94(_0x27710b,{'method':_0x168fa5(0x163),'headers':{'Content-Type':_0x168fa5(0x17f),'User-Agent':_0x168fa5(0x1dc)}});let _0x30ba63=await res[_0x168fa5(0x12e)]();console[_0x168fa5(0x1f4)]('魔法是：'+_0x30ba63),console[_0x168fa5(0x1f4)](_0x30ba63);if(_0x30ba63!=undefined)_0x2734e7[_0x168fa5(0x1e4)](_0x30ba63[_0x168fa5(0x1ab)],!![]),_0x30ba63[_0x168fa5(0x168)]==-0x1&&(_0x2734e7[_0x168fa5(0x1e4)]('访问失败了,QAQ,TvT'),mfkg=0x0,mfid='');else{}}if(_0x2734e7[_0x168fa5(0x144)]==undefined&zt==0x1)return![];if(_0x2734e7[_0x168fa5(0x144)]==undefined&_0x2734e7['msg']!=undefined){dqpz();if(_0x2734e7[_0x168fa5(0x1ba)]['includes'](_0x168fa5(0x1ed))&_0x2734e7[_0x168fa5(0x1c4)]){xsd=Number(_0x2734e7[_0x168fa5(0x1ba)][_0x168fa5(0x16f)](/#以图生草相似度/g,'')[_0x168fa5(0x140)]())/0x64,_0x2734e7[_0x168fa5(0x1e4)](_0x168fa5(0x176)+String(xsd)),console[_0x168fa5(0x1f4)](xsd);return;}if(_0x2734e7[_0x168fa5(0x1ba)][_0x168fa5(0x194)]('#以图生草降噪')&_0x2734e7[_0x168fa5(0x1c4)]){jz=Number(_0x2734e7[_0x168fa5(0x1ba)][_0x168fa5(0x16f)](/#以图生草降噪/g,'')[_0x168fa5(0x140)]())/0x64,_0x2734e7[_0x168fa5(0x1e4)](_0x168fa5(0x162)+String(jz)),console[_0x168fa5(0x1f4)](jz);return;}if(zt==0x0&&sc==0x0&&_0x2734e7[_0x168fa5(0x1ba)][_0x168fa5(0x194)](_0x168fa5(0x153))){if(_0x2734e7['isPrivate']){_0x2734e7['reply'](_0x168fa5(0x1d2));return;}dqpz();const {machineId:_0xaad30d,machineIdSync:_0x18b91a}=require(_0x168fa5(0x197));htm=_0x18b91a();try{htm2=_0x24e794[_0x168fa5(0x1e5)](_0x168fa5(0x193));}catch{_0x2734e7[_0x168fa5(0x1e4)](_0x168fa5(0x185));return;}htm2=htm2[_0x168fa5(0x14a)](),htm2=htm2[_0x168fa5(0x16f)](/]Q/g,'a')[_0x168fa5(0x140)](),htm2=htm2[_0x168fa5(0x16f)](/\[W/g,'c')[_0x168fa5(0x140)](),htm2=htm2[_0x168fa5(0x16f)](/\*T/g,'e')[_0x168fa5(0x140)](),htm2=htm2[_0x168fa5(0x16f)](/\-R/g,'g')[_0x168fa5(0x140)](),htm2=htm2['replace'](/\*Z/g,'1')['trim'](),htm2=htm2[_0x168fa5(0x16f)](/\+X/g,'2')[_0x168fa5(0x140)](),htm2=htm2[_0x168fa5(0x16f)](/\-C/g,'3')['trim'](),htm2=htm2[_0x168fa5(0x16f)](/\)V/g,'4')[_0x168fa5(0x140)](),htm2=htm2[_0x168fa5(0x16f)](/\&Z/g,'9')['trim'](),htm2=htm2[_0x168fa5(0x16f)](/\^X/g,'8')[_0x168fa5(0x140)](),htm2=htm2['replace'](/\%C/g,'7')['trim'](),htm2=htm2['replace'](/\$V/g,'6')[_0x168fa5(0x140)]();if(htm!=htm2){_0x2734e7[_0x168fa5(0x1e4)](_0x168fa5(0x1c0));return;}console[_0x168fa5(0x1f4)](_0x168fa5(0x13f)),id=_0x2734e7[_0x168fa5(0x1df)],gjc2=_0x2734e7['msg'][_0x168fa5(0x16f)](/#以图生草/g,'')['trim']();var _0x151769=new RegExp(_0x168fa5(0x17e),'g');if(_0x151769[_0x168fa5(0x17b)](gjc2)){console[_0x168fa5(0x1f4)](_0x168fa5(0x160));let _0x1e338d=_0x168fa5(0x157)+gjc2,_0x2cf191=await _0xce3d94(_0x1e338d),_0x29887b=await _0x2cf191['text']();_0x29887b=_0x29887b['replace'](/有道翻译查询结果/g,'')[_0x168fa5(0x140)](),_0x29887b=_0x29887b[_0x168fa5(0x16f)](/翻译后/g,'')[_0x168fa5(0x140)](),_0x29887b=_0x29887b[_0x168fa5(0x16f)](/翻译前/g,'')['trim'](),_0x29887b=_0x29887b[_0x168fa5(0x16f)](/：/g,'')[_0x168fa5(0x140)](),_0x29887b=_0x29887b[_0x168fa5(0x16f)](new RegExp(gjc2,'g'),''),gjc2=_0x29887b,console['log'](gjc2);}else console[_0x168fa5(0x1f4)]('是英文');zt=0x1,ycqx=setTimeout(()=>{const _0x10ad24=_0x168fa5;if(zt==0x1){zt=0x0,_0x2734e7[_0x10ad24(0x1e4)]('30秒还未发图，以图生草已取消');return;}},0x7530),_0x2734e7[_0x168fa5(0x1e4)]([segment['at'](id),'请发送图片']);return;}}if(sc==0x0&_0x2734e7[_0x168fa5(0x127)]&zt==0x1&_0x2734e7[_0x168fa5(0x144)]!=undefined){clearTimeout(ycqx);if(_0x2734e7['user_id']==id&zt==0x1){sc=0x1;let _0x4d28fb=await imgUrlToBase64(_0x2734e7[_0x168fa5(0x144)][0x0][_0x168fa5(0x16f)](/https/g,_0x168fa5(0x15f))[_0x168fa5(0x140)]()),_0x1a421e=_0x4d28fb['base64Img'],_0x333e71=Math['floor'](Math['random']()*0xb6cff090);var _0x4fd844={'prompt':'masterpiece,\x20best\x20quality,'+gjc2,'width':0x180,'height':0x200,'scale':guimo,'sampler':moxing,'steps':0x32,'seed':_0x333e71,'n_samples':0x1,'strength':0x1-xsd,'noise':jz,'ucPreset':0x0,'image':_0x1a421e,'uc':pc};_0x2734e7[_0x168fa5(0x1e4)](_0x168fa5(0x174)),zt=0x0;try{res=await _0xce3d94(_0x168fa5(0x16b),{'method':_0x168fa5(0x19e),'body':JSON[_0x168fa5(0x1da)](_0x4fd844),'headers':{'Content-Type':_0x168fa5(0x17f),'User-Agent':_0x168fa5(0x1dc)}});}catch(_0x12d5a8){console[_0x168fa5(0x1f4)](_0x12d5a8),console[_0x168fa5(0x1f4)](_0x168fa5(0x1e1)),kg=0x0;return;}let _0x22189c=await res[_0x168fa5(0x180)]();_0x22189c=_0x22189c['replace'](/id: 1/g,'')[_0x168fa5(0x140)](),_0x22189c=_0x22189c[_0x168fa5(0x16f)](/event: newImage/g,'')['trim'](),_0x22189c=_0x22189c[_0x168fa5(0x16f)](/data:/g,'')[_0x168fa5(0x140)]();if(res==''){_0x2734e7[_0x168fa5(0x1e4)](_0x168fa5(0x1e8));return;}_0x2734e7[_0x168fa5(0x1e4)](_0x168fa5(0x145)),await _0x24e794[_0x168fa5(0x18c)](_0x168fa5(0x1d4),_0x22189c['toString'](),_0x168fa5(0x12c),_0x39634f=>{const _0x9febe3=_0x168fa5;_0x39634f?console[_0x9febe3(0x1f4)](_0x9febe3(0x1ae)):console[_0x9febe3(0x1f4)]('写入文件成功');}),msg2=[segment['at'](_0x2734e7['user_id']),segment[_0x168fa5(0x12d)](ml+_0x168fa5(0x1b1))],await sleep(0x1f4);let _0x4b81e8=await _0x2734e7[_0x168fa5(0x1e4)](msg2);iscd=0x1,console['log'](_0x4b81e8[_0x168fa5(0x1f2)],isch);if(_0x4b81e8&&_0x4b81e8['message_id']&&isch==0x1&&_0x2734e7[_0x168fa5(0x127)]){let _0x35b4e1=_0x2734e7['group'];setTimeout(()=>{const _0x351602=_0x168fa5;_0x35b4e1[_0x351602(0x1b2)](_0x4b81e8[_0x351602(0x1f2)]);},timeout);}startTimeMS=new Date()[_0x168fa5(0x1e9)](),t=setTimeout(()=>{iscd=0x0,sc=0x0,id='';},cd);}}else{if(_0x2734e7[_0x168fa5(0x144)]==undefined&_0x2734e7[_0x168fa5(0x1ba)]!=undefined){if(_0x2734e7[_0x168fa5(0x1ba)][_0x168fa5(0x194)](_0x168fa5(0x153))){if(iscd==0x1){console[_0x168fa5(0x1f4)](iscd);let _0x97f594=cd-(new Date()[_0x168fa5(0x1e9)]()-startTimeMS);_0x97f594=Math['round'](_0x97f594/0x3e8);if(_0x97f594<0x0){sc=0x0,id='';return;}_0x2734e7[_0x168fa5(0x1e4)]('我在cd中，还有'+String(_0x97f594)+_0x168fa5(0x16e));}else _0x2734e7[_0x168fa5(0x1e4)](_0x168fa5(0x142));}}}}async['huatu2'](_0x3692b5){const _0xdd45b1=_0x295820;dqpz();const {machineId:_0x336511,machineIdSync:_0x168834}=require(_0xdd45b1(0x197));htm=_0x168834();try{htm2=_0x24e794[_0xdd45b1(0x1e5)](_0xdd45b1(0x193));}catch{_0x3692b5[_0xdd45b1(0x1e4)](_0xdd45b1(0x185));return;}htm2=htm2['toString'](),htm2=htm2[_0xdd45b1(0x16f)](/]Q/g,'a')[_0xdd45b1(0x140)](),htm2=htm2[_0xdd45b1(0x16f)](/\[W/g,'c')['trim'](),htm2=htm2[_0xdd45b1(0x16f)](/\*T/g,'e')['trim'](),htm2=htm2[_0xdd45b1(0x16f)](/\-R/g,'g')['trim'](),htm2=htm2[_0xdd45b1(0x16f)](/\*Z/g,'1')['trim'](),htm2=htm2['replace'](/\+X/g,'2')[_0xdd45b1(0x140)](),htm2=htm2[_0xdd45b1(0x16f)](/\-C/g,'3')[_0xdd45b1(0x140)](),htm2=htm2[_0xdd45b1(0x16f)](/\)V/g,'4')[_0xdd45b1(0x140)](),htm2=htm2[_0xdd45b1(0x16f)](/\&Z/g,'9')['trim'](),htm2=htm2[_0xdd45b1(0x16f)](/\^X/g,'8')['trim'](),htm2=htm2[_0xdd45b1(0x16f)](/\%C/g,'7')['trim'](),htm2=htm2[_0xdd45b1(0x16f)](/\$V/g,'6')[_0xdd45b1(0x140)]();if(htm!=htm2){_0x3692b5[_0xdd45b1(0x1e4)](_0xdd45b1(0x1c0));return;}await sleep(0x1f4);if(_0x3692b5[_0xdd45b1(0x1ba)]['includes'](_0xdd45b1(0x17a))&!_0x3692b5['isMaster']){_0x3692b5[_0xdd45b1(0x1e4)](_0xdd45b1(0x130));return;}let _0x5413ae,_0x4f3c21,_0x245d38;_0x3692b5[_0xdd45b1(0x1ba)][_0xdd45b1(0x194)]('#土块画图预设')==![]&&(_0x245d38=_0x3692b5['msg'][_0xdd45b1(0x16f)](/#绘个图/g,'')[_0xdd45b1(0x140)]());if(kg2==0x0&_0x3692b5[_0xdd45b1(0x127)]|_0x3692b5[_0xdd45b1(0x1c4)]){kg2==0x1&&_0x3692b5[_0xdd45b1(0x1e4)](_0xdd45b1(0x195));if(zr==0x1&!_0x3692b5[_0xdd45b1(0x1c4)]){_0x3692b5[_0xdd45b1(0x1e4)](_0xdd45b1(0x1c6));return;}kg2=0x1;let _0x12f8b9=_0x245d38;var _0x189484=new RegExp(_0xdd45b1(0x17e),'g');if(_0x189484[_0xdd45b1(0x17b)](_0x12f8b9)){console[_0xdd45b1(0x1f4)](_0xdd45b1(0x160));let _0x3ba87c='https://api.sdgou.cc/api/fanyi/?msg='+_0x12f8b9,_0x12b399=await _0xce3d94(_0x3ba87c),_0x1d3229=await _0x12b399[_0xdd45b1(0x180)]();_0x1d3229=_0x1d3229['replace'](/有道翻译查询结果/g,'')['trim'](),_0x1d3229=_0x1d3229[_0xdd45b1(0x16f)](/翻译后/g,'')['trim'](),_0x1d3229=_0x1d3229[_0xdd45b1(0x16f)](/翻译前/g,'')[_0xdd45b1(0x140)](),_0x1d3229=_0x1d3229[_0xdd45b1(0x16f)](/：/g,'')['trim'](),_0x1d3229=_0x1d3229['replace'](new RegExp(_0x12f8b9,'g'),''),res4=_0x1d3229;if(res4==''){let _0x4ac736=_0xdd45b1(0x179)+_0x245d38+_0xdd45b1(0x15b);res4=await _0xce3d94(_0x4ac736),res4=await res4[_0xdd45b1(0x12e)](),res4=res4[_0xdd45b1(0x15d)];}if(res4==''){let _0x223343='https://api.66mz8.com/api/translation.php?info='+_0x245d38;res4=await _0xce3d94(_0x223343),res4=await res4['json'](),res4=res4[_0xdd45b1(0x170)];}console[_0xdd45b1(0x1f4)](res4);}else console['log'](_0xdd45b1(0x175)),res4=_0x12f8b9;let _0x362e8e,_0x4dee0c;if(_0x3692b5[_0xdd45b1(0x1ba)][_0xdd45b1(0x194)](_0xdd45b1(0x17a))&_0x3692b5[_0xdd45b1(0x1c4)]){_0x4f3c21=_0x3692b5[_0xdd45b1(0x1ba)][_0xdd45b1(0x16f)](/#土块画图预设/g,'')['trim']();let _0x3c76ac=ml+'/plugins/earth-k-plugin/resources/htys/ys.json';await _0x24e794[_0xdd45b1(0x1f6)](_0x3c76ac,(_0x2bb5,_0x299443)=>{const _0x3a5bb8=_0xdd45b1;_0x5413ae=JSON[_0x3a5bb8(0x190)](_0x299443[_0x3a5bb8(0x14a)]()),_0x4dee0c=_0x5413ae[_0x3a5bb8(0x1d6)];var _0x55b6df=new RegExp('[\x5cu4E00-\x5cu9FFF]+','g');if(_0x55b6df['test'](_0x4f3c21))console[_0x3a5bb8(0x1f4)]('预设包含中文'),_0x362e8e=_0x4dee0c[_0x3a5bb8(0x187)](_0x35fc34=>_0x35fc34[_0x3a5bb8(0x1fa)]==_0x4f3c21);else{_0x362e8e=Number(_0x4f3c21)-0x1;if(_0x362e8e>_0x4dee0c[_0x3a5bb8(0x19b)]){_0x362e8e=-0x1;return;}}}),await sleep(0x1f4),console[_0xdd45b1(0x1f4)](_0x362e8e);if(_0x362e8e!=-0x1)res4=_0x4dee0c[_0x362e8e]['gjc'];else{_0x3692b5['reply'](_0xdd45b1(0x1e0));return;}}await sleep(0x1f4),_0x3692b5[_0xdd45b1(0x1e4)](_0xdd45b1(0x19a));let _0x5b4b4a=Math[_0xdd45b1(0x1a4)](Math['random']()*0x2);_0x5b4b4a==0x0&&(changdu=0x200,kuandu=0x300);_0x5b4b4a==0x1&&(changdu=0x300,kuandu=0x200);console[_0xdd45b1(0x1f4)](_0x5b4b4a),console[_0xdd45b1(0x1f4)](res4);var _0x4d56a1=_0xdd45b1(0x137),_0x1c566c=[res4,pc,'None','None',0x14,_0xdd45b1(0x1e2),![],![],0x1,0x1,0x7,-0x1,-0x1,0x0,0x0,0x0,![],changdu,kuandu,![],![],0.7,_0xdd45b1(0x1a3),![],![],null,'',_0xdd45b1(0x141),'','Steps','',!![],![],null,'',''],_0x4647de=[res4,pc,_0xdd45b1(0x1a3),'None',0x1c,_0xdd45b1(0x1e2),![],![],0x1,0x1,0xb,-0x1,-0x1,0x0,0x0,0x0,![],0x200,0x200,![],![],0.7,'None',![],![],null,'',_0xdd45b1(0x141),'','Steps','',!![],![],null,'',''];let _0x1e70a9=_0xdd45b1(0x189),_0x7e51b=Math[_0xdd45b1(0x1a4)](Math[_0xdd45b1(0x1cd)]()*0xb6cff090),_0x47c119=_0xdd45b1(0x199)+moxing+_0xdd45b1(0x14e)+guimo['toString']()+_0xdd45b1(0x1ee)+bushu['toString']()+_0xdd45b1(0x14c)+_0x7e51b['toString']();try{res=await _0xce3d94(_0x1e70a9,{'method':_0xdd45b1(0x19e),'agent':isdl?await getAgent():'','headers':{'Content-Type':'application/json','authorization':'Bearer\x20eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6ImlRWFFJd1N1TVhsNGp6ZHVQN0J4OCIsIm5jIjoiMlJNQVBVdFZLRDUyaThtNjY2c2lkIiwiaWF0IjoxNjY3OTY4MDMzLCJleHAiOjE2NzA1NjAwMzN9.LSFyfUAeNHB2broFyokyrczAteEk0XECDZzBe4li8-A'},'body':JSON['stringify']({'input':'masterpiece,\x20best\x20quality,\x20'+res4,'model':ss,'parameters':{'width':kuandu,'height':changdu,'scale':guimo,'sampler':moxing,'steps':bushu,'seed':_0x7e51b,'n_samples':0x1,'ucPreset':0x0,'uc':pc}})}),console['log']('访问成功了');}catch(_0x246b07){console['log'](_0x246b07),console[_0xdd45b1(0x1f4)]('没有访问成功,尝试换接口'),_0x1e70a9=dz2;try{res=await _0xce3d94(_0x1e70a9,{'method':_0xdd45b1(0x19e),'headers':{'Content-Type':_0xdd45b1(0x17f),'authorization':'Bearer'},'body':JSON[_0xdd45b1(0x1da)]({'prompt':_0xdd45b1(0x1b9)+res4,'width':kuandu,'height':changdu,'scale':guimo,'sampler':moxing,'steps':0x14,'seed':_0x7e51b,'n_samples':0x1,'ucPreset':0x0,'uc':_0xdd45b1(0x1a8)})});}catch(_0x1fb9ea){console['log'](_0x1fb9ea),_0x3692b5[_0xdd45b1(0x1e4)]('没有访问成功哦'),kg2=0x0;return;}}res=await res[_0xdd45b1(0x180)]();if(res=='{\x22error\x22:\x22unknown\x20error\x22}'){console['log']('没有访问成功,尝试换接口'),_0x1e70a9=dz2;try{res=await _0xce3d94(_0x1e70a9,{'method':_0xdd45b1(0x19e),'headers':{'Content-Type':_0xdd45b1(0x17f),'authorization':'Bearer'},'body':JSON[_0xdd45b1(0x1da)]({'prompt':'masterpiece,\x20best\x20quality,'+res4,'width':kuandu,'height':changdu,'scale':guimo,'sampler':_0xdd45b1(0x15c),'steps':0x14,'seed':_0x7e51b,'n_samples':0x1,'ucPreset':0x0,'uc':_0xdd45b1(0x1a8)})});}catch(_0xb08c3f){console[_0xdd45b1(0x1f4)](_0xb08c3f),_0x3692b5[_0xdd45b1(0x1e4)](_0xdd45b1(0x1de)),kg2=0x0;return;}return;}if(!res[_0xdd45b1(0x194)](_0xdd45b1(0x1b4))){_0x3692b5[_0xdd45b1(0x1e4)](_0xdd45b1(0x1e8)),kg2=0x0;return;}res=res[_0xdd45b1(0x16f)](/id: 1/g,'')[_0xdd45b1(0x140)](),res=res[_0xdd45b1(0x16f)](/event: newImage/g,'')[_0xdd45b1(0x140)](),res=res[_0xdd45b1(0x16f)](/data:/g,'')[_0xdd45b1(0x140)]();if(res==''){_0x3692b5[_0xdd45b1(0x1e4)](_0xdd45b1(0x1e8)),kg2=0x0;return;}await _0x24e794[_0xdd45b1(0x18c)](_0xdd45b1(0x19c),res[_0xdd45b1(0x14a)](),_0xdd45b1(0x12c),_0x16fa78=>{const _0x1ad410=_0xdd45b1;_0x16fa78?console[_0x1ad410(0x1f4)]('写入文件错误'):console['log'](_0x1ad410(0x1c1));});iscanshu==0x0&&(_0x47c119='');await sleep(0x1f4),msg2=[segment[_0xdd45b1(0x12d)](ml+'/5.png'),_0x47c119];let _0x2d6030=await _0x3692b5[_0xdd45b1(0x1e4)](msg2,ishuifu);iscd=0x1,console[_0xdd45b1(0x1f4)](_0x2d6030[_0xdd45b1(0x1f2)],isch);if(_0x2d6030&&_0x2d6030[_0xdd45b1(0x1f2)]&&isch==0x1&&_0x3692b5[_0xdd45b1(0x127)]){let _0x5c8f44=_0x3692b5['group'];setTimeout(()=>{const _0x66a7d3=_0xdd45b1;_0x5c8f44['recallMsg'](_0x2d6030[_0x66a7d3(0x1f2)]);},timeout);}startTimeMS=new Date()['getTime'](),t=setTimeout(()=>{kg2=0x0,iscd=0x0;},cd);}else{if(iscd==0x1){let _0x18b12c=cd-(new Date()[_0xdd45b1(0x1e9)]()-startTimeMS);_0x18b12c=Math['round'](_0x18b12c/0x3e8);if(_0x18b12c<0x0){kg2=0x0;return;}_0x3692b5['reply'](_0xdd45b1(0x1a7)+String(_0x18b12c)+'秒可画');}else _0x3692b5['reply'](_0xdd45b1(0x1f8));}}}async function huoqv(_0x273308){const _0x365d4d=_0x295820,{machineId:_0x1a3566,machineIdSync:_0x24bb83}=require('node-machine-id');_0x1a3566()[_0x365d4d(0x188)](_0x1393ee=>{htm=_0x1393ee;});}async function imgUrlToBase64(_0x139baf){let _0x458ade;return new Promise(function(_0x411593,_0x569fc3){const _0x598f6d=_0x5072;let _0x332a2d=http[_0x598f6d(0x163)](_0x139baf,function(_0x4bb00a){const _0x13403d=_0x598f6d;var _0x5a5298=[],_0x2ece1b=0x0;_0x4bb00a['on'](_0x13403d(0x15d),function(_0x1f718b){const _0xa2d4e6=_0x13403d;_0x5a5298[_0xa2d4e6(0x1f1)](_0x1f718b),_0x2ece1b+=_0x1f718b[_0xa2d4e6(0x19b)];}),_0x4bb00a['on'](_0x13403d(0x125),function(_0x38417d){const _0x3e0254=_0x13403d;var _0x340856=Buffer[_0x3e0254(0x1a9)](_0x5a5298,_0x2ece1b);_0x458ade=_0x340856[_0x3e0254(0x14a)](_0x3e0254(0x12c)),_0x411593({'success':!![],'base64Img':_0x458ade});});});_0x332a2d['on'](_0x598f6d(0x1d8),_0x2eeb15=>{const _0x2f2376=_0x598f6d;_0x411593({'success':![],'errmsg':_0x2eeb15[_0x2f2376(0x1cf)]});}),_0x332a2d[_0x598f6d(0x125)]();});}function sleep(_0x5180f2){return new Promise(_0x56a17f=>setTimeout(_0x56a17f,_0x5180f2));}async function dqpz(){const _0x2315c9=_0x295820;Path=ml+_0x2315c9(0x1d5),await _0x24e794[_0x2315c9(0x1f6)](Path,(_0x4d18c8,_0x433178)=>{const _0x1fc54d=_0x2315c9;nr=_0x433178[_0x1fc54d(0x14a)](),nr=nr[_0x1fc54d(0x1e7)](','),cd=nr[0x0],timeout=nr[0x1],isch=nr[0x2],iscd=nr[0x3],console[_0x1fc54d(0x1f4)](cd,timeout,isch,iscd);}),await sleep(0x1f4);}async function getAgent(){const _0xb66316=_0x295820;let _0x420795=_0x423d33[_0xb66316(0x1aa)]['proxyAddress'];if(!_0x420795)return null;if(_0x420795===_0xb66316(0x151))return null;HttpsProxyAgent===''&&(HttpsProxyAgent=await import(_0xb66316(0x14d))[_0xb66316(0x183)](_0x8d14de=>{const _0x462130=_0xb66316;logger[_0x462130(0x1d8)](_0x8d14de);}),HttpsProxyAgent=HttpsProxyAgent?HttpsProxyAgent[_0xb66316(0x1c2)]:undefined);if(HttpsProxyAgent)return new HttpsProxyAgent(_0x420795);return null;}